{"version":3,"file":"kids-tasks-card-ha-dev.js","sources":["../src/style-manager-v2.js","../src/utils.js","../src/performance-monitor.js","../src/logger.js","../src/base-card.js","../src/card-optimized.js","../src/child-card.js","../src/editors.js","../src/error-boundary.js","../src/accessibility.js","../src/main.js"],"sourcesContent":["// Kids Tasks Style Manager v2.0 - Optimized CSS System\r\n// Consolidated from 364+ variables to 45 essential variables based on usage analysis\r\n\r\nclass KidsTasksStyleManagerV2 {\r\n  static instance = null;\r\n  static injected = false;\r\n  static currentVersion = 'v2.0.0-optimized';\r\n  \r\n  static getInstance() {\r\n    if (!this.instance) {\r\n      this.instance = new KidsTasksStyleManagerV2();\r\n    }\r\n    return this.instance;\r\n  }\r\n  \r\n  static injectGlobalStyles() {\r\n    if (this.injected) return;\r\n    \r\n    const styleElement = document.createElement('style');\r\n    styleElement.id = 'kids-tasks-global-styles-v2';\r\n    styleElement.setAttribute('data-version', this.currentVersion);\r\n    \r\n    styleElement.textContent = this.getOptimizedGlobalStyles();\r\n    document.head.appendChild(styleElement);\r\n    \r\n    this.injected = true;\r\n    console.info(`Kids Tasks v2.0: Optimized styles injected (${this.getVariableCount()} variables)`);\r\n  }\r\n  \r\n  static getVariableCount() {\r\n    return 45; // Reduced from 364+ to 45 core variables\r\n  }\r\n  \r\n  static getOptimizedGlobalStyles() {\r\n    return `\r\n      /* === KIDS TASKS V2.0 - OPTIMIZED CSS VARIABLES === */\r\n      :root {\r\n        /* === CORE COLORS (6 variables) === */\r\n        --kt-primary: var(--primary-color, #3f51b5);\r\n        --kt-secondary: var(--accent-color, #ff4081);\r\n        --kt-success: #4caf50;\r\n        --kt-warning: #ff9800;\r\n        --kt-error: #f44336;\r\n        --kt-info: #2196f3;\r\n        \r\n        /* === STATUS COLORS (4 variables) === */\r\n        --kt-status-todo: var(--kt-warning);\r\n        --kt-status-completed: var(--kt-success);\r\n        --kt-status-pending: var(--kt-info);\r\n        --kt-status-validated: var(--kt-success);\r\n        \r\n        /* === CURRENCY COLORS (2 variables) === */\r\n        --kt-points-color: var(--kt-success);\r\n        --kt-coins-color: #9c27b0;\r\n        \r\n        /* === LAYOUT SPACING (5 variables - most used) === */\r\n        --kt-space-xs: 4px;      /* Used 16 times */\r\n        --kt-space-sm: 8px;      /* Used 19 times */\r\n        --kt-space-md: 16px;     /* Used 23 times */\r\n        --kt-space-lg: 24px;     /* Used 16 times */\r\n        --kt-space-xl: 32px;     /* Used 4 times */\r\n        \r\n        /* === BORDER RADIUS (4 variables) === */\r\n        --kt-radius-sm: 8px;     /* Used 16 times */\r\n        --kt-radius-md: 12px;    /* Used 11 times */\r\n        --kt-radius-lg: 16px;    /* Used 4 times */\r\n        --kt-radius-round: 50%;  /* Used 4 times */\r\n        \r\n        /* === TRANSITIONS (2 variables - performance optimized) === */\r\n        --kt-transition-fast: 0.2s ease;    /* Used 12 times */\r\n        --kt-transition-medium: 0.3s ease;  /* Used 4 times */\r\n        \r\n        /* === SHADOWS (2 variables) === */\r\n        --kt-shadow-light: rgba(0, 0, 0, 0.1);  /* Used 7 times */\r\n        --kt-shadow-medium: rgba(0, 0, 0, 0.2); /* Used 2 times */\r\n        \r\n        /* === SURFACES (3 variables) === */\r\n        --kt-surface-variant: var(--secondary-background-color, #fafafa); /* Used 14 times */\r\n        --kt-surface-primary: var(--card-background-color, white);\r\n        --kt-border: 1px solid var(--divider-color, #e0e0e0);\r\n        \r\n        /* === TYPOGRAPHY (3 variables) === */\r\n        --kt-font-family: var(--paper-font-body1_-_font-family, 'Roboto', sans-serif);\r\n        --kt-font-size-sm: 0.85em;\r\n        --kt-font-size-lg: 1.2em;\r\n        \r\n        /* === COMPONENT SPECIFIC (9 variables) === */\r\n        --kt-avatar-bg: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);\r\n        --kt-cosmetic-border: rgba(0,0,0,0.1);\r\n        --kt-cosmetic-bg: rgba(255,255,255,0.1);\r\n        --kt-gauge-bg: var(--kt-surface-variant);\r\n        --kt-gauge-success: linear-gradient(90deg, var(--kt-success) 0%, var(--kt-info) 100%);\r\n        --kt-gauge-points: var(--kt-success);\r\n        --kt-gauge-coins: var(--kt-coins-color);\r\n        --kt-button-hover: rgba(0,0,0,0.1);\r\n        --kt-overlay: rgba(0,0,0,0.5);\r\n      }\r\n\r\n      /* === OPTIMIZED GLOBAL COMPONENTS === */\r\n      .kids-tasks-scope {\r\n        font-family: var(--kt-font-family);\r\n        --paper-card-background-color: var(--kt-surface-primary);\r\n      }\r\n      \r\n      /* === CORE LAYOUT UTILITIES === */\r\n      ${this.getCoreLayoutStyles()}\r\n      \r\n      /* === COMPONENT STYLES === */\r\n      ${this.getComponentStyles()}\r\n      \r\n      /* === INTERACTION STYLES === */\r\n      ${this.getInteractionStyles()}\r\n      \r\n      /* === RESPONSIVE UTILITIES === */\r\n      ${this.getResponsiveStyles()}\r\n    `;\r\n  }\r\n  \r\n  static getCoreLayoutStyles() {\r\n    return `\r\n      /* Card Containers */\r\n      .kt-card {\r\n        background: var(--kt-surface-primary);\r\n        border-radius: var(--kt-radius-lg);\r\n        box-shadow: 0 2px 8px var(--kt-shadow-light);\r\n        overflow: hidden;\r\n        transition: all var(--kt-transition-fast);\r\n      }\r\n      \r\n      .kt-card:hover {\r\n        transform: translateY(-2px);\r\n        box-shadow: 0 4px 12px var(--kt-shadow-medium);\r\n      }\r\n      \r\n      /* Spacing Utilities */\r\n      .kt-p-xs { padding: var(--kt-space-xs); }\r\n      .kt-p-sm { padding: var(--kt-space-sm); }\r\n      .kt-p-md { padding: var(--kt-space-md); }\r\n      .kt-p-lg { padding: var(--kt-space-lg); }\r\n      .kt-p-xl { padding: var(--kt-space-xl); }\r\n      \r\n      .kt-m-xs { margin: var(--kt-space-xs); }\r\n      .kt-m-sm { margin: var(--kt-space-sm); }\r\n      .kt-m-md { margin: var(--kt-space-md); }\r\n      .kt-m-lg { margin: var(--kt-space-lg); }\r\n      .kt-m-xl { margin: var(--kt-space-xl); }\r\n      \r\n      /* Flex Utilities */\r\n      .kt-flex { display: flex; }\r\n      .kt-flex-col { flex-direction: column; }\r\n      .kt-flex-center { align-items: center; justify-content: center; }\r\n      .kt-flex-between { justify-content: space-between; }\r\n      .kt-flex-wrap { flex-wrap: wrap; }\r\n      .kt-gap-xs { gap: var(--kt-space-xs); }\r\n      .kt-gap-sm { gap: var(--kt-space-sm); }\r\n      .kt-gap-md { gap: var(--kt-space-md); }\r\n      .kt-gap-lg { gap: var(--kt-space-lg); }\r\n    `;\r\n  }\r\n  \r\n  static getComponentStyles() {\r\n    return `\r\n      /* Avatar Components */\r\n      .kt-avatar {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border-radius: var(--kt-radius-round);\r\n        background: var(--kt-avatar-bg);\r\n        border: 2px solid var(--kt-cosmetic-bg);\r\n        transition: all var(--kt-transition-fast);\r\n        font-size: 3em;\r\n      }\r\n      \r\n      .kt-avatar--sm { font-size: 1.5em; }\r\n      .kt-avatar--lg { font-size: 4em; }\r\n      .kt-avatar--xl { font-size: 6em; }\r\n      \r\n      .kt-avatar img {\r\n        width: 2em;\r\n        height: 2em;\r\n        border-radius: var(--kt-radius-round) !important;\r\n        object-fit: cover !important;\r\n        border: 2px solid var(--kt-cosmetic-bg);\r\n        box-shadow: 0 2px 4px var(--kt-shadow-light);\r\n      }\r\n      \r\n      /* Button Components */\r\n      .kt-btn {\r\n        border: none;\r\n        padding: var(--kt-space-sm) var(--kt-space-md);\r\n        border-radius: var(--kt-radius-sm);\r\n        cursor: pointer;\r\n        font-weight: 600;\r\n        font-size: 0.9em;\r\n        transition: all var(--kt-transition-fast);\r\n        display: inline-flex;\r\n        align-items: center;\r\n        gap: var(--kt-space-xs);\r\n      }\r\n      \r\n      .kt-btn--primary {\r\n        background: var(--kt-primary);\r\n        color: white;\r\n      }\r\n      \r\n      .kt-btn--secondary {\r\n        background: var(--kt-surface-variant);\r\n        color: var(--primary-text-color);\r\n        border: 2px solid transparent;\r\n      }\r\n      \r\n      .kt-btn--success {\r\n        background: var(--kt-success);\r\n        color: white;\r\n      }\r\n      \r\n      .kt-btn--error {\r\n        background: var(--kt-error);\r\n        color: white;\r\n      }\r\n      \r\n      .kt-btn:hover {\r\n        transform: translateY(-1px);\r\n        box-shadow: 0 2px 4px var(--kt-shadow-light);\r\n      }\r\n      \r\n      .kt-btn:active {\r\n        transform: translateY(0);\r\n      }\r\n      \r\n      /* Status Components */\r\n      .kt-status {\r\n        padding: 2px var(--kt-space-xs);\r\n        border-radius: var(--kt-radius-sm);\r\n        font-weight: 600;\r\n        font-size: var(--kt-font-size-sm);\r\n        text-transform: uppercase;\r\n        letter-spacing: 0.5px;\r\n      }\r\n      \r\n      .kt-status--todo { background: var(--kt-status-todo); color: white; }\r\n      .kt-status--completed { background: var(--kt-status-completed); color: white; }\r\n      .kt-status--pending { background: var(--kt-status-pending); color: white; }\r\n      .kt-status--validated { background: var(--kt-status-validated); color: white; }\r\n      \r\n      /* Gauge Components */\r\n      .kt-gauge {\r\n        margin-bottom: var(--kt-space-md);\r\n      }\r\n      \r\n      .kt-gauge__header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-bottom: var(--kt-space-xs);\r\n      }\r\n      \r\n      .kt-gauge__label {\r\n        font-weight: 600;\r\n        color: var(--primary-text-color);\r\n        font-size: var(--kt-font-size-sm);\r\n      }\r\n      \r\n      .kt-gauge__value {\r\n        font-weight: 700;\r\n        color: var(--kt-primary);\r\n      }\r\n      \r\n      .kt-gauge__bar {\r\n        height: 8px;\r\n        background: var(--kt-gauge-bg);\r\n        border-radius: var(--kt-radius-sm);\r\n        overflow: hidden;\r\n      }\r\n      \r\n      .kt-gauge__fill {\r\n        height: 100%;\r\n        transition: width var(--kt-transition-medium);\r\n        border-radius: var(--kt-radius-sm);\r\n      }\r\n      \r\n      .kt-gauge__fill--tasks { background: var(--kt-gauge-success); }\r\n      .kt-gauge__fill--points { background: var(--kt-gauge-points); }\r\n      .kt-gauge__fill--coins { background: var(--kt-gauge-coins); }\r\n      \r\n      /* Stats Components */\r\n      .kt-stat {\r\n        background: var(--kt-primary);\r\n        color: white;\r\n        padding: 4px var(--kt-space-sm);\r\n        border-radius: var(--kt-radius-sm);\r\n        font-size: var(--kt-font-size-sm);\r\n        font-weight: 600;\r\n        white-space: nowrap;\r\n      }\r\n      \r\n      .kt-stat--points { background: var(--kt-points-color); }\r\n      .kt-stat--coins { background: var(--kt-coins-color); }\r\n      .kt-stat--success { background: var(--kt-success); }\r\n      .kt-stat--warning { background: var(--kt-warning); }\r\n      \r\n      /* Empty State Components */\r\n      .kt-empty {\r\n        text-align: center;\r\n        padding: var(--kt-space-xl);\r\n        color: var(--secondary-text-color);\r\n      }\r\n      \r\n      .kt-empty__icon {\r\n        font-size: 3em;\r\n        margin-bottom: var(--kt-space-md);\r\n        opacity: 0.6;\r\n      }\r\n      \r\n      .kt-empty__text {\r\n        font-weight: 600;\r\n        margin-bottom: var(--kt-space-xs);\r\n      }\r\n      \r\n      .kt-empty__subtext {\r\n        font-size: var(--kt-font-size-sm);\r\n        opacity: 0.8;\r\n      }\r\n    `;\r\n  }\r\n  \r\n  static getInteractionStyles() {\r\n    return `\r\n      /* Clickable Elements */\r\n      .kt-clickable {\r\n        cursor: pointer;\r\n        transition: all var(--kt-transition-fast);\r\n      }\r\n      \r\n      .kt-clickable:hover {\r\n        background: var(--kt-button-hover);\r\n        transform: translateY(-1px);\r\n        box-shadow: 0 2px 8px var(--kt-shadow-light);\r\n      }\r\n      \r\n      .kt-clickable:active {\r\n        transform: translateY(0);\r\n        box-shadow: 0 1px 4px var(--kt-shadow-light);\r\n      }\r\n      \r\n      /* Loading States */\r\n      .kt-loading {\r\n        text-align: center;\r\n        padding: var(--kt-space-xl);\r\n        color: var(--secondary-text-color);\r\n      }\r\n      \r\n      /* Error States */\r\n      .kt-error {\r\n        background: var(--kt-error);\r\n        color: white;\r\n        padding: var(--kt-space-md);\r\n        border-radius: var(--kt-radius-md);\r\n        text-align: center;\r\n      }\r\n      \r\n      /* Focus States */\r\n      .kt-focusable:focus {\r\n        outline: 2px solid var(--kt-primary);\r\n        outline-offset: 2px;\r\n      }\r\n      \r\n      /* Animation States */\r\n      @keyframes kt-fade-in {\r\n        from { opacity: 0; transform: translateY(10px); }\r\n        to { opacity: 1; transform: translateY(0); }\r\n      }\r\n      \r\n      @keyframes kt-slide-up {\r\n        from { transform: translateY(100%); opacity: 0; }\r\n        to { transform: translateY(0); opacity: 1; }\r\n      }\r\n      \r\n      .kt-fade-in {\r\n        animation: kt-fade-in var(--kt-transition-medium) ease;\r\n      }\r\n      \r\n      .kt-slide-up {\r\n        animation: kt-slide-up var(--kt-transition-medium) ease;\r\n      }\r\n    `;\r\n  }\r\n  \r\n  static getResponsiveStyles() {\r\n    return `\r\n      /* === RESPONSIVE DESIGN === */\r\n      \r\n      /* Mobile First Approach */\r\n      @media (max-width: 480px) {\r\n        :root {\r\n          --kt-space-xs: 2px;\r\n          --kt-space-sm: 4px;\r\n          --kt-space-md: 8px;\r\n          --kt-space-lg: 16px;\r\n          --kt-space-xl: 24px;\r\n        }\r\n        \r\n        .kt-card {\r\n          margin: var(--kt-space-sm);\r\n        }\r\n        \r\n        .kt-avatar {\r\n          font-size: 2em;\r\n        }\r\n        \r\n        .kt-btn {\r\n          padding: var(--kt-space-xs) var(--kt-space-sm);\r\n          font-size: 0.8em;\r\n        }\r\n        \r\n        .kt-flex {\r\n          flex-direction: column;\r\n        }\r\n        \r\n        .kt-flex--mobile-row {\r\n          flex-direction: row;\r\n        }\r\n        \r\n        .kt-gap-md {\r\n          gap: var(--kt-space-sm);\r\n        }\r\n      }\r\n      \r\n      /* Tablet */\r\n      @media (min-width: 481px) and (max-width: 768px) {\r\n        .kt-grid-auto {\r\n          grid-template-columns: repeat(2, 1fr);\r\n        }\r\n      }\r\n      \r\n      /* Desktop */\r\n      @media (min-width: 769px) {\r\n        .kt-grid-auto {\r\n          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\r\n        }\r\n        \r\n        .kt-card:hover {\r\n          transform: translateY(-3px);\r\n          box-shadow: 0 6px 16px var(--kt-shadow-medium);\r\n        }\r\n      }\r\n      \r\n      /* Large Desktop */\r\n      @media (min-width: 1200px) {\r\n        .kt-container {\r\n          max-width: 1200px;\r\n          margin: 0 auto;\r\n        }\r\n        \r\n        .kt-grid-auto {\r\n          grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\r\n        }\r\n      }\r\n      \r\n      /* Reduced Motion */\r\n      @media (prefers-reduced-motion: reduce) {\r\n        * {\r\n          animation-duration: 0.01ms !important;\r\n          animation-iteration-count: 1 !important;\r\n          transition-duration: 0.01ms !important;\r\n        }\r\n        \r\n        .kt-card:hover {\r\n          transform: none;\r\n        }\r\n        \r\n        .kt-clickable:hover {\r\n          transform: none;\r\n        }\r\n        \r\n        .kt-btn:hover {\r\n          transform: none;\r\n        }\r\n      }\r\n      \r\n      /* High Contrast */\r\n      @media (prefers-contrast: high) {\r\n        :root {\r\n          --kt-shadow-light: rgba(0, 0, 0, 0.3);\r\n          --kt-shadow-medium: rgba(0, 0, 0, 0.5);\r\n          --kt-border: 2px solid var(--primary-text-color);\r\n        }\r\n        \r\n        .kt-btn {\r\n          border: 2px solid currentColor;\r\n        }\r\n        \r\n        .kt-status {\r\n          border: 1px solid var(--primary-text-color);\r\n        }\r\n      }\r\n      \r\n      /* Dark Mode Support */\r\n      @media (prefers-color-scheme: dark) {\r\n        :root {\r\n          --kt-surface-variant: var(--secondary-background-color, #2c2c2c);\r\n          --kt-avatar-bg: linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%);\r\n          --kt-gauge-bg: var(--kt-surface-variant);\r\n          --kt-shadow-light: rgba(0, 0, 0, 0.3);\r\n          --kt-shadow-medium: rgba(0, 0, 0, 0.5);\r\n        }\r\n      }\r\n    `;\r\n  }\r\n  \r\n  static removeGlobalStyles() {\r\n    const existingStyles = document.querySelector('#kids-tasks-global-styles-v2');\r\n    if (existingStyles) {\r\n      existingStyles.remove();\r\n      this.injected = false;\r\n      console.info('Kids Tasks v2.0: Optimized styles removed');\r\n    }\r\n  }\r\n  \r\n  // Utility method to check if a CSS variable is being used\r\n  static isVariableUsed(variableName) {\r\n    const usageMap = {\r\n      '--kt-space-md': 23, '--kt-space-sm': 19, '--kt-space-xs': 16,\r\n      '--kt-space-lg': 16, '--kt-radius-sm': 16, '--kt-surface-variant': 14,\r\n      '--kt-success': 14, '--kt-primary': 13, '--kt-transition-fast': 12,\r\n      '--kt-radius-md': 11, '--kt-error': 9, '--kt-shadow-light': 7,\r\n      '--kt-info': 7, '--kt-warning': 4, '--kt-transition-medium': 4,\r\n      '--kt-space-xl': 4, '--kt-radius-round': 4, '--kt-radius-lg': 4\r\n    };\r\n    \r\n    return usageMap[variableName] || 0;\r\n  }\r\n  \r\n  // Performance optimization: Pre-calculate commonly used values\r\n  static getPreCalculatedValues() {\r\n    return {\r\n      spacingScale: {\r\n        xs: '4px', sm: '8px', md: '16px', lg: '24px', xl: '32px'\r\n      },\r\n      radiusScale: {\r\n        sm: '8px', md: '12px', lg: '16px', round: '50%'\r\n      },\r\n      colorPalette: {\r\n        primary: '#3f51b5', success: '#4caf50', warning: '#ff9800',\r\n        error: '#f44336', info: '#2196f3', coins: '#9c27b0'\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n// ES6 export\r\nexport { KidsTasksStyleManagerV2 };\r\n\r\n// Backwards compatibility\r\nwindow.KidsTasksStyleManagerV2 = KidsTasksStyleManagerV2;","// Kids Tasks Utilities - Shared helper functions\r\n\r\nclass KidsTasksUtils {\r\n  \r\n  // Icon rendering utility\r\n  static renderIcon(iconData) {\r\n    if (!iconData || iconData === '') return '📋';\r\n    \r\n    try {\r\n      // If it's a URL (starts with http:// or https://)\r\n      if (typeof iconData === 'string' && (iconData.startsWith('http://') || iconData.startsWith('https://'))) {\r\n        return `<img src=\"${iconData}\" class=\"icon-image\" style=\"width: 1.2em; height: 1.2em; object-fit: cover; border-radius: 3px;\" onerror=\"this.style.display='none'; this.insertAdjacentText('afterend', '📋');\">`;\r\n      }\r\n      \r\n      // If it's an MDI icon (starts with mdi:)\r\n      if (typeof iconData === 'string' && iconData.startsWith('mdi:')) {\r\n        return `<ha-icon icon=\"${iconData}\" style=\"width: 1.2em; height: 1.2em;\"></ha-icon>`;\r\n      }\r\n      \r\n      // Otherwise, treat as emoji or plain text\r\n      const iconString = iconData.toString();\r\n      return iconString || '📋';\r\n    } catch (error) {\r\n      console.warn('Error in renderIcon:', error);\r\n      return '📋';\r\n    }\r\n  }\r\n\r\n  // Empty state component\r\n  static emptySection(icon, text, subtext) {\r\n    return `\r\n      <div class=\"empty-state\">\r\n        <div class=\"empty-icon\">${icon}</div>\r\n        <div class=\"empty-text\">${text}</div>\r\n        <div class=\"empty-subtext\">${subtext}</div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Category icon resolution\r\n  static getCategoryIcon(categoryOrItem, dynamicIcons = {}, rewardIcons = {}) {\r\n    // If it's an object (task/reward), check custom icon first\r\n    if (typeof categoryOrItem === 'object' && categoryOrItem !== null) {\r\n      if (categoryOrItem.icon) {\r\n        return this.renderIcon(categoryOrItem.icon);\r\n      }\r\n      categoryOrItem = categoryOrItem.category;\r\n    }\r\n\r\n    // Dynamic icons from config\r\n    if (categoryOrItem && dynamicIcons) {\r\n      const category = categoryOrItem.toLowerCase();\r\n      if (dynamicIcons[category]) {\r\n        return this.renderIcon(dynamicIcons[category]);\r\n      }\r\n    }\r\n\r\n    // Reward icons from config\r\n    if (categoryOrItem && rewardIcons) {\r\n      const category = categoryOrItem.toLowerCase();  \r\n      if (rewardIcons[category]) {\r\n        return this.renderIcon(rewardIcons[category]);\r\n      }\r\n    }\r\n\r\n    // Default fallback\r\n    return this.renderIcon('📋');\r\n  }\r\n\r\n  // Generate cosmetic data from reward name\r\n  static generateCosmeticDataFromName(rewardName) {\r\n    if (!rewardName) return null;\r\n    \r\n    const name = rewardName.toLowerCase();\r\n    \r\n    // Avatars\r\n    if (name.includes('avatar') || name.includes('personnage')) {\r\n      return {\r\n        type: 'avatar',\r\n        catalog_data: { emoji: '👤', default_avatar: true }\r\n      };\r\n    }\r\n    \r\n    // Backgrounds\r\n    if (name.includes('fond') || name.includes('background') || name.includes('thème')) {\r\n      return {\r\n        type: 'background',\r\n        catalog_data: { css_gradient: 'var(--kt-gradient-neutral)' }\r\n      };\r\n    }\r\n    \r\n    // Outfits\r\n    if (name.includes('tenue') || name.includes('outfit') || name.includes('vêtement')) {\r\n      return {\r\n        type: 'outfit',\r\n        catalog_data: { emoji: '👔', default_outfit: true }\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // Task statistics calculation\r\n  static getTasksStatsForGauges(tasks, completedToday, isTaskActiveTodayFn) {\r\n    const activeTasks = tasks.filter(task => \r\n      task.status === 'todo' && \r\n      isTaskActiveTodayFn && isTaskActiveTodayFn(task)\r\n    );\r\n    \r\n    const totalTasksToday = activeTasks.length;\r\n    const completedTasks = completedToday || 0;\r\n    \r\n    const progressPercent = totalTasksToday > 0 ? Math.round((completedTasks / totalTasksToday) * 100) : 0;\r\n    \r\n    return {\r\n      completedToday: completedTasks,\r\n      totalTasksToday,\r\n      progressPercent,\r\n      activeTasks\r\n    };\r\n  }\r\n\r\n  // Format date for display\r\n  static formatDate(dateString) {\r\n    if (!dateString) return '';\r\n    \r\n    try {\r\n      const date = new Date(dateString);\r\n      const now = new Date();\r\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n      const taskDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n      \r\n      const diffTime = taskDate - today;\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      \r\n      if (diffDays === 0) return 'Aujourd\\'hui';\r\n      if (diffDays === -1) return 'Hier';\r\n      if (diffDays === 1) return 'Demain';\r\n      if (diffDays > 1 && diffDays <= 7) return `Dans ${diffDays} jours`;\r\n      if (diffDays < -1 && diffDays >= -7) return `Il y a ${Math.abs(diffDays)} jours`;\r\n      \r\n      return date.toLocaleDateString('fr-FR', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      console.warn('Error formatting date:', error);\r\n      return '';\r\n    }\r\n  }\r\n\r\n  // Points formatting utility\r\n  static formatPoints(points) {\r\n    if (!points || points === 0) return '0';\r\n    return points > 0 ? `+${points}` : points.toString();\r\n  }\r\n\r\n  // Currency class helper\r\n  static getCurrencyClass(reward) {\r\n    if (reward.cost > 0 && reward.coin_cost > 0) return 'dual-currency';\r\n    if (reward.coin_cost > 0) return 'coins-only';\r\n    return 'points-only';\r\n  }\r\n\r\n  // Mobile device detection\r\n  static detectMobileDevice() {\r\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\r\n           (navigator.maxTouchPoints && navigator.maxTouchPoints > 2);\r\n  }\r\n\r\n  // Debounce utility for performance optimization\r\n  static debounce(func, wait) {\r\n    let timeout;\r\n    return function executedFunction(...args) {\r\n      const later = () => {\r\n        clearTimeout(timeout);\r\n        func(...args);\r\n      };\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n    };\r\n  }\r\n\r\n  // Throttle utility for performance optimization\r\n  static throttle(func, limit) {\r\n    let inThrottle;\r\n    return function executedFunction(...args) {\r\n      if (!inThrottle) {\r\n        func.apply(this, args);\r\n        inThrottle = true;\r\n        setTimeout(() => inThrottle = false, limit);\r\n      }\r\n    };\r\n  }\r\n\r\n  // Deep clone utility\r\n  static deepClone(obj) {\r\n    if (obj === null || typeof obj !== 'object') return obj;\r\n    if (obj instanceof Date) return new Date(obj.getTime());\r\n    if (obj instanceof Array) return obj.map(item => this.deepClone(item));\r\n    if (typeof obj === 'object') {\r\n      const clonedObj = {};\r\n      for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n          clonedObj[key] = this.deepClone(obj[key]);\r\n        }\r\n      }\r\n      return clonedObj;\r\n    }\r\n  }\r\n\r\n  // Safe property access utility\r\n  static safeGet(obj, path, defaultValue = null) {\r\n    const keys = path.split('.');\r\n    let current = obj;\r\n    \r\n    for (const key of keys) {\r\n      if (current === null || current === undefined || !current.hasOwnProperty(key)) {\r\n        return defaultValue;\r\n      }\r\n      current = current[key];\r\n    }\r\n    \r\n    return current;\r\n  }\r\n\r\n  // Validation utility\r\n  static isValidChild(child) {\r\n    return child && \r\n           typeof child === 'object' && \r\n           child.id && \r\n           child.name;\r\n  }\r\n\r\n  static isValidTask(task) {\r\n    return task && \r\n           typeof task === 'object' && \r\n           task.id && \r\n           task.name && \r\n           task.status;\r\n  }\r\n\r\n  static isValidReward(reward) {\r\n    return reward && \r\n           typeof reward === 'object' && \r\n           reward.id && \r\n           reward.name && \r\n           (reward.cost > 0 || reward.coin_cost > 0);\r\n  }\r\n\r\n  // Error boundary utility\r\n  static safeExecute(fn, fallbackValue = null, context = 'Unknown') {\r\n    try {\r\n      return fn();\r\n    } catch (error) {\r\n      console.warn(`Safe execute error in ${context}:`, error);\r\n      return fallbackValue;\r\n    }\r\n  }\r\n}\r\n\r\n// ES6 export\r\nexport { KidsTasksUtils };","// Performance Monitoring and Profiling System\r\n\r\nclass KidsTasksPerformanceMonitor {\r\n  constructor() {\r\n    this.metrics = {\r\n      renderTimes: [],\r\n      domUpdates: [],\r\n      eventHandlers: [],\r\n      memoryUsage: [],\r\n      componentCounts: {}\r\n    };\r\n    \r\n    this.observers = {\r\n      mutation: null,\r\n      performance: null,\r\n      resize: null\r\n    };\r\n    \r\n    this.isEnabled = __DEV__ || localStorage.getItem('kt-debug-performance') === 'true';\r\n    this.startTime = performance.now();\r\n    \r\n    if (this.isEnabled) {\r\n      this.initializeMonitoring();\r\n    }\r\n  }\r\n\r\n  // Initialize performance monitoring\r\n  initializeMonitoring() {\r\n    this.setupMutationObserver();\r\n    this.setupPerformanceObserver();\r\n    this.setupMemoryMonitoring();\r\n    \r\n    if (__DEV__) {\r\n      console.info('🔍 Performance monitoring enabled');\r\n    }\r\n  }\r\n\r\n  // Track render performance\r\n  trackRender(componentName, startTime, endTime) {\r\n    if (!this.isEnabled) return;\r\n    \r\n    const renderTime = endTime - startTime;\r\n    this.metrics.renderTimes.push({\r\n      component: componentName,\r\n      duration: renderTime,\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    // Keep only last 100 render measurements\r\n    if (this.metrics.renderTimes.length > 100) {\r\n      this.metrics.renderTimes.shift();\r\n    }\r\n\r\n    // Warn about slow renders (>16ms = below 60fps)\r\n    if (renderTime > 16 && __DEV__) {\r\n      console.warn(`🐌 Slow render detected: ${componentName} took ${renderTime.toFixed(2)}ms`);\r\n    }\r\n  }\r\n\r\n  // Track DOM updates\r\n  trackDOMUpdate(operation, elementCount = 1) {\r\n    if (!this.isEnabled) return;\r\n    \r\n    this.metrics.domUpdates.push({\r\n      operation,\r\n      elementCount,\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    // Keep only last 50 DOM updates\r\n    if (this.metrics.domUpdates.length > 50) {\r\n      this.metrics.domUpdates.shift();\r\n    }\r\n  }\r\n\r\n  // Track event handler registrations\r\n  trackEventHandler(event, component, action = 'add') {\r\n    if (!this.isEnabled) return;\r\n    \r\n    this.metrics.eventHandlers.push({\r\n      event,\r\n      component,\r\n      action,\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    // Count active event handlers\r\n    if (!this.metrics.componentCounts[component]) {\r\n      this.metrics.componentCounts[component] = { events: 0 };\r\n    }\r\n    \r\n    this.metrics.componentCounts[component].events += action === 'add' ? 1 : -1;\r\n  }\r\n\r\n  // Setup mutation observer for DOM changes\r\n  setupMutationObserver() {\r\n    if (typeof MutationObserver === 'undefined') return;\r\n    \r\n    this.observers.mutation = new MutationObserver((mutations) => {\r\n      let totalChanges = 0;\r\n      mutations.forEach(mutation => {\r\n        totalChanges += mutation.addedNodes.length + mutation.removedNodes.length;\r\n      });\r\n      \r\n      if (totalChanges > 0) {\r\n        this.trackDOMUpdate('mutation', totalChanges);\r\n      }\r\n    });\r\n\r\n    // Observe document changes\r\n    this.observers.mutation.observe(document.body, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: false\r\n    });\r\n  }\r\n\r\n  // Setup performance observer for long tasks\r\n  setupPerformanceObserver() {\r\n    if (typeof PerformanceObserver === 'undefined') return;\r\n    \r\n    try {\r\n      this.observers.performance = new PerformanceObserver((list) => {\r\n        const entries = list.getEntries();\r\n        entries.forEach(entry => {\r\n          if (entry.entryType === 'longtask' && entry.duration > 50) {\r\n            console.warn(`🐌 Long task detected: ${entry.duration.toFixed(2)}ms`);\r\n          }\r\n        });\r\n      });\r\n      \r\n      this.observers.performance.observe({ entryTypes: ['longtask'] });\r\n    } catch (error) {\r\n      // Long task API not supported, skip\r\n    }\r\n  }\r\n\r\n  // Memory monitoring\r\n  setupMemoryMonitoring() {\r\n    if (!performance.memory) return;\r\n    \r\n    const measureMemory = () => {\r\n      if (!this.isEnabled) return;\r\n      \r\n      this.metrics.memoryUsage.push({\r\n        used: performance.memory.usedJSHeapSize,\r\n        total: performance.memory.totalJSHeapSize,\r\n        limit: performance.memory.jsHeapSizeLimit,\r\n        timestamp: Date.now()\r\n      });\r\n\r\n      // Keep only last 20 memory measurements\r\n      if (this.metrics.memoryUsage.length > 20) {\r\n        this.metrics.memoryUsage.shift();\r\n      }\r\n    };\r\n\r\n    // Measure every 10 seconds\r\n    setInterval(measureMemory, 10000);\r\n    measureMemory(); // Initial measurement\r\n  }\r\n\r\n  // Render timing decorator\r\n  wrapRender(component, originalRender) {\r\n    if (!this.isEnabled) return originalRender;\r\n    \r\n    return function(...args) {\r\n      const startTime = performance.now();\r\n      const result = originalRender.apply(this, args);\r\n      const endTime = performance.now();\r\n      \r\n      window.KidsTasksPerformanceMonitor?.trackRender(\r\n        component.constructor.name, \r\n        startTime, \r\n        endTime\r\n      );\r\n      \r\n      return result;\r\n    };\r\n  }\r\n\r\n  // Generate performance report\r\n  generateReport() {\r\n    if (!this.isEnabled) return null;\r\n    \r\n    const now = Date.now();\r\n    const last5Minutes = now - (5 * 60 * 1000);\r\n    \r\n    // Filter recent metrics\r\n    const recentRenders = this.metrics.renderTimes.filter(r => r.timestamp > last5Minutes);\r\n    const recentDOMUpdates = this.metrics.domUpdates.filter(d => d.timestamp > last5Minutes);\r\n    const recentMemory = this.metrics.memoryUsage.slice(-5);\r\n\r\n    // Calculate averages\r\n    const avgRenderTime = recentRenders.length > 0 \r\n      ? recentRenders.reduce((sum, r) => sum + r.duration, 0) / recentRenders.length \r\n      : 0;\r\n\r\n    const memoryTrend = recentMemory.length > 1 \r\n      ? recentMemory[recentMemory.length - 1].used - recentMemory[0].used \r\n      : 0;\r\n\r\n    return {\r\n      summary: {\r\n        uptime: Math.round((now - this.startTime) / 1000),\r\n        avgRenderTime: Math.round(avgRenderTime * 100) / 100,\r\n        totalRenders: recentRenders.length,\r\n        domUpdates: recentDOMUpdates.length,\r\n        memoryTrend: Math.round(memoryTrend / 1024), // KB\r\n        activeComponents: Object.keys(this.metrics.componentCounts).length\r\n      },\r\n      details: {\r\n        slowRenders: recentRenders.filter(r => r.duration > 16),\r\n        componentBreakdown: this.metrics.componentCounts,\r\n        memoryUsage: recentMemory\r\n      }\r\n    };\r\n  }\r\n\r\n  // Public methods for manual profiling\r\n  startProfile(name) {\r\n    if (!this.isEnabled) return null;\r\n    return { name, startTime: performance.now() };\r\n  }\r\n\r\n  endProfile(profile) {\r\n    if (!this.isEnabled || !profile) return;\r\n    const duration = performance.now() - profile.startTime;\r\n    console.log(`⏱️ ${profile.name}: ${duration.toFixed(2)}ms`);\r\n    return duration;\r\n  }\r\n\r\n  // Enable/disable monitoring\r\n  toggle(enabled = !this.isEnabled) {\r\n    this.isEnabled = enabled;\r\n    localStorage.setItem('kt-debug-performance', enabled.toString());\r\n    \r\n    if (enabled && !this.observers.mutation) {\r\n      this.initializeMonitoring();\r\n    }\r\n    \r\n    console.info(`🔍 Performance monitoring ${enabled ? 'enabled' : 'disabled'}`);\r\n  }\r\n\r\n  // Cleanup\r\n  destroy() {\r\n    if (this.observers.mutation) {\r\n      this.observers.mutation.disconnect();\r\n    }\r\n    if (this.observers.performance) {\r\n      this.observers.performance.disconnect();\r\n    }\r\n    \r\n    this.metrics = {\r\n      renderTimes: [],\r\n      domUpdates: [],\r\n      eventHandlers: [],\r\n      memoryUsage: [],\r\n      componentCounts: {}\r\n    };\r\n  }\r\n}\r\n\r\n// Global singleton instance\r\nlet performanceMonitor;\r\n\r\n// Auto-initialize if in development mode\r\nif (typeof window !== 'undefined') {\r\n  performanceMonitor = new KidsTasksPerformanceMonitor();\r\n  window.KidsTasksPerformanceMonitor = performanceMonitor;\r\n  \r\n  // Dev tools integration\r\n  if (__DEV__) {\r\n    window.ktPerf = {\r\n      report: () => performanceMonitor.generateReport(),\r\n      toggle: () => performanceMonitor.toggle(),\r\n      clear: () => performanceMonitor.destroy()\r\n    };\r\n    \r\n    console.info('🛠️ Performance tools available: window.ktPerf');\r\n  }\r\n}\r\n\r\nexport { KidsTasksPerformanceMonitor };\r\nexport default performanceMonitor;","// Production-safe logging system\r\n\r\nclass KidsTasksLogger {\r\n  constructor() {\r\n    this.isDevelopment = __DEV__ || false;\r\n    this.isDebugEnabled = this.isDevelopment || localStorage.getItem('kt-debug') === 'true';\r\n    this.logLevels = {\r\n      error: 0,\r\n      warn: 1, \r\n      info: 2,\r\n      debug: 3\r\n    };\r\n    this.currentLevel = this.isDevelopment ? 3 : 1; // debug in dev, warn+ in prod\r\n  }\r\n\r\n  // Production-safe error logging (always enabled)\r\n  error(message, ...args) {\r\n    if (this.currentLevel >= this.logLevels.error) {\r\n      console.error(`🔴 [Kids Tasks] ${message}`, ...args);\r\n    }\r\n  }\r\n\r\n  // Production-safe warning logging \r\n  warn(message, ...args) {\r\n    if (this.currentLevel >= this.logLevels.warn) {\r\n      console.warn(`🟡 [Kids Tasks] ${message}`, ...args);\r\n    }\r\n  }\r\n\r\n  // Info logging (development only by default)\r\n  info(message, ...args) {\r\n    if (this.currentLevel >= this.logLevels.info) {\r\n      console.info(`🔵 [Kids Tasks] ${message}`, ...args);\r\n    }\r\n  }\r\n\r\n  // Debug logging (development only)\r\n  debug(message, ...args) {\r\n    if (this.currentLevel >= this.logLevels.debug && this.isDebugEnabled) {\r\n      console.debug(`🟢 [Kids Tasks] ${message}`, ...args);\r\n    }\r\n  }\r\n\r\n  // Performance logging\r\n  perf(component, action, duration) {\r\n    if (this.isDebugEnabled && duration !== undefined) {\r\n      this.debug(`⏱️ ${component}.${action}: ${duration.toFixed(2)}ms`);\r\n    }\r\n  }\r\n\r\n  // Group logging for complex operations\r\n  group(title, callback) {\r\n    if (this.isDebugEnabled) {\r\n      console.group(`📁 [Kids Tasks] ${title}`);\r\n      try {\r\n        callback();\r\n      } finally {\r\n        console.groupEnd();\r\n      }\r\n    } else {\r\n      callback();\r\n    }\r\n  }\r\n\r\n  // Toggle debug mode\r\n  toggleDebug() {\r\n    this.isDebugEnabled = !this.isDebugEnabled;\r\n    localStorage.setItem('kt-debug', this.isDebugEnabled.toString());\r\n    this.info(`Debug mode ${this.isDebugEnabled ? 'enabled' : 'disabled'}`);\r\n  }\r\n\r\n  // Set log level\r\n  setLevel(level) {\r\n    if (level in this.logLevels) {\r\n      this.currentLevel = this.logLevels[level];\r\n      this.info(`Log level set to: ${level}`);\r\n    }\r\n  }\r\n}\r\n\r\n// Global logger instance\r\nconst logger = new KidsTasksLogger();\r\n\r\n// Expose debug toggle in development\r\nif (__DEV__ && typeof window !== 'undefined') {\r\n  window.ktLogger = logger;\r\n  window.ktDebug = () => logger.toggleDebug();\r\n}\r\n\r\n// Replace all console.* calls with logger in production\r\nexport const devLog = {\r\n  error: (...args) => logger.error(...args),\r\n  warn: (...args) => logger.warn(...args),\r\n  info: (...args) => logger.info(...args),\r\n  debug: (...args) => logger.debug(...args),\r\n  log: (...args) => logger.debug(...args), // Map console.log to debug\r\n  group: (title, callback) => logger.group(title, callback),\r\n  perf: (component, action, duration) => logger.perf(component, action, duration)\r\n};\r\n\r\nexport { KidsTasksLogger, logger };\r\nexport default logger;","// Kids Tasks Base Card - Foundation class for all card components\r\n\r\nimport { KidsTasksUtils } from './utils.js';\r\nimport performanceMonitor from './performance-monitor.js';\r\nimport logger from './logger.js';\r\n\r\nclass KidsTasksBaseCard extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.attachShadow({ mode: 'open' });\r\n    this._initialized = false;\r\n    \r\n    // Performance and render optimization\r\n    this._lastRenderState = null;\r\n    this._renderDebounceTimer = null;\r\n    this._isRendering = false;\r\n    this._pendingRender = false;\r\n    \r\n    // Touch interaction state management\r\n    this._touchStates = new WeakMap();\r\n    this._touchControllers = new Map();\r\n    this._isMobile = this._detectMobileDevice();\r\n    \r\n    // Inject global styles on first load\r\n    if (typeof KidsTasksStyleManager !== 'undefined') {\r\n      KidsTasksStyleManager.injectGlobalStyles();\r\n    }\r\n    \r\n    // Performance monitoring\r\n    if (performanceMonitor) {\r\n      performanceMonitor.trackEventHandler('constructor', this.constructor.name, 'add');\r\n    }\r\n  }\r\n\r\n  set hass(hass) {\r\n    const oldHass = this._hass;\r\n    this._hass = hass;\r\n    if (!this._initialized && hass) {\r\n      this._initialized = true;\r\n      this.shadowRoot.addEventListener('click', this.handleClick.bind(this));\r\n      this.initTouchInteractions();\r\n      this.smartRender();\r\n    } else if (hass && this.shouldUpdate(oldHass, hass)) {\r\n      this.smartRender();\r\n      if (this._initialized) {\r\n        this.initTouchInteractions();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Smart rendering system with debouncing and state diffing\r\n  smartRender(force = false) {\r\n    // Prevent render spam\r\n    if (this._isRendering && !force) {\r\n      this._pendingRender = true;\r\n      return;\r\n    }\r\n\r\n    // Debounce rapid render calls\r\n    if (this._renderDebounceTimer) {\r\n      clearTimeout(this._renderDebounceTimer);\r\n    }\r\n\r\n    this._renderDebounceTimer = setTimeout(() => {\r\n      this._performRender(force);\r\n    }, force ? 0 : 16); // 16ms debounce (~60fps)\r\n  }\r\n\r\n  _performRender(force = false) {\r\n    if (this._isRendering) return;\r\n\r\n    const startTime = performance.now();\r\n    this._isRendering = true;\r\n\r\n    try {\r\n      // Check if render is actually needed\r\n      if (!force && !this._needsRender()) {\r\n        return;\r\n      }\r\n\r\n      // Perform the actual render\r\n      this.render();\r\n      \r\n      // Update render state tracking\r\n      this._updateRenderState();\r\n      \r\n      // Handle pending render if needed\r\n      if (this._pendingRender) {\r\n        this._pendingRender = false;\r\n        setTimeout(() => this.smartRender(), 0);\r\n      }\r\n      \r\n    } catch (error) {\r\n      logger.error('Render error in', this.constructor.name, error);\r\n      this._handleRenderError(error);\r\n    } finally {\r\n      this._isRendering = false;\r\n      \r\n      // Performance tracking\r\n      if (performanceMonitor) {\r\n        const endTime = performance.now();\r\n        performanceMonitor.trackRender(this.constructor.name, startTime, endTime);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if component needs re-render based on state changes\r\n  _needsRender() {\r\n    const currentState = this._getCurrentRenderState();\r\n    \r\n    if (!this._lastRenderState) {\r\n      return true; // First render\r\n    }\r\n\r\n    // Deep comparison of render state\r\n    return JSON.stringify(currentState) !== JSON.stringify(this._lastRenderState);\r\n  }\r\n\r\n  // Get current state for render comparison\r\n  _getCurrentRenderState() {\r\n    return {\r\n      hasHass: !!this._hass,\r\n      entityCount: this._hass ? Object.keys(this._hass.states || {}).length : 0,\r\n      configHash: this.config ? JSON.stringify(this.config).slice(0, 100) : null,\r\n      timestamp: Math.floor(Date.now() / 1000) // Round to seconds to avoid constant changes\r\n    };\r\n  }\r\n\r\n  // Update render state tracking\r\n  _updateRenderState() {\r\n    this._lastRenderState = this._getCurrentRenderState();\r\n  }\r\n\r\n  // Handle render errors gracefully\r\n  _handleRenderError(error) {\r\n    if (this.shadowRoot) {\r\n      this.shadowRoot.innerHTML = `\r\n        <div style=\"padding: 16px; background: #fee; border: 1px solid #fcc; border-radius: 4px;\">\r\n          <h3 style=\"color: #c33; margin: 0 0 8px 0;\">Card Error</h3>\r\n          <p style=\"margin: 0; font-size: 14px;\">${error.message}</p>\r\n          <button onclick=\"this.closest('kids-tasks-card, kids-tasks-child-card').smartRender(true)\" \r\n                  style=\"margin-top: 8px; padding: 4px 8px; background: #c33; color: white; border: none; border-radius: 2px; cursor: pointer;\">\r\n            Retry\r\n          </button>\r\n        </div>\r\n      `;\r\n    }\r\n  }\r\n\r\n  handleClick(event) {\r\n    const target = event.target.closest('[data-action]');\r\n    if (!target) {\r\n      this._hideAllDeleteConfirmations();\r\n      return;\r\n    }\r\n\r\n    // Don't process clicks during long press\r\n    const longPressItem = target.closest('.long-pressing');\r\n    if (longPressItem) return;\r\n\r\n    // Check for active touch state\r\n    const touchState = this._touchStates.get(target.closest('.kt-long-press-item'));\r\n    if (touchState && touchState.isActive) return;\r\n\r\n    // Don't process clicks during swipe\r\n    const swipeableItem = target.closest('.kt-swipeable-item');\r\n    if (swipeableItem && (swipeableItem.classList.contains('swiping-left') || swipeableItem.classList.contains('swiping-right'))) {\r\n      return;\r\n    }\r\n\r\n    // Close other confirmations unless this is a confirmation button\r\n    if (!target.classList.contains('kt-confirm-delete') && !target.classList.contains('kt-cancel-delete')) {\r\n      this._hideAllDeleteConfirmations();\r\n    }\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    const action = target.dataset.action;\r\n    const id = target.dataset.id;\r\n\r\n    // Handle filter actions specially\r\n    if (action === 'filter-rewards' || action === 'filter-children' || action === 'filter-tasks') {\r\n      this.handleAction(action, target.dataset.filter, event);\r\n    } else {\r\n      this.handleAction(action, id, event);\r\n    }\r\n  }\r\n\r\n  // Touch Interaction System\r\n  _detectMobileDevice() {\r\n    return typeof KidsTasksUtils !== 'undefined' \r\n      ? KidsTasksUtils.detectMobileDevice()\r\n      : 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n  }\r\n\r\n  initTouchInteractions() {\r\n    this._cleanupTouchInteractions();\r\n    this._initLongPressSystem();\r\n    this.addSwipeListeners();\r\n  }\r\n\r\n  _cleanupTouchInteractions() {\r\n    // Clean up touch controllers\r\n    for (const controller of this._touchControllers.values()) {\r\n      controller.abort();\r\n      if (performanceMonitor) {\r\n        performanceMonitor.trackEventHandler('touch', this.constructor.name, 'remove');\r\n      }\r\n    }\r\n    this._touchControllers.clear();\r\n    this._touchStates = new WeakMap();\r\n    this._longPressListenersAdded = false;\r\n    this._swipeListenersAdded = false;\r\n\r\n    // Clean up render timers\r\n    if (this._renderDebounceTimer) {\r\n      clearTimeout(this._renderDebounceTimer);\r\n      this._renderDebounceTimer = null;\r\n    }\r\n  }\r\n\r\n  // Enhanced disconnection cleanup\r\n  disconnectedCallback() {\r\n    this._cleanupTouchInteractions();\r\n    \r\n    // Clean up any component-specific resources\r\n    if (this._cleanupTimers) {\r\n      this._cleanupTimers();\r\n    }\r\n    \r\n    // Performance monitoring\r\n    if (performanceMonitor) {\r\n      performanceMonitor.trackEventHandler('disconnect', this.constructor.name, 'remove');\r\n    }\r\n  }\r\n\r\n  // Event delegation system for better performance\r\n  _setupEventDelegation() {\r\n    if (this._eventDelegationSetup) return;\r\n    \r\n    // Use single event listener with delegation instead of multiple listeners\r\n    const handleDelegatedEvent = (event) => {\r\n      const target = event.target.closest('[data-action]');\r\n      if (target) {\r\n        this.handleClick(event);\r\n      }\r\n    };\r\n\r\n    this.shadowRoot.addEventListener('click', handleDelegatedEvent, { \r\n      passive: false,\r\n      capture: false \r\n    });\r\n    \r\n    if (performanceMonitor) {\r\n      performanceMonitor.trackEventHandler('delegation', this.constructor.name, 'add');\r\n    }\r\n    \r\n    this._eventDelegationSetup = true;\r\n  }\r\n\r\n  _initLongPressSystem() {\r\n    if (this._longPressListenersAdded) return;\r\n    this._longPressListenersAdded = true;\r\n\r\n    const controller = new AbortController();\r\n    this._touchControllers.set('longpress', controller);\r\n    const signal = controller.signal;\r\n\r\n    const events = this._isMobile \r\n      ? { down: 'touchstart', up: 'touchend', move: 'touchmove' }\r\n      : { down: 'pointerdown', up: 'pointerup', move: 'pointermove' };\r\n\r\n    const handleStart = (e) => {\r\n      const longPressItem = e.target.closest('.kt-long-press-item');\r\n      if (!longPressItem || longPressItem.querySelector('.kt-delete-confirmation:not(.hidden)')) {\r\n        return;\r\n      }\r\n\r\n      const clientX = e.clientX || (e.touches && e.touches[0].clientX);\r\n      const clientY = e.clientY || (e.touches && e.touches[0].clientY);\r\n      \r\n      if (!clientX || !clientY) return;\r\n\r\n      const state = {\r\n        timer: null,\r\n        startX: clientX,\r\n        startY: clientY,\r\n        isActive: true,\r\n        element: longPressItem\r\n      };\r\n\r\n      const oldState = this._touchStates.get(longPressItem);\r\n      if (oldState && oldState.timer) {\r\n        clearTimeout(oldState.timer);\r\n      }\r\n\r\n      state.timer = setTimeout(() => {\r\n        if (state.isActive && this._touchStates.get(longPressItem) === state) {\r\n          longPressItem.classList.add('long-pressing');\r\n          this.showDeleteConfirmation(longPressItem);\r\n          if (navigator.vibrate) navigator.vibrate(50);\r\n        }\r\n      }, 500);\r\n\r\n      this._touchStates.set(longPressItem, state);\r\n    };\r\n\r\n    const handleEnd = (e) => {\r\n      const longPressItem = e.target.closest('.kt-long-press-item');\r\n      if (!longPressItem) return;\r\n\r\n      const state = this._touchStates.get(longPressItem);\r\n      if (state) {\r\n        if (state.timer) {\r\n          clearTimeout(state.timer);\r\n        }\r\n        state.isActive = false;\r\n        this._touchStates.delete(longPressItem);\r\n      }\r\n    };\r\n\r\n    const handleMove = (e) => {\r\n      const longPressItem = e.target.closest('.kt-long-press-item');\r\n      if (!longPressItem) return;\r\n\r\n      const state = this._touchStates.get(longPressItem);\r\n      if (!state || !state.isActive) return;\r\n\r\n      const clientX = e.clientX || (e.touches && e.touches[0].clientX);\r\n      const clientY = e.clientY || (e.touches && e.touches[0].clientY);\r\n      \r\n      if (clientX && clientY) {\r\n        const deltaX = Math.abs(clientX - state.startX);\r\n        const deltaY = Math.abs(clientY - state.startY);\r\n        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\r\n\r\n        if (distance > 8) {\r\n          if (state.timer) {\r\n            clearTimeout(state.timer);\r\n          }\r\n          state.isActive = false;\r\n          this._touchStates.delete(longPressItem);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.shadowRoot.addEventListener(events.down, handleStart, { signal });\r\n    this.shadowRoot.addEventListener(events.up, handleEnd, { signal });\r\n    this.shadowRoot.addEventListener(events.move, handleMove, { signal });\r\n  }\r\n\r\n  showDeleteConfirmation(item) {\r\n    this._hideAllDeleteConfirmations(item);\r\n    \r\n    const confirmation = item.querySelector('.kt-delete-confirmation');\r\n    if (confirmation) {\r\n      confirmation.classList.remove('hidden');\r\n      \r\n      const confirmBtn = confirmation.querySelector('.kt-confirm-delete');\r\n      const cancelBtn = confirmation.querySelector('.kt-cancel-delete');\r\n      \r\n      if (confirmBtn) {\r\n        confirmBtn.onclick = () => {\r\n          const deleteAction = item.dataset.deleteAction;\r\n          const id = item.dataset.id;\r\n          if (deleteAction && id) {\r\n            this.handleAction(deleteAction, id);\r\n          }\r\n          this.hideDeleteConfirmation(item);\r\n        };\r\n      }\r\n      \r\n      if (cancelBtn) {\r\n        cancelBtn.onclick = (e) => {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          this.hideDeleteConfirmation(item);\r\n        };\r\n      }\r\n      \r\n      setTimeout(() => {\r\n        this.hideDeleteConfirmation(item);\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  hideDeleteConfirmation(item) {\r\n    const confirmation = item.querySelector('.kt-delete-confirmation');\r\n    if (confirmation) {\r\n      confirmation.classList.add('hidden');\r\n    }\r\n    item.classList.remove('long-pressing');\r\n    \r\n    const state = this._touchStates.get(item);\r\n    if (state) {\r\n      if (state.timer) {\r\n        clearTimeout(state.timer);\r\n      }\r\n      state.isActive = false;\r\n      this._touchStates.delete(item);\r\n    }\r\n    \r\n    item.style.pointerEvents = 'none';\r\n    setTimeout(() => {\r\n      item.style.pointerEvents = '';\r\n    }, 200);\r\n  }\r\n\r\n  _hideAllDeleteConfirmations(exceptItem = null) {\r\n    const openConfirmations = this.shadowRoot.querySelectorAll('.kt-delete-confirmation:not(.hidden)');\r\n    \r\n    openConfirmations.forEach(confirmation => {\r\n      const parentItem = confirmation.closest('.kt-long-press-item');\r\n      if (parentItem && parentItem !== exceptItem) {\r\n        this.hideDeleteConfirmation(parentItem);\r\n      }\r\n    });\r\n  }\r\n\r\n  addSwipeListeners() {\r\n    if (this._swipeListenersAdded) return;\r\n    this._swipeListenersAdded = true;\r\n\r\n    const controller = new AbortController();\r\n    this._touchControllers.set('swipe', controller);\r\n    const signal = controller.signal;\r\n    \r\n    let startX = 0;\r\n    let startY = 0;\r\n    let currentX = 0;\r\n    let currentY = 0;\r\n    let isTracking = false;\r\n    let currentItem = null;\r\n\r\n    // Touch handlers for swipe gestures\r\n    const touchStart = (e) => {\r\n      const swipeableItem = e.target.closest('.kt-swipeable-item');\r\n      if (!swipeableItem) return;\r\n\r\n      currentItem = swipeableItem;\r\n      isTracking = true;\r\n      startX = e.touches[0].clientX;\r\n      startY = e.touches[0].clientY;\r\n      currentX = startX;\r\n      currentY = startY;\r\n    };\r\n\r\n    const touchMove = (e) => {\r\n      if (!isTracking || !currentItem) return;\r\n      \r\n      e.preventDefault();\r\n      currentX = e.touches[0].clientX;\r\n      currentY = e.touches[0].clientY;\r\n      \r\n      const deltaX = currentX - startX;\r\n      const deltaY = currentY - startY;\r\n      \r\n      if (Math.abs(deltaY) > Math.abs(deltaX)) {\r\n        isTracking = false;\r\n        currentItem = null;\r\n        return;\r\n      }\r\n      \r\n      if (Math.abs(deltaX) > 30) {\r\n        if (deltaX > 0) {\r\n          currentItem.classList.add('swiping-right');\r\n          currentItem.classList.remove('swiping-left');\r\n        } else {\r\n          currentItem.classList.add('swiping-left');\r\n          currentItem.classList.remove('swiping-right');\r\n        }\r\n      }\r\n    };\r\n\r\n    const touchEnd = (e) => {\r\n      if (!isTracking || !currentItem) return;\r\n      \r\n      const deltaX = currentX - startX;\r\n      \r\n      if (Math.abs(deltaX) > 80) {\r\n        if (deltaX > 0) {\r\n          this.handleSwipeRight(currentItem);\r\n        } else {\r\n          this.handleSwipeLeft(currentItem);\r\n        }\r\n      }\r\n      \r\n      setTimeout(() => {\r\n        if (currentItem) {\r\n          currentItem.classList.remove('swiping-left', 'swiping-right');\r\n        }\r\n      }, 300);\r\n      \r\n      isTracking = false;\r\n      currentItem = null;\r\n    };\r\n\r\n    this.shadowRoot.addEventListener('touchstart', touchStart, { signal, passive: true });\r\n    this.shadowRoot.addEventListener('touchmove', touchMove, { signal, passive: false });\r\n    this.shadowRoot.addEventListener('touchend', touchEnd, { signal, passive: true });\r\n  }\r\n\r\n  // Swipe handling methods (to be overridden by subclasses)\r\n  handleSwipeLeft(item) {\r\n    // Default implementation - override in subclasses\r\n  }\r\n\r\n  handleSwipeRight(item) {\r\n    // Default implementation - override in subclasses\r\n  }\r\n\r\n  // Utility methods\r\n  emptySection(icon, text, subtext) {\r\n    return typeof KidsTasksUtils !== 'undefined'\r\n      ? KidsTasksUtils.emptySection(icon, text, subtext)\r\n      : `\r\n          <div class=\"empty-state\">\r\n            <div class=\"empty-icon\">${icon}</div>\r\n            <div class=\"empty-text\">${text}</div>\r\n            <div class=\"empty-subtext\">${subtext}</div>\r\n          </div>\r\n        `;\r\n  }\r\n\r\n  renderIcon(iconData) {\r\n    return typeof KidsTasksUtils !== 'undefined'\r\n      ? KidsTasksUtils.renderIcon(iconData)\r\n      : (iconData || '📋');\r\n  }\r\n\r\n  getCategoryIcon(categoryOrItem) {\r\n    if (typeof KidsTasksUtils !== 'undefined') {\r\n      return KidsTasksUtils.getCategoryIcon(categoryOrItem, this.getDynamicIcons?.() || {}, this.getRewardIcons?.() || {});\r\n    }\r\n    return this.renderIcon('📋');\r\n  }\r\n\r\n  // Common rendering methods\r\n  renderGauges(stats, includeCoins = false, completedToday, totalTasksToday) {\r\n    if (!stats) return '';\r\n    \r\n    const completed = completedToday !== undefined ? completedToday : (stats.completedToday || 0);\r\n    const total = totalTasksToday !== undefined ? totalTasksToday : (stats.totalTasksToday || 0);\r\n    \r\n    const renderGauge = (label, text, fillClass, width) => {\r\n      return `\r\n        <div class=\"gauge\">\r\n          <div class=\"gauge-header\">\r\n            <span class=\"gauge-label\">${label}</span>\r\n            <span class=\"gauge-value\">${text}</span>\r\n          </div>\r\n          <div class=\"gauge-bar\">\r\n            <div class=\"gauge-fill ${fillClass}\" style=\"width: ${width}%\"></div>\r\n          </div>\r\n        </div>\r\n      `;\r\n    };\r\n\r\n    const progressPercent = total > 0 ? Math.round((completed / total) * 100) : 0;\r\n    const progressGauge = renderGauge(\r\n      'Tâches du jour',\r\n      `${completed}/${total}`,\r\n      'tasks-fill',\r\n      progressPercent\r\n    );\r\n\r\n    if (!includeCoins) {\r\n      return progressGauge;\r\n    }\r\n\r\n    const points = stats.points || 0;\r\n    const coins = stats.coins || 0;\r\n    \r\n    const pointsGauge = renderGauge(\r\n      'Points',\r\n      `${points} 🎫`,\r\n      'points-fill',\r\n      Math.min(100, points)\r\n    );\r\n\r\n    const coinsGauge = renderGauge(\r\n      'Pièces',\r\n      `${coins} 🪙`,\r\n      'coins-fill',\r\n      Math.min(100, coins * 2)\r\n    );\r\n\r\n    return `\r\n      <div class=\"gauges-container\">\r\n        ${progressGauge}\r\n        ${pointsGauge}\r\n        ${coinsGauge}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Abstract methods to be implemented by subclasses\r\n  shouldUpdate(oldHass, newHass) {\r\n    throw new Error('shouldUpdate must be implemented by subclass');\r\n  }\r\n\r\n  render() {\r\n    throw new Error('render must be implemented by subclass');\r\n  }\r\n\r\n  handleAction(action, id, event) {\r\n    throw new Error('handleAction must be implemented by subclass');\r\n  }\r\n\r\n  // Common data access methods (to be overridden)\r\n  getChildren() {\r\n    return [];\r\n  }\r\n\r\n  getTasks() {\r\n    return [];\r\n  }\r\n\r\n  getRewards() {\r\n    return [];\r\n  }\r\n\r\n  getDynamicIcons() {\r\n    return {};\r\n  }\r\n\r\n  getRewardIcons() {\r\n    return {};\r\n  }\r\n}\r\n\r\n// ES6 export\r\nexport { KidsTasksBaseCard };","// Kids Tasks Main Dashboard Card - Optimized CSS Version\r\n\r\nimport { KidsTasksBaseCard } from './base-card.js';\r\nimport { KidsTasksUtils } from './utils.js';\r\n\r\nclass KidsTasksCardOptimized extends KidsTasksBaseCard {\r\n  constructor() {\r\n    super();\r\n    this.currentView = 'dashboard';\r\n  }\r\n\r\n  setConfig(config) {\r\n    this.config = { \r\n      title: 'Kids Tasks Manager',\r\n      show_navigation: true,\r\n      show_completed: false,\r\n      show_rewards: true,\r\n      mode: 'dashboard',\r\n      ...config \r\n    };\r\n  }\r\n\r\n  shouldUpdate(oldHass, newHass) {\r\n    if (!oldHass) return true;\r\n    \r\n    // Quick check: compare entity counts for kids tasks\r\n    const oldTaskEntities = Object.keys(oldHass.states).filter(id => id.startsWith('sensor.kidtasks_'));\r\n    const newTaskEntities = Object.keys(newHass.states).filter(id => id.startsWith('sensor.kidtasks_'));\r\n    \r\n    return oldTaskEntities.length !== newTaskEntities.length;\r\n  }\r\n\r\n  render() {\r\n    if (!this._hass) {\r\n      this.shadowRoot.innerHTML = '<div class=\"kt-loading\">Chargement...</div>';\r\n      return;\r\n    }\r\n\r\n    const children = this.getChildren();\r\n\r\n    this.shadowRoot.innerHTML = `\r\n      ${this.getOptimizedStyles()}\r\n      <div class=\"card-content kids-tasks-scope\">\r\n        <div class=\"card-header kt-p-lg\">\r\n          <h2 class=\"card-title\">${this.config.title}</h2>\r\n          ${this.config.show_navigation ? this.renderNavigation() : ''}\r\n        </div>\r\n\r\n        <div class=\"main-content kt-p-lg\">\r\n          ${this.renderCurrentView(children)}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  getCustomCSSVariables() {\r\n    // Extract colors from config like in original\r\n    const tabColor = this.config?.tab_color || 'var(--kt-primary)';\r\n    const headerColor = this.config?.header_color || 'var(--kt-primary)';\r\n    const dashboardPrimary = this.config?.dashboard_primary_color || 'var(--kt-primary)';\r\n    const dashboardSecondary = this.config?.dashboard_secondary_color || 'var(--kt-secondary)';\r\n    const childGradientStart = this.config?.child_gradient_start || '#4CAF50';\r\n    const childGradientEnd = this.config?.child_gradient_end || '#8BC34A';\r\n    const childBorderColor = this.config?.child_border_color || '#2E7D32';\r\n    const childTextColor = this.config?.child_text_color || '#ffffff';\r\n    const buttonHoverColor = this.config?.button_hover_color || '#1565C0';\r\n    const progressBarColor = this.config?.progress_bar_color || 'var(--kt-success)';\r\n    const pointsBadgeColor = this.config?.points_badge_color || 'var(--kt-warning)';\r\n    const iconColor = this.config?.icon_color || '#757575';\r\n\r\n    return `\r\n      /* Configurable colors from config */\r\n      :host {\r\n        --custom-tab-color: ${tabColor};\r\n        --custom-header-color: ${headerColor};\r\n        --custom-dashboard-primary: ${dashboardPrimary};\r\n        --custom-dashboard-secondary: ${dashboardSecondary};\r\n        --custom-child-gradient-start: ${childGradientStart};\r\n        --custom-child-gradient-end: ${childGradientEnd};\r\n        --custom-child-border-color: ${childBorderColor};\r\n        --custom-child-text-color: ${childTextColor};\r\n        --custom-button-hover-color: ${buttonHoverColor};\r\n        --custom-progress-bar-color: ${progressBarColor};\r\n        --custom-points-badge-color: ${pointsBadgeColor};\r\n        --custom-icon-color: ${iconColor};\r\n      }\r\n    `;\r\n  }\r\n\r\n  getOptimizedStyles() {\r\n    return `\r\n      <style>\r\n        ${this.getCustomCSSVariables()}\r\n\r\n        :host {\r\n          display: block;\r\n          background: var(--kt-surface-primary);\r\n          border-radius: var(--kt-radius-lg);\r\n          box-shadow: 0 2px 8px var(--kt-shadow-light);\r\n          overflow: hidden;\r\n        }\r\n\r\n        .card-content {\r\n          min-height: 200px;\r\n        }\r\n\r\n        .card-header {\r\n          border-bottom: 2px solid var(--kt-surface-variant);\r\n          margin-bottom: var(--kt-space-lg);\r\n        }\r\n\r\n        .card-title {\r\n          font-size: var(--kt-font-size-lg);\r\n          font-weight: 700;\r\n          color: var(--primary-text-color);\r\n          margin: 0 0 var(--kt-space-sm) 0;\r\n        }\r\n\r\n        /* Navigation tabs like original */\r\n        .navigation {\r\n          display: flex;\r\n          background: var(--card-background-color, #fff);\r\n          border-bottom: 1px solid var(--divider-color, #e0e0e0);\r\n        }\r\n\r\n        .nav-button {\r\n          flex: 1;\r\n          padding: var(--kt-space-md);\r\n          border: none;\r\n          background: transparent;\r\n          color: var(--secondary-text-color, #757575);\r\n          font-weight: 600;\r\n          font-size: 0.9em;\r\n          cursor: pointer;\r\n          transition: all 0.3s;\r\n          border-bottom: 3px solid transparent;\r\n        }\r\n\r\n        .nav-button:hover {\r\n          background: rgba(0,0,0,0.05);\r\n          color: var(--primary-text-color, #212121);\r\n        }\r\n\r\n        .nav-button.active {\r\n          color: var(--custom-tab-color, var(--kt-primary));\r\n          border-bottom-color: var(--custom-tab-color, var(--kt-primary));\r\n          background: rgba(107, 115, 255, 0.05);\r\n          position: relative;\r\n        }\r\n\r\n        .nav-button.active::before {\r\n          content: '';\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: var(--custom-tab-color, var(--kt-primary));\r\n          opacity: 0.1;\r\n          z-index: -1;\r\n        }\r\n\r\n        /* Grid system using CSS custom properties */\r\n        .children-grid {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));\r\n          gap: var(--kt-space-lg);\r\n        }\r\n\r\n        /* Colorful child cards like original design */\r\n        .child-card-colorful {\r\n          background: linear-gradient(135deg, var(--custom-child-gradient-start, #4CAF50) 0%, var(--custom-child-gradient-end, #8BC34A) 100%);\r\n          color: var(--custom-child-text-color, white);\r\n          border: 2px solid var(--custom-child-border-color, #2E7D32);\r\n          border-radius: var(--kt-radius-lg);\r\n          padding: var(--kt-space-sm);\r\n          transition: all var(--kt-transition-fast);\r\n          cursor: pointer;\r\n          position: relative;\r\n          overflow: hidden;\r\n          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\r\n          min-height: 110px;\r\n          display: flex;\r\n          flex-direction: row;\r\n          justify-content: flex-start;\r\n        }\r\n\r\n        .child-card-colorful:hover {\r\n          transform: translateY(-4px);\r\n          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .child-name-header {\r\n          font-size: 1.8em;\r\n          font-weight: 700;\r\n          margin-bottom: 12px;\r\n          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\r\n          text-align: left;\r\n          line-height: 1.2;\r\n          opacity: 1;\r\n          color: var(--custom-child-text-color, var(--primary-text-color));\r\n        }\r\n\r\n        .child-content-horizontal {\r\n          display: flex;\r\n          align-items: flex-start;\r\n          gap: 20px;\r\n          width: 100%;\r\n        }\r\n        .child-avatar {\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center; \r\n        }\r\n        .child-avatar-section {\r\n          position: relative;\r\n          flex-shrink: 0;\r\n        }\r\n\r\n        .child-avatar-colorful {\r\n          font-size: 3em;\r\n          display: flex;\r\n          flex-direction: row;\r\n          align-items: center;\r\n          justify-content: center;\r\n          border-radius: var(--kt-radius-round);\r\n          background: var(--kt-avatar-background);\r\n          border: 2px solid var(--kt-cosmetic-background);\r\n          transition: all var(--kt-transition-fast);\r\n        }\r\n\r\n        .child-avatar-colorful img {\r\n          width: 2em;\r\n          height: 2em;\r\n          border-radius: var(--kt-radius-round) !important;\r\n          object-fit: cover !important;\r\n          border: 2px solid var(--kt-cosmetic-background, rgba(255, 255, 255, 0.2));\r\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .child-level-badge {\r\n          position: absolute;\r\n          bottom: -16px;\r\n          left: 8px;\r\n          border-radius: var(--kt-radius-md);\r\n          font-size: 0.8em;\r\n          font-weight: 600;\r\n          text-align: center;\r\n          z-index: 2;\r\n          background: var(--custom-points-badge-color, var(--primary-color, #3f51b5));\r\n          backdrop-filter: blur(10px);\r\n          padding: var(--kt-space-xs) 8px;\r\n          min-width: 60px;\r\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n        }\r\n\r\n        .child-stats-colorful {\r\n          display: flex;\r\n          justify-content: space-around;\r\n          margin: var(--kt-space-lg) 0;\r\n        }\r\n\r\n        .stat-item {\r\n          text-align: center;\r\n          background: rgba(255, 255, 255, 0.15);\r\n          padding: var(--kt-space-sm);\r\n          border-radius: var(--kt-radius-md);\r\n          backdrop-filter: blur(10px);\r\n          border: 1px solid rgba(255, 255, 255, 0.2);\r\n          min-width: 80px;\r\n        }\r\n\r\n        .stat-value {\r\n          font-size: 1.5em;\r\n          font-weight: 700;\r\n          line-height: 1;\r\n          margin-bottom: 2px;\r\n        }\r\n\r\n        .stat-label {\r\n          font-size: 0.7em;\r\n          opacity: 0.9;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n        }\r\n\r\n        /* Jauges et barres de progression comme l'original */\r\n        .gauges-section {\r\n          flex: 1;\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 6px;\r\n          min-height: 60px;\r\n          justify-content: flex-start;\r\n          padding-left: 4px;\r\n          padding-top: 0px;\r\n        }\r\n\r\n        .gauge {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 3px;\r\n        }\r\n\r\n        .gauge-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n        }\r\n\r\n        .gauge-label {\r\n          font-size: 0.65em;\r\n          opacity: 0.9;\r\n          font-weight: 500;\r\n        }\r\n\r\n        .gauge-text {\r\n          font-size: 0.65em;\r\n          font-weight: bold;\r\n          opacity: 0.95;\r\n        }\r\n\r\n        .gauge-bar {\r\n          height: 8px;\r\n          background: rgba(255, 255, 255, 0.25);\r\n          border-radius: 4px;\r\n          overflow: hidden;\r\n          position: relative;\r\n          box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\r\n        }\r\n\r\n        .gauge-fill {\r\n          height: 100%;\r\n          border-radius: var(--kt-space-xs);\r\n          transition: width 0.6s ease;\r\n        }\r\n\r\n        .gauge-fill.total-points {\r\n          background: linear-gradient(90deg, #ffd700, #ffed4a);\r\n        }\r\n\r\n        .gauge-fill.level-progress {\r\n          background: linear-gradient(90deg, #4facfe, #00f2fe);\r\n        }\r\n\r\n        .gauge-fill.tasks-progress {\r\n          background: linear-gradient(90deg, #43e97b, #38f9d7);\r\n        }\r\n\r\n        .gauge-fill.coins-progress {\r\n          background: linear-gradient(90deg, var(--kt-coins-color, #9C27B0), #E1BEE7);\r\n        }\r\n\r\n        .child-progress-colorful {\r\n          background: rgba(255, 255, 255, 0.15);\r\n          padding: var(--kt-space-md);\r\n          border-radius: var(--kt-radius-md);\r\n          backdrop-filter: blur(10px);\r\n          border: 1px solid rgba(255, 255, 255, 0.2);\r\n        }\r\n\r\n        .progress-label {\r\n          font-size: 0.8em;\r\n          opacity: 0.9;\r\n          text-transform: uppercase;\r\n          letter-spacing: 0.5px;\r\n          margin-bottom: 4px;\r\n        }\r\n\r\n        .progress-value {\r\n          font-size: 1.1em;\r\n          font-weight: 600;\r\n          margin-bottom: var(--kt-space-xs);\r\n        }\r\n\r\n        .progress-bar-colorful {\r\n          height: 8px;\r\n          background: rgba(255, 255, 255, 0.2);\r\n          border-radius: var(--kt-radius-sm);\r\n          overflow: hidden;\r\n        }\r\n\r\n        .progress-fill-colorful {\r\n          height: 100%;\r\n          background: rgba(255, 255, 255, 0.8);\r\n          transition: width var(--kt-transition-medium);\r\n          border-radius: var(--kt-radius-sm);\r\n        }\r\n\r\n        /* Legacy support */\r\n        .child-card {\r\n          background: var(--kt-surface-variant);\r\n          border-radius: var(--kt-radius-md);\r\n          padding: var(--kt-space-lg);\r\n          transition: all var(--kt-transition-fast);\r\n          cursor: pointer;\r\n        }\r\n\r\n        .child-card:hover {\r\n          transform: translateY(-2px);\r\n          box-shadow: 0 4px 12px var(--kt-shadow-medium);\r\n        }\r\n\r\n        .child-header {\r\n          text-align: center;\r\n          margin-bottom: var(--kt-space-md);\r\n        }\r\n\r\n        .child-avatar {\r\n          font-size: 1.2em;\r\n          margin-bottom: var(--kt-space-sm);\r\n        }\r\n\r\n        .child-name {\r\n          font-size: 1.2em;\r\n          font-weight: 600;\r\n          color: var(--primary-text-color);\r\n          margin-bottom: var(--kt-space-xs);\r\n        }\r\n\r\n        .child-stats {\r\n          display: flex;\r\n          gap: var(--kt-space-sm);\r\n          justify-content: center;\r\n          flex-wrap: wrap;\r\n          margin-bottom: var(--kt-space-md);\r\n        }\r\n\r\n        .child-progress {\r\n          font-size: 0.9em;\r\n          color: var(--secondary-text-color);\r\n          text-align: center;\r\n          margin-bottom: var(--kt-space-md);\r\n        }\r\n\r\n        .progress-bar {\r\n          height: 4px;\r\n          background: var(--kt-gauge-bg);\r\n          border-radius: var(--kt-radius-sm);\r\n          overflow: hidden;\r\n          margin-top: var(--kt-space-xs);\r\n        }\r\n\r\n        .progress-fill {\r\n          height: 100%;\r\n          background: var(--kt-gauge-success);\r\n          transition: width var(--kt-transition-medium);\r\n        }\r\n\r\n        .summary-stats {\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n          gap: var(--kt-space-md);\r\n          margin-bottom: var(--kt-space-lg);\r\n        }\r\n\r\n        .summary-card {\r\n          background: var(--kt-surface-variant);\r\n          padding: var(--kt-space-lg);\r\n          border-radius: var(--kt-radius-md);\r\n          text-align: center;\r\n        }\r\n\r\n        .summary-number {\r\n          font-size: 2em;\r\n          font-weight: 700;\r\n          color: var(--kt-primary);\r\n          margin-bottom: var(--kt-space-xs);\r\n        }\r\n\r\n        .summary-label {\r\n          font-size: 0.9em;\r\n          color: var(--secondary-text-color);\r\n          font-weight: 600;\r\n        }\r\n\r\n        /* Enhanced responsive optimizations */\r\n        @media (max-width: 1200px) {\r\n          .children-grid {\r\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n            gap: var(--kt-space-md);\r\n          }\r\n        }\r\n\r\n        @media (max-width: 768px) {\r\n          .children-grid {\r\n            grid-template-columns: 1fr;\r\n            gap: var(--kt-space-md);\r\n          }\r\n          \r\n          .navigation {\r\n            justify-content: center;\r\n            gap: var(--kt-space-xs);\r\n          }\r\n\r\n          .nav-button {\r\n            padding: var(--kt-space-xs);\r\n            font-size: 0.8em;\r\n          }\r\n\r\n          .summary-stats {\r\n            grid-template-columns: repeat(2, 1fr);\r\n            gap: var(--kt-space-sm);\r\n          }\r\n\r\n          .card-header {\r\n            padding: var(--kt-space-md);\r\n          }\r\n\r\n          .main-content {\r\n            padding: var(--kt-space-md);\r\n          }\r\n        }\r\n\r\n        @media (max-width: 480px) {\r\n          .child-stats {\r\n            flex-direction: column;\r\n            align-items: center;\r\n            gap: var(--kt-space-xs);\r\n          }\r\n\r\n          .summary-stats {\r\n            grid-template-columns: 1fr;\r\n          }\r\n\r\n          .card-content {\r\n            padding: var(--kt-space-sm);\r\n          }\r\n\r\n          .card-title {\r\n            font-size: var(--kt-font-size-md);\r\n            text-align: center;\r\n          }\r\n\r\n          .navigation {\r\n            flex-direction: column;\r\n            align-items: center;\r\n          }\r\n\r\n          .nav-button {\r\n            width: 100%;\r\n            max-width: 200px;\r\n            text-align: center;\r\n          }\r\n        }\r\n\r\n        @media (max-width: 320px) {\r\n          .card-content {\r\n            padding: var(--kt-space-xs);\r\n          }\r\n\r\n          .child-card {\r\n            padding: var(--kt-space-md);\r\n          }\r\n\r\n          .summary-card {\r\n            padding: var(--kt-space-md);\r\n          }\r\n        }\r\n      </style>\r\n    `;\r\n  }\r\n\r\n  renderNavigation() {\r\n    const views = [\r\n      { id: 'dashboard', label: '🏠 Tableau de bord' },\r\n      { id: 'summary', label: '📊 Résumé' },\r\n      { id: 'management', label: '⚙️ Gestion' }\r\n    ];\r\n\r\n    return `\r\n      <div class=\"navigation\">\r\n        ${views.map(view => `\r\n          <button \r\n            class=\"nav-button ${this.currentView === view.id ? 'active' : ''}\"\r\n            data-action=\"switch-view\"\r\n            data-id=\"${view.id}\"\r\n          >\r\n            ${view.label}\r\n          </button>\r\n        `).join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderCurrentView(children) {\r\n    switch (this.currentView) {\r\n      case 'dashboard':\r\n        return this.renderDashboard(children);\r\n      case 'summary':\r\n        return this.renderSummary(children);\r\n      case 'management':\r\n        return this.renderManagement(children);\r\n      default:\r\n        return this.renderDashboard(children);\r\n    }\r\n  }\r\n\r\n  renderDashboard(children) {\r\n    if (children.length === 0) {\r\n      return `\r\n        <div class=\"kt-empty\">\r\n          <div class=\"kt-empty__icon\">👨‍👩‍👧‍👦</div>\r\n          <div class=\"kt-empty__text\">Aucun enfant configuré</div>\r\n          <div class=\"kt-empty__subtext\">Configurez des enfants dans l'intégration Kids Tasks Manager.</div>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    return `\r\n      <div class=\"children-grid kt-fade-in\">\r\n        ${children.map(child => this.renderChildCard(child)).join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderSummary(children) {\r\n    const stats = this.calculateGlobalStats(children);\r\n    \r\n    return `\r\n      <div class=\"summary-stats kt-fade-in\">\r\n        <div class=\"summary-card\">\r\n          <div class=\"summary-number\">${children.length}</div>\r\n          <div class=\"summary-label\">Enfants</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n          <div class=\"summary-number\">${stats.totalTasks}</div>\r\n          <div class=\"summary-label\">Tâches actives</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n          <div class=\"summary-number\">${stats.completedToday}</div>\r\n          <div class=\"summary-label\">Terminées aujourd'hui</div>\r\n        </div>\r\n        <div class=\"summary-card\">\r\n          <div class=\"summary-number\">${stats.totalPoints}</div>\r\n          <div class=\"summary-label\">Points totaux</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"children-grid\">\r\n        ${children.map(child => this.renderChildSummary(child)).join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderManagement(children) {\r\n    return `\r\n      <div class=\"management-content\">\r\n        <div class=\"kt-empty\">\r\n          <div class=\"kt-empty__icon\">🚧</div>\r\n          <div class=\"kt-empty__text\">Gestion avancée</div>\r\n          <div class=\"kt-empty__subtext\">Fonctionnalités de gestion en cours de développement.</div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderChildCard(child) {\r\n    const stats = this.getChildStats(child);\r\n\r\n    // Créer les stats pour les gauges comme dans l'original\r\n    const gaugeStats = {\r\n      totalPoints: child.points || 0,\r\n      level: child.level || 1,\r\n      pointsInCurrentLevel: (child.points || 0) % 100,\r\n      pointsToNextLevel: 100,\r\n      completedToday: stats.completedToday,\r\n      totalToday: stats.totalToday,\r\n      coins: child.coins || 0\r\n    };\r\n\r\n    // Use configurable gradient from config like in original\r\n    return `\r\n      <div class=\"child-card-colorful kt-clickable\"\r\n           data-action=\"view-child\"\r\n           data-id=\"${child.id}\">\r\n        <div class=\"child-avatar\">\r\n          <div class=\"child-name-header\">${child.name}</div>\r\n          <div class=\"child-avatar-section\">\r\n            <div class=\"child-avatar-colorful\">\r\n              ${this.getAvatar(child)}\r\n            </div>\r\n            <div class=\"child-level-badge\">Niveau ${child.level || 1}</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"child-content-horizontal\">\r\n\r\n          <div class=\"gauges-section\">\r\n            ${this.renderGauges(gaugeStats, true)}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Méthode pour récupérer l'avatar (emoji ou image)\r\n  getAvatar(child) {\r\n    if (!child) return '👤';\r\n\r\n    const avatarType = child.avatar_type || 'emoji';\r\n\r\n    if (avatarType === 'emoji') {\r\n      return child.avatar || '👤';\r\n    } else if (avatarType === 'url' && child.avatar_data) {\r\n      return `<img src=\"${child.avatar_data}\" alt=\"${child.name || 'Enfant'}\">`;\r\n    } else if (avatarType === 'person_entity' && child.person_entity_id && this._hass) {\r\n      const personEntity = this._hass.states[child.person_entity_id];\r\n      if (personEntity && personEntity.attributes && personEntity.attributes.entity_picture) {\r\n        return `<img src=\"${personEntity.attributes.entity_picture}\" alt=\"${child.name || 'Enfant'}\">`;\r\n      }\r\n    }\r\n\r\n    return child.avatar || '👤';\r\n  }\r\n\r\n  // Méthode renderGauges comme dans l'original\r\n  renderGauges(stats, includeCoins = false) {\r\n    if (!stats) return '';\r\n\r\n    const renderGauge = (label, text, fillClass, width) => {\r\n      return `\r\n        <div class=\"gauge\">\r\n          <div class=\"gauge-header\">\r\n            <div class=\"gauge-label\">${label}</div>\r\n            <div class=\"gauge-text\">${text}</div>\r\n          </div>\r\n          <div class=\"gauge-bar\">\r\n            <div class=\"gauge-fill ${fillClass}\" style=\"width: ${width}%\"></div>\r\n          </div>\r\n        </div>\r\n      `;\r\n    };\r\n\r\n    let gaugesHtml = renderGauge(\r\n      'Points totaux',\r\n      stats.totalPoints,\r\n      'total-points',\r\n      Math.min((stats.totalPoints / 500) * 100, 100)\r\n    );\r\n\r\n    gaugesHtml += renderGauge(\r\n      `Niveau ${stats.level}`,\r\n      `${stats.pointsInCurrentLevel}/${stats.pointsToNextLevel}`,\r\n      'level-progress',\r\n      (stats.pointsInCurrentLevel / stats.pointsToNextLevel) * 100\r\n    );\r\n\r\n    gaugesHtml += renderGauge(\r\n      'Tâches',\r\n      `${stats.completedToday}/${stats.totalToday}`,\r\n      'tasks-progress',\r\n      stats.totalToday > 0 ? (stats.completedToday / stats.totalToday) * 100 : 0\r\n    );\r\n\r\n    if (includeCoins && stats.coins !== undefined) {\r\n      gaugesHtml += renderGauge(\r\n        '🪙',\r\n        stats.coins,\r\n        'coins-progress',\r\n        Math.min(stats.coins, 100)\r\n      );\r\n    }\r\n\r\n    return gaugesHtml;\r\n  }\r\n\r\n  renderChildSummary(child) {\r\n    const stats = this.getChildStats(child);\r\n    \r\n    return `\r\n      <div class=\"child-card\">\r\n        <div class=\"child-header\">\r\n          <div class=\"child-avatar\">${child.avatar || '👤'}</div>\r\n          <div class=\"child-name\">${child.name}</div>\r\n        </div>\r\n        \r\n        <div class=\"kt-flex kt-gap-md\">\r\n          <div class=\"summary-card\">\r\n            <div class=\"summary-number\">${stats.completedToday}</div>\r\n            <div class=\"summary-label\">Tâches terminées</div>\r\n          </div>\r\n          <div class=\"summary-card\">\r\n            <div class=\"summary-number\">${child.points || 0}</div>\r\n            <div class=\"summary-label\">Points</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  handleAction(action, id, event) {\r\n    switch (action) {\r\n      case 'switch-view':\r\n        this.currentView = id;\r\n        this.render();\r\n        break;\r\n      case 'view-child':\r\n        this.handleViewChild(id);\r\n        break;\r\n      default:\r\n        if (__DEV__) {\r\n          console.warn('Unknown action:', action);\r\n        }\r\n    }\r\n  }\r\n\r\n  handleViewChild(childId) {\r\n    console.info('View child details:', childId);\r\n    \r\n    const event = new CustomEvent('kids-tasks-view-child', {\r\n      detail: { childId },\r\n      bubbles: true\r\n    });\r\n    this.dispatchEvent(event);\r\n  }\r\n\r\n  // Data methods (same as before)\r\n  getChildren() {\r\n    if (!this._hass) return [];\r\n    \r\n    const children = [];\r\n    Object.keys(this._hass.states).forEach(entityId => {\r\n      if (entityId.startsWith('sensor.kidtasks_') && entityId.endsWith('_points')) {\r\n        const entity = this._hass.states[entityId];\r\n        if (entity && entity.state !== 'unavailable') {\r\n          const childId = entityId.replace('sensor.kidtasks_', '').replace('_points', '');\r\n          children.push({\r\n            id: childId,\r\n            name: entity.attributes.friendly_name || childId,\r\n            points: parseInt(entity.state) || 0,\r\n            coins: entity.attributes.coins || 0,\r\n            level: entity.attributes.level || 1,\r\n            avatar: entity.attributes.avatar || entity.attributes.cosmetics?.avatar?.emoji || '👤',\r\n            ...entity.attributes\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n    return children.sort((a, b) => a.name.localeCompare(b.name));\r\n  }\r\n\r\n  getChildStats(child) {\r\n    const tasks = this.getChildTasks(child.id);\r\n    const today = new Date().toDateString();\r\n    \r\n    const completedToday = tasks.filter(t => \r\n      (t.status === 'completed' || t.status === 'validated') && \r\n      t.completed_at && new Date(t.completed_at).toDateString() === today\r\n    ).length;\r\n    \r\n    const totalToday = tasks.filter(t => t.status === 'todo').length;\r\n    \r\n    return {\r\n      completedToday,\r\n      totalToday,\r\n      totalTasks: tasks.length\r\n    };\r\n  }\r\n\r\n  getChildTasks(childId) {\r\n    if (!this._hass) return [];\r\n    \r\n    const taskEntities = Object.keys(this._hass.states)\r\n      .filter(id => id.startsWith('sensor.kidtasks_task_'))\r\n      .map(id => this._hass.states[id])\r\n      .filter(entity => entity.attributes && \r\n                      entity.attributes.assigned_children && \r\n                      entity.attributes.assigned_children.includes(childId));\r\n    \r\n    return taskEntities.map(entity => ({\r\n      id: entity.entity_id.replace('sensor.kidtasks_task_', ''),\r\n      name: entity.attributes.friendly_name || 'Tâche',\r\n      status: entity.state,\r\n      completed_at: entity.attributes.completed_at,\r\n      ...entity.attributes\r\n    }));\r\n  }\r\n\r\n  calculateGlobalStats(children) {\r\n    let totalTasks = 0;\r\n    let completedToday = 0;\r\n    let totalPoints = 0;\r\n    \r\n    children.forEach(child => {\r\n      const stats = this.getChildStats(child);\r\n      totalTasks += stats.totalToday;\r\n      completedToday += stats.completedToday;\r\n      totalPoints += child.points || 0;\r\n    });\r\n    \r\n    return {\r\n      totalTasks,\r\n      completedToday,\r\n      totalPoints\r\n    };\r\n  }\r\n\r\n  static getConfigElement() {\r\n    return document.createElement('kids-tasks-card-editor');\r\n  }\r\n\r\n  static getStubConfig() {\r\n    return {\r\n      type: 'custom:kids-tasks-card',\r\n      title: 'Kids Tasks Manager',\r\n      show_navigation: true,\r\n      show_completed: false,\r\n      show_rewards: true,\r\n      mode: 'dashboard'\r\n    };\r\n  }\r\n}\r\n\r\nexport { KidsTasksCardOptimized as KidsTasksCard };","// Kids Tasks Child Card - Individual child view component\r\n\r\nimport { KidsTasksBaseCard } from './base-card.js';\r\nimport { KidsTasksUtils } from './utils.js';\r\n\r\nclass KidsTasksChildCard extends KidsTasksBaseCard {\r\n  constructor() {\r\n    super();\r\n    this._refreshInterval = null;\r\n    this._refreshTimeout = null;\r\n    this._allTimers = new Set(); // Track all timers for cleanup\r\n    this.currentTab = 'tasks';\r\n    this.tasksFilter = 'active';\r\n    this.rewardsFilter = 'all';\r\n    this._lastDataHash = null;\r\n    this._isVisible = true;\r\n    this._refreshRate = 30000; // Increased to 30 seconds for better performance\r\n  }\r\n\r\n  connectedCallback() {\r\n    // Set up smart auto-refresh with visibility detection\r\n    this._setupSmartRefresh();\r\n    \r\n    // Track page visibility to pause refreshing when not visible\r\n    this._setupVisibilityDetection();\r\n    \r\n    // Clean up any existing timers first\r\n    this._cleanupTimers();\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this._cleanupTimers();\r\n    this._removeVisibilityDetection();\r\n  }\r\n\r\n  // Smart refresh that only updates when data actually changes\r\n  _setupSmartRefresh() {\r\n    const smartRefresh = () => {\r\n      if (!this._hass || !this._initialized || !this._isVisible) {\r\n        this._scheduleNextRefresh();\r\n        return;\r\n      }\r\n\r\n      // Check if data has actually changed\r\n      const currentDataHash = this._getDataHash();\r\n      if (currentDataHash === this._lastDataHash) {\r\n        this._scheduleNextRefresh();\r\n        return;\r\n      }\r\n\r\n      // Data changed, perform refresh\r\n      this._lastDataHash = currentDataHash;\r\n      this.smartRender();\r\n      this._scheduleNextRefresh();\r\n    };\r\n\r\n    // Initial refresh\r\n    if (this._hass && this._initialized) {\r\n      smartRefresh();\r\n    }\r\n  }\r\n\r\n  // Schedule next refresh with exponential backoff for inactive periods\r\n  _scheduleNextRefresh() {\r\n    this._cleanupRefreshTimers();\r\n    \r\n    const refreshRate = this._isVisible ? this._refreshRate : this._refreshRate * 2;\r\n    \r\n    this._refreshTimeout = setTimeout(() => {\r\n      this._setupSmartRefresh();\r\n    }, refreshRate);\r\n    \r\n    this._allTimers.add(this._refreshTimeout);\r\n  }\r\n\r\n  // Generate hash of relevant data to detect changes\r\n  _getDataHash() {\r\n    if (!this._hass || !this.config?.child_id) return null;\r\n    \r\n    const child = this.getChild();\r\n    const tasks = this.getChildTasks(this.config.child_id);\r\n    const rewards = this.getChildRewards(this.config.child_id);\r\n    \r\n    // Create simple hash of key data points\r\n    const dataString = JSON.stringify({\r\n      childPoints: child?.points || 0,\r\n      childCoins: child?.coins || 0,\r\n      childLevel: child?.level || 1,\r\n      taskCount: tasks.length,\r\n      taskStates: tasks.map(t => `${t.id}:${t.status}`).join(','),\r\n      rewardCount: rewards.length\r\n    });\r\n    \r\n    // Simple hash function\r\n    let hash = 0;\r\n    for (let i = 0; i < dataString.length; i++) {\r\n      const char = dataString.charCodeAt(i);\r\n      hash = ((hash << 5) - hash) + char;\r\n      hash = hash & hash; // Convert to 32-bit integer\r\n    }\r\n    \r\n    return hash.toString();\r\n  }\r\n\r\n  // Set up page visibility detection\r\n  _setupVisibilityDetection() {\r\n    this._visibilityChangeHandler = () => {\r\n      this._isVisible = !document.hidden;\r\n      \r\n      if (this._isVisible) {\r\n        // Page became visible, refresh immediately\r\n        this._setupSmartRefresh();\r\n      } else {\r\n        // Page hidden, clean up active refresh\r\n        this._cleanupRefreshTimers();\r\n      }\r\n    };\r\n    \r\n    document.addEventListener('visibilitychange', this._visibilityChangeHandler);\r\n    this._isVisible = !document.hidden;\r\n  }\r\n\r\n  // Remove visibility detection\r\n  _removeVisibilityDetection() {\r\n    if (this._visibilityChangeHandler) {\r\n      document.removeEventListener('visibilitychange', this._visibilityChangeHandler);\r\n      this._visibilityChangeHandler = null;\r\n    }\r\n  }\r\n\r\n  // Clean up refresh timers specifically\r\n  _cleanupRefreshTimers() {\r\n    if (this._refreshInterval) {\r\n      clearInterval(this._refreshInterval);\r\n      this._refreshInterval = null;\r\n    }\r\n    \r\n    if (this._refreshTimeout) {\r\n      clearTimeout(this._refreshTimeout);\r\n      this._allTimers.delete(this._refreshTimeout);\r\n      this._refreshTimeout = null;\r\n    }\r\n  }\r\n\r\n  // Clean up all timers and intervals\r\n  _cleanupTimers() {\r\n    this._cleanupRefreshTimers();\r\n    \r\n    // Clean up any tracked timers\r\n    for (const timer of this._allTimers) {\r\n      clearTimeout(timer);\r\n      clearInterval(timer);\r\n    }\r\n    this._allTimers.clear();\r\n    \r\n    // Performance monitoring cleanup\r\n    if (performanceMonitor) {\r\n      performanceMonitor.trackEventHandler('timers', this.constructor.name, 'remove');\r\n    }\r\n  }\r\n\r\n  // Override base card cleanup\r\n  _cleanupTouchInteractions() {\r\n    super._cleanupTouchInteractions();\r\n    this._cleanupTimers();\r\n  }\r\n\r\n  setConfig(config) {\r\n    if (!config || !config.child_id) {\r\n      throw new Error('Invalid configuration: child_id required');\r\n    }\r\n    \r\n    this.config = {\r\n      child_id: config.child_id,\r\n      title: config.title || 'Mes Tâches',\r\n      show_avatar: config.show_avatar !== false,\r\n      show_progress: config.show_progress !== false,\r\n      show_rewards: config.show_rewards !== false,\r\n      show_completed: config.show_completed !== false,\r\n      ...config\r\n    };\r\n    \r\n    if (this._initialized && this._hass) {\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  shouldUpdate(oldHass, newHass) {\r\n    if (!oldHass) return true;\r\n    \r\n    // Check if child data changed\r\n    const childId = this.config.child_id;\r\n    const oldChild = this.getChildFromHass(oldHass, childId);\r\n    const newChild = this.getChildFromHass(newHass, childId);\r\n    \r\n    if (JSON.stringify(oldChild) !== JSON.stringify(newChild)) {\r\n      return true;\r\n    }\r\n    \r\n    // Check tasks and rewards\r\n    const taskEntities = Object.keys(newHass.states).filter(id => id.startsWith('sensor.kidtasks_task_'));\r\n    const rewardEntities = Object.keys(newHass.states).filter(id => id.startsWith('sensor.kidtasks_reward_'));\r\n    \r\n    for (const entityId of [...taskEntities, ...rewardEntities]) {\r\n      const oldEntity = oldHass.states[entityId];\r\n      const newEntity = newHass.states[entityId];\r\n      if (!oldEntity || !newEntity || \r\n          oldEntity.state !== newEntity.state || \r\n          JSON.stringify(oldEntity.attributes) !== JSON.stringify(newEntity.attributes)) {\r\n        return true;\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (!this._hass || !this.config) {\r\n      this.shadowRoot.innerHTML = '<div class=\"loading\">Chargement...</div>';\r\n      return;\r\n    }\r\n\r\n    const child = this.getChild();\r\n    if (!child) {\r\n      this.shadowRoot.innerHTML = `\r\n        ${this.getStyles()}\r\n        <div class=\"error\">\r\n          Enfant non trouvé (ID: ${this.config.child_id})\r\n        </div>\r\n      `;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.shadowRoot.innerHTML = `\r\n        ${this.getStyles()}\r\n        <div class=\"child-card-container\">\r\n          ${this.renderHeader(child)}\r\n          ${this.renderTabs()}\r\n          ${this.renderTabContent(child)}\r\n        </div>\r\n      `;\r\n    } catch (error) {\r\n      console.error('Error rendering child card:', error);\r\n      this.shadowRoot.innerHTML = `\r\n        ${this.getStyles()}\r\n        <div class=\"error\">Erreur: ${error.message}</div>\r\n      `;\r\n    }\r\n  }\r\n\r\n  getStyles() {\r\n    return `\r\n      <style>\r\n        :host {\r\n          display: block;\r\n          background: var(--card-background-color, white);\r\n          border-radius: var(--kt-radius-lg);\r\n          overflow: hidden;\r\n          box-shadow: var(--box-shadow, 0 2px 8px rgba(0,0,0,0.1));\r\n        }\r\n\r\n        .child-card-container {\r\n          padding: var(--kt-space-lg);\r\n        }\r\n\r\n        .child-header {\r\n          text-align: center;\r\n          margin-bottom: var(--kt-space-lg);\r\n          padding: var(--kt-space-lg);\r\n          background: var(--kt-surface-variant);\r\n          border-radius: var(--kt-radius-md);\r\n        }\r\n\r\n        .child-avatar {\r\n          font-size: 4em;\r\n          margin-bottom: var(--kt-space-sm);\r\n        }\r\n\r\n        .child-name {\r\n          font-size: 1.5em;\r\n          font-weight: 700;\r\n          color: var(--primary-text-color);\r\n          margin-bottom: var(--kt-space-sm);\r\n        }\r\n\r\n        .child-stats {\r\n          display: flex;\r\n          gap: var(--kt-space-md);\r\n          justify-content: center;\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .stat {\r\n          background: var(--kt-primary);\r\n          color: white;\r\n          padding: var(--kt-space-xs) var(--kt-space-md);\r\n          border-radius: var(--kt-radius-sm);\r\n          font-weight: 600;\r\n          font-size: 0.9em;\r\n        }\r\n\r\n        .tabs {\r\n          display: flex;\r\n          border-bottom: 2px solid var(--kt-surface-variant);\r\n          margin-bottom: var(--kt-space-lg);\r\n          gap: var(--kt-space-sm);\r\n        }\r\n\r\n        .tab-button {\r\n          background: none;\r\n          border: none;\r\n          padding: var(--kt-space-sm) var(--kt-space-md);\r\n          border-radius: var(--kt-radius-sm) var(--kt-radius-sm) 0 0;\r\n          cursor: pointer;\r\n          font-weight: 600;\r\n          transition: all var(--kt-transition-fast);\r\n          color: var(--secondary-text-color);\r\n        }\r\n\r\n        .tab-button.active {\r\n          background: var(--kt-primary);\r\n          color: white;\r\n        }\r\n\r\n        .tab-button:hover {\r\n          background: var(--kt-surface-variant);\r\n        }\r\n\r\n        .tab-button.active:hover {\r\n          background: var(--kt-primary);\r\n          opacity: 0.9;\r\n        }\r\n\r\n        .tab-content {\r\n          min-height: 200px;\r\n        }\r\n\r\n        .task-list, .reward-list {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: var(--kt-space-sm);\r\n        }\r\n\r\n        .task-item, .reward-item {\r\n          background: var(--kt-surface-variant);\r\n          border-radius: var(--kt-radius-md);\r\n          padding: var(--kt-space-md);\r\n          transition: all var(--kt-transition-fast);\r\n          cursor: pointer;\r\n        }\r\n\r\n        .task-item:hover, .reward-item:hover {\r\n          transform: translateY(-1px);\r\n          box-shadow: 0 2px 8px var(--kt-shadow-light);\r\n        }\r\n\r\n        .task-title, .reward-title {\r\n          font-weight: 600;\r\n          margin-bottom: var(--kt-space-xs);\r\n        }\r\n\r\n        .task-description, .reward-description {\r\n          font-size: 0.9em;\r\n          color: var(--secondary-text-color);\r\n          margin-bottom: var(--kt-space-sm);\r\n        }\r\n\r\n        .task-meta, .reward-meta {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          font-size: 0.8em;\r\n        }\r\n\r\n        .task-points, .reward-cost {\r\n          background: var(--kt-success);\r\n          color: white;\r\n          padding: 2px 8px;\r\n          border-radius: var(--kt-radius-sm);\r\n          font-weight: 600;\r\n        }\r\n\r\n        .task-status {\r\n          padding: 2px 8px;\r\n          border-radius: var(--kt-radius-sm);\r\n          font-weight: 600;\r\n          text-transform: uppercase;\r\n          font-size: 0.7em;\r\n        }\r\n\r\n        .task-status.todo { background: var(--kt-warning); color: white; }\r\n        .task-status.completed { background: var(--kt-success); color: white; }\r\n        .task-status.pending { background: var(--kt-info); color: white; }\r\n        .task-status.validated { background: var(--kt-success); color: white; }\r\n\r\n        .filters {\r\n          display: flex;\r\n          gap: var(--kt-space-sm);\r\n          margin-bottom: var(--kt-space-lg);\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        .filter-btn {\r\n          background: var(--kt-surface-variant);\r\n          border: 2px solid transparent;\r\n          padding: var(--kt-space-xs) var(--kt-space-md);\r\n          border-radius: var(--kt-radius-sm);\r\n          cursor: pointer;\r\n          font-weight: 600;\r\n          transition: all var(--kt-transition-fast);\r\n          font-size: 0.85em;\r\n        }\r\n\r\n        .filter-btn.active {\r\n          border-color: var(--kt-primary);\r\n          background: var(--kt-primary);\r\n          color: white;\r\n        }\r\n\r\n        .loading {\r\n          text-align: center;\r\n          padding: var(--kt-space-xl);\r\n          color: var(--secondary-text-color);\r\n        }\r\n\r\n        .error {\r\n          background: var(--kt-error);\r\n          color: white;\r\n          padding: var(--kt-space-md);\r\n          border-radius: var(--kt-radius-md);\r\n          text-align: center;\r\n        }\r\n\r\n        .empty-state {\r\n          text-align: center;\r\n          padding: var(--kt-space-xl);\r\n          color: var(--secondary-text-color);\r\n        }\r\n\r\n        .empty-icon {\r\n          font-size: 3em;\r\n          margin-bottom: var(--kt-space-md);\r\n          opacity: 0.6;\r\n        }\r\n\r\n        /* Progress gauges */\r\n        .progress-section {\r\n          margin-bottom: var(--kt-space-lg);\r\n        }\r\n\r\n        .gauge {\r\n          margin-bottom: var(--kt-space-md);\r\n        }\r\n\r\n        .gauge-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin-bottom: var(--kt-space-xs);\r\n        }\r\n\r\n        .gauge-label {\r\n          font-weight: 600;\r\n          color: var(--primary-text-color);\r\n        }\r\n\r\n        .gauge-value {\r\n          font-weight: 700;\r\n          color: var(--kt-primary);\r\n        }\r\n\r\n        .gauge-bar {\r\n          height: 8px;\r\n          background: var(--kt-surface-variant);\r\n          border-radius: var(--kt-radius-sm);\r\n          overflow: hidden;\r\n        }\r\n\r\n        .gauge-fill {\r\n          height: 100%;\r\n          transition: width var(--kt-transition-medium);\r\n          border-radius: var(--kt-radius-sm);\r\n        }\r\n\r\n        .gauge-fill.tasks-fill {\r\n          background: linear-gradient(90deg, var(--kt-success) 0%, var(--kt-info) 100%);\r\n        }\r\n\r\n        .gauge-fill.points-fill {\r\n          background: var(--kt-success);\r\n        }\r\n\r\n        .gauge-fill.coins-fill {\r\n          background: var(--kt-coins-color);\r\n        }\r\n\r\n        /* Responsive */\r\n        @media (max-width: 768px) {\r\n          .child-card-container {\r\n            padding: var(--kt-space-md);\r\n          }\r\n          \r\n          .tabs {\r\n            flex-wrap: wrap;\r\n          }\r\n          \r\n          .child-stats {\r\n            justify-content: center;\r\n          }\r\n        }\r\n      </style>\r\n    `;\r\n  }\r\n\r\n  renderHeader(child) {\r\n    if (!this.config.show_avatar) return '';\r\n\r\n    const stats = this.getChildStats(child);\r\n    \r\n    return `\r\n      <div class=\"child-header\">\r\n        <div class=\"child-avatar\">${this.getAvatar(child)}</div>\r\n        <div class=\"child-name\">${child.name}</div>\r\n        <div class=\"child-stats\">\r\n          <span class=\"stat\">${child.points || 0} 🎫 Points</span>\r\n          <span class=\"stat\">${child.coins || 0} 🪙 Pièces</span>\r\n          <span class=\"stat\">Niveau ${child.level || 1}</span>\r\n        </div>\r\n        ${this.config.show_progress ? this.renderProgress(stats) : ''}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderProgress(stats) {\r\n    return `\r\n      <div class=\"progress-section\">\r\n        ${this.renderGauges(stats, true, stats.completedToday, stats.totalTasksToday)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderTabs() {\r\n    const tabs = [\r\n      { id: 'tasks', label: '✅ Tâches', show: true },\r\n      { id: 'rewards', label: '🎁 Récompenses', show: this.config.show_rewards },\r\n      { id: 'history', label: '📈 Historique', show: this.config.show_completed }\r\n    ].filter(tab => tab.show);\r\n\r\n    return `\r\n      <div class=\"tabs\">\r\n        ${tabs.map(tab => `\r\n          <button \r\n            class=\"tab-button ${this.currentTab === tab.id ? 'active' : ''}\"\r\n            data-action=\"switch-tab\"\r\n            data-id=\"${tab.id}\"\r\n          >\r\n            ${tab.label}\r\n          </button>\r\n        `).join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderTabContent(child) {\r\n    switch (this.currentTab) {\r\n      case 'tasks':\r\n        return this.renderTasksTab(child);\r\n      case 'rewards':\r\n        return this.renderRewardsTab(child);\r\n      case 'history':\r\n        return this.renderHistoryTab(child);\r\n      default:\r\n        return this.renderTasksTab(child);\r\n    }\r\n  }\r\n\r\n  renderTasksTab(child) {\r\n    const tasks = this.getChildTasks(child.id);\r\n    const filteredTasks = this.filterTasks(tasks);\r\n\r\n    return `\r\n      <div class=\"tab-content\">\r\n        ${this.renderTaskFilters()}\r\n        ${filteredTasks.length > 0 ? `\r\n          <div class=\"task-list\">\r\n            ${filteredTasks.map(task => this.renderTaskItem(task)).join('')}\r\n          </div>\r\n        ` : this.emptySection('📝', 'Aucune tâche', 'Aucune tâche disponible pour ce filtre.')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderTaskFilters() {\r\n    const filters = [\r\n      { id: 'active', label: 'Actives' },\r\n      { id: 'completed', label: 'Terminées' },\r\n      { id: 'all', label: 'Toutes' }\r\n    ];\r\n\r\n    return `\r\n      <div class=\"filters\">\r\n        ${filters.map(filter => `\r\n          <button \r\n            class=\"filter-btn ${this.tasksFilter === filter.id ? 'active' : ''}\"\r\n            data-action=\"filter-tasks\"\r\n            data-filter=\"${filter.id}\"\r\n          >\r\n            ${filter.label}\r\n          </button>\r\n        `).join('')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderTaskItem(task) {\r\n    return `\r\n      <div class=\"task-item kt-clickable-item\" data-action=\"complete-task\" data-id=\"${task.id}\">\r\n        <div class=\"task-title\">${this.getCategoryIcon(task)} ${task.name}</div>\r\n        <div class=\"task-description\">${task.description || ''}</div>\r\n        <div class=\"task-meta\">\r\n          <span class=\"task-points\">+${task.points || 0} 🎫</span>\r\n          <span class=\"task-status ${task.status}\">${task.status}</span>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderRewardsTab(child) {\r\n    const rewards = this.getRewards().filter(r => (r.min_level || 1) <= (child.level || 1));\r\n    const affordableRewards = rewards.filter(r => \r\n      (r.cost <= child.points) && (r.coin_cost <= child.coins)\r\n    );\r\n\r\n    return `\r\n      <div class=\"tab-content\">\r\n        ${affordableRewards.length > 0 ? `\r\n          <div class=\"reward-list\">\r\n            ${affordableRewards.map(reward => this.renderRewardItem(reward, child)).join('')}\r\n          </div>\r\n        ` : this.emptySection('🎁', 'Aucune récompense', 'Aucune récompense disponible pour le moment.')}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderRewardItem(reward, child) {\r\n    const canAfford = (reward.cost <= child.points) && (reward.coin_cost <= child.coins);\r\n    \r\n    return `\r\n      <div class=\"reward-item kt-clickable-item ${canAfford ? '' : 'disabled'}\" \r\n           data-action=\"claim-reward\" \r\n           data-id=\"${reward.id}\">\r\n        <div class=\"reward-title\">${this.getCategoryIcon(reward)} ${reward.name}</div>\r\n        <div class=\"reward-description\">${reward.description || ''}</div>\r\n        <div class=\"reward-meta\">\r\n          <span class=\"reward-cost\">\r\n            ${reward.cost > 0 ? `${reward.cost} 🎫` : ''}\r\n            ${reward.coin_cost > 0 ? ` ${reward.coin_cost} 🪙` : ''}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  renderHistoryTab(child) {\r\n    return `\r\n      <div class=\"tab-content\">\r\n        <div class=\"empty-state\">\r\n          <div class=\"empty-icon\">📈</div>\r\n          <div class=\"empty-text\">Historique</div>\r\n          <div class=\"empty-subtext\">Fonctionnalité en développement</div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  handleAction(action, id, event) {\r\n    switch (action) {\r\n      case 'switch-tab':\r\n        this.currentTab = id;\r\n        this.render();\r\n        break;\r\n      case 'filter-tasks':\r\n        this.tasksFilter = id;\r\n        this.render();\r\n        break;\r\n      case 'complete-task':\r\n        this.completeTask(id);\r\n        break;\r\n      case 'claim-reward':\r\n        this.claimReward(id);\r\n        break;\r\n      default:\r\n        console.warn('Unknown action:', action);\r\n    }\r\n  }\r\n\r\n  filterTasks(tasks) {\r\n    switch (this.tasksFilter) {\r\n      case 'active':\r\n        return tasks.filter(t => t.status === 'todo' || t.status === 'pending');\r\n      case 'completed':\r\n        return tasks.filter(t => t.status === 'completed' || t.status === 'validated');\r\n      default:\r\n        return tasks;\r\n    }\r\n  }\r\n\r\n  async completeTask(taskId) {\r\n    try {\r\n      await this._hass.callService('kids_tasks', 'complete_task', {\r\n        task_id: taskId,\r\n        child_id: this.config.child_id\r\n      });\r\n    } catch (error) {\r\n      console.error('Error completing task:', error);\r\n    }\r\n  }\r\n\r\n  async claimReward(rewardId) {\r\n    try {\r\n      await this._hass.callService('kids_tasks', 'claim_reward', {\r\n        reward_id: rewardId,\r\n        child_id: this.config.child_id\r\n      });\r\n    } catch (error) {\r\n      console.error('Error claiming reward:', error);\r\n    }\r\n  }\r\n\r\n  // Data access methods\r\n  getChild() {\r\n    const childId = this.config.child_id;\r\n    return this.getChildFromHass(this._hass, childId);\r\n  }\r\n\r\n  getChildFromHass(hass, childId) {\r\n    const pointsEntityId = `sensor.kidtasks_${childId}_points`;\r\n    const entity = hass.states[pointsEntityId];\r\n    \r\n    if (!entity) return null;\r\n    \r\n    return {\r\n      id: childId,\r\n      name: entity.attributes.friendly_name || childId,\r\n      points: parseInt(entity.state) || 0,\r\n      coins: entity.attributes.coins || 0,\r\n      level: entity.attributes.level || 1,\r\n      ...entity.attributes\r\n    };\r\n  }\r\n\r\n  getChildTasks(childId) {\r\n    if (!this._hass) return [];\r\n    \r\n    const taskEntities = Object.keys(this._hass.states)\r\n      .filter(id => id.startsWith('sensor.kidtasks_task_'))\r\n      .map(id => this._hass.states[id])\r\n      .filter(entity => entity.attributes && \r\n                      entity.attributes.assigned_children && \r\n                      entity.attributes.assigned_children.includes(childId));\r\n    \r\n    return taskEntities.map(entity => ({\r\n      id: entity.entity_id.replace('sensor.kidtasks_task_', ''),\r\n      name: entity.attributes.friendly_name || 'Tâche',\r\n      description: entity.attributes.description,\r\n      status: entity.state,\r\n      points: entity.attributes.points || 0,\r\n      category: entity.attributes.category,\r\n      icon: entity.attributes.icon,\r\n      ...entity.attributes\r\n    }));\r\n  }\r\n\r\n  getRewards() {\r\n    if (!this._hass) return [];\r\n    \r\n    const rewardEntities = Object.keys(this._hass.states)\r\n      .filter(id => id.startsWith('sensor.kidtasks_reward_'))\r\n      .map(id => this._hass.states[id]);\r\n    \r\n    return rewardEntities.map(entity => ({\r\n      id: entity.entity_id.replace('sensor.kidtasks_reward_', ''),\r\n      name: entity.attributes.friendly_name || 'Récompense',\r\n      description: entity.attributes.description,\r\n      cost: entity.attributes.cost || 0,\r\n      coin_cost: entity.attributes.coin_cost || 0,\r\n      min_level: entity.attributes.min_level || 1,\r\n      category: entity.attributes.category,\r\n      icon: entity.attributes.icon,\r\n      ...entity.attributes\r\n    }));\r\n  }\r\n\r\n  getChildStats(child) {\r\n    const tasks = this.getChildTasks(child.id);\r\n    const completedToday = tasks.filter(t => \r\n      (t.status === 'completed' || t.status === 'validated') && \r\n      this.isToday(t.completed_at)\r\n    ).length;\r\n    const totalToday = tasks.filter(t => t.status === 'todo').length;\r\n    \r\n    return {\r\n      completedToday,\r\n      totalTasksToday: totalToday,\r\n      points: child.points || 0,\r\n      coins: child.coins || 0\r\n    };\r\n  }\r\n\r\n\r\n  getAvatar(child) {\r\n    if (!child) {\r\n      return '👶';\r\n    }\r\n    const avatarType = child.avatar_type || 'emoji';\r\n    \r\n    if (avatarType === 'emoji') {\r\n      return child.avatar || '👶';\r\n    } else if (avatarType === 'url' && child.avatar_data) {\r\n      return `<img src=\"${child.avatar_data}\" alt=\"${child.name || 'Enfant'}\">`;\r\n    } else if (avatarType === 'person_entity' && child.person_entity_id && this._hass) {\r\n      const personEntity = this._hass.states[child.person_entity_id];\r\n      if (personEntity && personEntity.attributes && personEntity.attributes.entity_picture) {\r\n        return `<img src=\"${personEntity.attributes.entity_picture}\" alt=\"${child.name || 'Enfant'}\">`;\r\n      }\r\n    }\r\n    return child.avatar || '👶';\r\n  }\r\n\r\n\r\n  isToday(dateString) {\r\n    if (!dateString) return false;\r\n    const today = new Date().toDateString();\r\n    return new Date(dateString).toDateString() === today;\r\n  }\r\n\r\n  // Configuration\r\n  static getConfigElement() {\r\n    return document.createElement('kids-tasks-child-card-editor');\r\n  }\r\n\r\n  static getStubConfig() {\r\n    return {\r\n      type: 'custom:kids-tasks-child-card',\r\n      child_id: 'child1',\r\n      title: 'Mes Tâches',\r\n      show_avatar: true,\r\n      show_progress: true,\r\n      show_rewards: true,\r\n      show_completed: true\r\n    };\r\n  }\r\n}\r\n\r\n// ES6 export\r\nexport { KidsTasksChildCard };","// Kids Tasks Card Editors - Configuration UI components\r\n\r\nclass KidsTasksBaseCardEditor extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this._config = {};\r\n    this._rendered = false;\r\n    this._hass = null;\r\n  }\r\n\r\n  setConfig(config) {\r\n    this._config = { ...config };\r\n    this._fireConfigChanged();\r\n  }\r\n\r\n  set hass(hass) {\r\n    this._hass = hass;\r\n    if (!this._rendered) {\r\n      this._render();\r\n      this._rendered = true;\r\n    }\r\n  }\r\n\r\n  _render() {\r\n    this.innerHTML = `\r\n      <div class=\"card-config\">\r\n        <div class=\"option\">\r\n          <label>Titre de la carte</label>\r\n          <input \r\n            type=\"text\" \r\n            class=\"title-input\"\r\n            value=\"${this._config.title || ''}\"\r\n            placeholder=\"Gestionnaire de Tâches Enfants\"\r\n          >\r\n        </div>\r\n        <div class=\"option\">\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              class=\"navigation-toggle\"\r\n              ${this._config.show_navigation !== false ? 'checked' : ''}\r\n            >\r\n            Afficher la navigation\r\n          </label>\r\n        </div>\r\n        ${this._renderSpecificOptions()}\r\n      </div>\r\n      <style>\r\n        .card-config {\r\n          padding: 16px;\r\n          font-family: var(--paper-font-body1_-_font-family, 'Roboto', sans-serif);\r\n        }\r\n        \r\n        .option {\r\n          margin-bottom: 16px;\r\n        }\r\n        \r\n        .option label {\r\n          display: block;\r\n          margin-bottom: 4px;\r\n          font-weight: 500;\r\n          color: var(--primary-text-color);\r\n        }\r\n        \r\n        .option input[type=\"text\"],\r\n        .option input[type=\"number\"],\r\n        .option select {\r\n          width: 100%;\r\n          padding: 8px 12px;\r\n          border: 1px solid var(--divider-color);\r\n          border-radius: 4px;\r\n          background: var(--card-background-color);\r\n          color: var(--primary-text-color);\r\n          font-size: 14px;\r\n        }\r\n        \r\n        .option input[type=\"checkbox\"] {\r\n          margin-right: 8px;\r\n        }\r\n        \r\n        .option label:has(input[type=\"checkbox\"]) {\r\n          display: flex;\r\n          align-items: center;\r\n          cursor: pointer;\r\n        }\r\n        \r\n        .help-text {\r\n          font-size: 12px;\r\n          color: var(--secondary-text-color);\r\n          margin-top: 4px;\r\n        }\r\n        \r\n        .section-title {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          margin: 24px 0 12px 0;\r\n          color: var(--primary-text-color);\r\n          border-bottom: 1px solid var(--divider-color);\r\n          padding-bottom: 4px;\r\n        }\r\n      </style>\r\n    `;\r\n\r\n    this._attachListeners();\r\n  }\r\n\r\n  _renderSpecificOptions() {\r\n    // To be overridden by subclasses\r\n    return '';\r\n  }\r\n\r\n  _attachListeners() {\r\n    const titleInput = this.querySelector('.title-input');\r\n    const navToggle = this.querySelector('.navigation-toggle');\r\n\r\n    if (titleInput) {\r\n      titleInput.addEventListener('input', (e) => {\r\n        this._config.title = e.target.value;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (navToggle) {\r\n      navToggle.addEventListener('change', (e) => {\r\n        this._config.show_navigation = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    this._attachSpecificListeners();\r\n  }\r\n\r\n  _attachSpecificListeners() {\r\n    // To be overridden by subclasses\r\n  }\r\n\r\n  _fireConfigChanged() {\r\n    const event = new CustomEvent('config-changed', {\r\n      detail: { config: this._config },\r\n      bubbles: true,\r\n      composed: true\r\n    });\r\n    this.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nclass KidsTasksCardEditor extends KidsTasksBaseCardEditor {\r\n  _renderSpecificOptions() {\r\n    return `\r\n      <div class=\"section-title\">Options d'affichage</div>\r\n      <div class=\"option\">\r\n        <label>Mode d'affichage</label>\r\n        <select class=\"mode-select\">\r\n          <option value=\"dashboard\" ${this._config.mode === 'dashboard' ? 'selected' : ''}>\r\n            Tableau de bord\r\n          </option>\r\n          <option value=\"compact\" ${this._config.mode === 'compact' ? 'selected' : ''}>\r\n            Vue compacte\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-completed-toggle\"\r\n            ${this._config.show_completed !== false ? 'checked' : ''}\r\n          >\r\n          Afficher les tâches terminées\r\n        </label>\r\n      </div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-rewards-toggle\"\r\n            ${this._config.show_rewards !== false ? 'checked' : ''}\r\n          >\r\n          Afficher les récompenses\r\n        </label>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  _attachSpecificListeners() {\r\n    const modeSelect = this.querySelector('.mode-select');\r\n    const completedToggle = this.querySelector('.show-completed-toggle');\r\n    const rewardsToggle = this.querySelector('.show-rewards-toggle');\r\n\r\n    if (modeSelect) {\r\n      modeSelect.addEventListener('change', (e) => {\r\n        this._config.mode = e.target.value;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (completedToggle) {\r\n      completedToggle.addEventListener('change', (e) => {\r\n        this._config.show_completed = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (rewardsToggle) {\r\n      rewardsToggle.addEventListener('change', (e) => {\r\n        this._config.show_rewards = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nclass KidsTasksChildCardEditor extends KidsTasksBaseCardEditor {\r\n  _renderSpecificOptions() {\r\n    const children = this._getChildren();\r\n    \r\n    return `\r\n      <div class=\"section-title\">Configuration de l'enfant</div>\r\n      <div class=\"option\">\r\n        <label>Sélectionner un enfant</label>\r\n        <select class=\"child-select\" required>\r\n          <option value=\"\">-- Choisir un enfant --</option>\r\n          ${children.map(child => `\r\n            <option value=\"${child.id}\" ${this._config.child_id === child.id ? 'selected' : ''}>\r\n              ${child.name}\r\n            </option>\r\n          `).join('')}\r\n        </select>\r\n        <div class=\"help-text\">\r\n          Si aucun enfant n'apparaît, assurez-vous que l'intégration Kids Tasks Manager est configurée.\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"section-title\">Options d'affichage</div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-avatar-toggle\"\r\n            ${this._config.show_avatar !== false ? 'checked' : ''}\r\n          >\r\n          Afficher l'avatar et les informations\r\n        </label>\r\n      </div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-progress-toggle\"\r\n            ${this._config.show_progress !== false ? 'checked' : ''}\r\n          >\r\n          Afficher les barres de progression\r\n        </label>\r\n      </div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-rewards-toggle\"\r\n            ${this._config.show_rewards !== false ? 'checked' : ''}\r\n          >\r\n          Afficher l'onglet récompenses\r\n        </label>\r\n      </div>\r\n      <div class=\"option\">\r\n        <label>\r\n          <input \r\n            type=\"checkbox\" \r\n            class=\"show-completed-toggle\"\r\n            ${this._config.show_completed !== false ? 'checked' : ''}\r\n          >\r\n          Afficher l'onglet historique\r\n        </label>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  _attachSpecificListeners() {\r\n    const childSelect = this.querySelector('.child-select');\r\n    const avatarToggle = this.querySelector('.show-avatar-toggle');\r\n    const progressToggle = this.querySelector('.show-progress-toggle');\r\n    const rewardsToggle = this.querySelector('.show-rewards-toggle');\r\n    const completedToggle = this.querySelector('.show-completed-toggle');\r\n\r\n    if (childSelect) {\r\n      childSelect.addEventListener('change', (e) => {\r\n        this._config.child_id = e.target.value;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (avatarToggle) {\r\n      avatarToggle.addEventListener('change', (e) => {\r\n        this._config.show_avatar = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (progressToggle) {\r\n      progressToggle.addEventListener('change', (e) => {\r\n        this._config.show_progress = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (rewardsToggle) {\r\n      rewardsToggle.addEventListener('change', (e) => {\r\n        this._config.show_rewards = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n\r\n    if (completedToggle) {\r\n      completedToggle.addEventListener('change', (e) => {\r\n        this._config.show_completed = e.target.checked;\r\n        this._fireConfigChanged();\r\n      });\r\n    }\r\n  }\r\n\r\n  _getChildren() {\r\n    if (!this._hass) return [];\r\n    \r\n    const children = [];\r\n    const entities = this._hass.states;\r\n    \r\n    Object.keys(entities).forEach(entityId => {\r\n      if (entityId.startsWith('sensor.kidtasks_') && entityId.endsWith('_points')) {\r\n        const pointsEntity = entities[entityId];\r\n        if (pointsEntity && pointsEntity.attributes && pointsEntity.state !== 'unavailable') {\r\n          children.push({\r\n            id: pointsEntity.attributes.child_id || entityId.replace('sensor.kidtasks_', '').replace('_points', ''),\r\n            name: pointsEntity.attributes.friendly_name || entityId.replace('sensor.kidtasks_', '').replace('_points', '')\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n    return children;\r\n  }\r\n}\r\n\r\n// ES6 exports\r\nexport {\r\n  KidsTasksBaseCardEditor,\r\n  KidsTasksCardEditor,\r\n  KidsTasksChildCardEditor\r\n};","// Error Boundary System for Kids Tasks Cards\r\n\r\nimport logger from './logger.js';\r\n\r\nclass KidsTasksErrorBoundary {\r\n  constructor() {\r\n    this.errors = new Map(); // Track errors by component\r\n    this.retryAttempts = new Map(); // Track retry counts\r\n    this.setupGlobalErrorHandling();\r\n  }\r\n\r\n  // Setup global error handling\r\n  setupGlobalErrorHandling() {\r\n    // Catch unhandled errors\r\n    window.addEventListener('error', (event) => {\r\n      this.handleGlobalError(event.error, event.filename, event.lineno);\r\n    });\r\n\r\n    // Catch unhandled promise rejections\r\n    window.addEventListener('unhandledrejection', (event) => {\r\n      this.handleGlobalError(event.reason, 'Promise', 0);\r\n      event.preventDefault(); // Prevent console spam\r\n    });\r\n  }\r\n\r\n  // Handle global errors\r\n  handleGlobalError(error, source = 'Unknown', line = 0) {\r\n    // Only handle errors from our components\r\n    if (source && !source.includes('kids-tasks') && !source.includes('KidsTask')) {\r\n      return;\r\n    }\r\n\r\n    logger.error(`Global error caught: ${error.message || error}`, {\r\n      source,\r\n      line,\r\n      stack: error.stack\r\n    });\r\n\r\n    // Try to gracefully recover\r\n    this.attemptRecovery(error);\r\n  }\r\n\r\n  // Wrap component methods with error boundary\r\n  wrapComponent(component, methodName) {\r\n    const originalMethod = component[methodName];\r\n    if (!originalMethod) return;\r\n\r\n    const componentKey = `${component.constructor.name}.${methodName}`;\r\n\r\n    component[methodName] = (...args) => {\r\n      try {\r\n        return originalMethod.apply(component, args);\r\n      } catch (error) {\r\n        return this.handleComponentError(component, methodName, error, args);\r\n      }\r\n    };\r\n  }\r\n\r\n  // Handle component-specific errors\r\n  handleComponentError(component, methodName, error, args = []) {\r\n    const componentKey = `${component.constructor.name}.${methodName}`;\r\n    const errorKey = `${componentKey}:${error.message}`;\r\n\r\n    // Track error occurrence\r\n    const errorCount = (this.errors.get(errorKey) || 0) + 1;\r\n    this.errors.set(errorKey, errorCount);\r\n\r\n    logger.error(`Component error in ${componentKey}:`, error);\r\n\r\n    // Implement error recovery strategies\r\n    return this.recoverFromError(component, methodName, error, errorCount);\r\n  }\r\n\r\n  // Error recovery strategies\r\n  recoverFromError(component, methodName, error, errorCount) {\r\n    const componentKey = component.constructor.name;\r\n\r\n    // Strategy 1: Retry with exponential backoff (up to 3 attempts)\r\n    if (errorCount <= 3 && methodName !== 'render') {\r\n      const delay = Math.pow(2, errorCount) * 100; // 100ms, 200ms, 400ms\r\n      setTimeout(() => {\r\n        try {\r\n          logger.debug(`Retrying ${componentKey}.${methodName} (attempt ${errorCount})`);\r\n          component[methodName]?.();\r\n        } catch (retryError) {\r\n          logger.warn(`Retry failed for ${componentKey}.${methodName}:`, retryError);\r\n        }\r\n      }, delay);\r\n      return null;\r\n    }\r\n\r\n    // Strategy 2: Fallback rendering for render errors\r\n    if (methodName === 'render' || methodName === 'smartRender') {\r\n      return this.renderErrorFallback(component, error);\r\n    }\r\n\r\n    // Strategy 3: Safe mode for critical errors\r\n    if (errorCount > 5) {\r\n      this.enterSafeMode(component, error);\r\n      return null;\r\n    }\r\n\r\n    // Strategy 4: Reset component state\r\n    if (methodName.includes('set') || methodName.includes('update')) {\r\n      return this.resetComponentState(component, error);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // Render error fallback UI\r\n  renderErrorFallback(component, error) {\r\n    if (!component.shadowRoot) return;\r\n\r\n    const errorId = Date.now().toString(36);\r\n    const isRetryable = !error.message.includes('fatal');\r\n\r\n    component.shadowRoot.innerHTML = `\r\n      <div class=\"kt-error-boundary\" data-error-id=\"${errorId}\">\r\n        <style>\r\n          .kt-error-boundary {\r\n            padding: var(--kt-space-lg, 16px);\r\n            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\r\n            border: 1px solid #fca5a5;\r\n            border-radius: var(--kt-radius-md, 8px);\r\n            color: var(--kt-error, #dc2626);\r\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n          }\r\n          .kt-error-title {\r\n            font-size: 1.1em;\r\n            font-weight: 600;\r\n            margin: 0 0 8px 0;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 8px;\r\n          }\r\n          .kt-error-message {\r\n            font-size: 0.9em;\r\n            margin: 0 0 16px 0;\r\n            opacity: 0.8;\r\n            line-height: 1.4;\r\n          }\r\n          .kt-error-actions {\r\n            display: flex;\r\n            gap: 8px;\r\n            flex-wrap: wrap;\r\n          }\r\n          .kt-error-btn {\r\n            padding: 6px 12px;\r\n            border: none;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n            font-size: 0.9em;\r\n            font-weight: 500;\r\n            transition: all 0.2s;\r\n          }\r\n          .kt-error-btn--retry {\r\n            background: var(--kt-primary, #2563eb);\r\n            color: white;\r\n          }\r\n          .kt-error-btn--retry:hover {\r\n            background: var(--kt-primary-dark, #1d4ed8);\r\n          }\r\n          .kt-error-btn--reset {\r\n            background: var(--kt-surface-variant, #f3f4f6);\r\n            color: var(--kt-text, #374151);\r\n          }\r\n          .kt-error-btn--reset:hover {\r\n            background: var(--kt-surface-hover, #e5e7eb);\r\n          }\r\n          .kt-error-details {\r\n            margin-top: 12px;\r\n            padding: 8px;\r\n            background: rgba(0, 0, 0, 0.05);\r\n            border-radius: 4px;\r\n            font-family: monospace;\r\n            font-size: 0.8em;\r\n            display: none;\r\n          }\r\n          .kt-error-toggle {\r\n            color: var(--kt-primary, #2563eb);\r\n            text-decoration: underline;\r\n            cursor: pointer;\r\n            font-size: 0.8em;\r\n          }\r\n          @media (max-width: 480px) {\r\n            .kt-error-boundary {\r\n              padding: 12px;\r\n            }\r\n            .kt-error-actions {\r\n              flex-direction: column;\r\n            }\r\n            .kt-error-btn {\r\n              width: 100%;\r\n              text-align: center;\r\n            }\r\n          }\r\n        </style>\r\n        \r\n        <div class=\"kt-error-title\">\r\n          ⚠️ Oops! Something went wrong\r\n        </div>\r\n        \r\n        <div class=\"kt-error-message\">\r\n          We encountered an issue loading this card. This is usually temporary.\r\n        </div>\r\n        \r\n        <div class=\"kt-error-actions\">\r\n          ${isRetryable ? `\r\n            <button class=\"kt-error-btn kt-error-btn--retry\" onclick=\"this.closest('.kt-error-boundary').dispatchEvent(new CustomEvent('retry'))\">\r\n              🔄 Try Again\r\n            </button>\r\n          ` : ''}\r\n          <button class=\"kt-error-btn kt-error-btn--reset\" onclick=\"this.closest('.kt-error-boundary').dispatchEvent(new CustomEvent('reset'))\">\r\n            🔧 Reset Card\r\n          </button>\r\n          <span class=\"kt-error-toggle\" onclick=\"\r\n            const details = this.parentNode.parentNode.querySelector('.kt-error-details');\r\n            details.style.display = details.style.display === 'block' ? 'none' : 'block';\r\n            this.textContent = details.style.display === 'block' ? 'Hide details' : 'Show details';\r\n          \">Show details</span>\r\n        </div>\r\n        \r\n        <div class=\"kt-error-details\">\r\n          <strong>Component:</strong> ${component.constructor.name}<br>\r\n          <strong>Error:</strong> ${error.message}<br>\r\n          <strong>Time:</strong> ${new Date().toLocaleString()}\r\n        </div>\r\n      </div>\r\n    `;\r\n\r\n    // Add error recovery event listeners\r\n    const errorBoundary = component.shadowRoot.querySelector('.kt-error-boundary');\r\n    \r\n    errorBoundary.addEventListener('retry', () => {\r\n      logger.debug('User requested retry for', component.constructor.name);\r\n      component.smartRender?.(true) || component.render?.();\r\n    });\r\n\r\n    errorBoundary.addEventListener('reset', () => {\r\n      logger.debug('User requested reset for', component.constructor.name);\r\n      this.resetComponentState(component, error);\r\n    });\r\n\r\n    return errorBoundary;\r\n  }\r\n\r\n  // Reset component to safe state\r\n  resetComponentState(component, error) {\r\n    try {\r\n      // Clear internal state\r\n      if (component._lastRenderState) component._lastRenderState = null;\r\n      if (component._refreshTimeout) {\r\n        clearTimeout(component._refreshTimeout);\r\n        component._refreshTimeout = null;\r\n      }\r\n\r\n      // Reset to default config\r\n      if (component.setConfig && component.constructor.getStubConfig) {\r\n        const defaultConfig = component.constructor.getStubConfig();\r\n        component.setConfig(defaultConfig);\r\n      }\r\n\r\n      logger.info(`Reset component state for ${component.constructor.name}`);\r\n\r\n      // Try to render again\r\n      setTimeout(() => {\r\n        component.smartRender?.(true) || component.render?.();\r\n      }, 100);\r\n\r\n    } catch (resetError) {\r\n      logger.error('Failed to reset component state:', resetError);\r\n      this.enterSafeMode(component, resetError);\r\n    }\r\n  }\r\n\r\n  // Enter safe mode (minimal functionality)\r\n  enterSafeMode(component, error) {\r\n    logger.warn(`Entering safe mode for ${component.constructor.name}`);\r\n\r\n    if (component.shadowRoot) {\r\n      component.shadowRoot.innerHTML = `\r\n        <div style=\"padding: 16px; text-align: center; color: #666;\">\r\n          <div style=\"font-size: 2em; margin-bottom: 8px;\">🛡️</div>\r\n          <div style=\"font-weight: bold; margin-bottom: 4px;\">Safe Mode</div>\r\n          <div style=\"font-size: 0.9em;\">This card is experiencing issues and has been disabled for stability.</div>\r\n        </div>\r\n      `;\r\n    }\r\n  }\r\n\r\n  // Attempt automatic recovery\r\n  attemptRecovery(error) {\r\n    // Find affected components\r\n    const cards = document.querySelectorAll('kids-tasks-card, kids-tasks-child-card');\r\n    \r\n    cards.forEach(card => {\r\n      if (card.shadowRoot && card.shadowRoot.innerHTML.includes('kt-error-boundary')) {\r\n        // Card already in error state, try to recover\r\n        setTimeout(() => {\r\n          if (card.smartRender) {\r\n            card.smartRender(true);\r\n          }\r\n        }, 2000);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Get error statistics\r\n  getErrorStats() {\r\n    const stats = {\r\n      totalErrors: 0,\r\n      errorsByComponent: {},\r\n      recentErrors: []\r\n    };\r\n\r\n    for (const [errorKey, count] of this.errors.entries()) {\r\n      const [component] = errorKey.split('.');\r\n      stats.totalErrors += count;\r\n      stats.errorsByComponent[component] = (stats.errorsByComponent[component] || 0) + count;\r\n    }\r\n\r\n    return stats;\r\n  }\r\n\r\n  // Clear error history\r\n  clearErrors() {\r\n    this.errors.clear();\r\n    this.retryAttempts.clear();\r\n    logger.info('Error history cleared');\r\n  }\r\n}\r\n\r\n// Global error boundary instance\r\nconst errorBoundary = new KidsTasksErrorBoundary();\r\n\r\n// Auto-wrap common methods\r\nexport function withErrorBoundary(component) {\r\n  const methodsToWrap = ['render', 'setConfig', 'set hass', 'handleAction', 'connectedCallback'];\r\n  \r\n  methodsToWrap.forEach(method => {\r\n    errorBoundary.wrapComponent(component, method);\r\n  });\r\n  \r\n  return component;\r\n}\r\n\r\nexport { KidsTasksErrorBoundary, errorBoundary };\r\nexport default errorBoundary;","// Accessibility Enhancement System for Kids Tasks Cards\r\n\r\nimport logger from './logger.js';\r\n\r\nclass KidsTasksAccessibility {\r\n  constructor() {\r\n    this.focusableElements = [];\r\n    this.announcements = [];\r\n    this.keyboardNavigation = new Map();\r\n    this.setupGlobalAccessibility();\r\n  }\r\n\r\n  // Setup global accessibility features\r\n  setupGlobalAccessibility() {\r\n    // Create screen reader announcement region\r\n    this.createAnnouncementRegion();\r\n    \r\n    // Setup global keyboard navigation\r\n    this.setupGlobalKeyboardHandling();\r\n    \r\n    // Monitor for new cards\r\n    this.observeCardElements();\r\n  }\r\n\r\n  // Create ARIA live region for announcements\r\n  createAnnouncementRegion() {\r\n    if (document.getElementById('kt-announcements')) return;\r\n\r\n    const announceRegion = document.createElement('div');\r\n    announceRegion.id = 'kt-announcements';\r\n    announceRegion.setAttribute('aria-live', 'polite');\r\n    announceRegion.setAttribute('aria-atomic', 'true');\r\n    announceRegion.style.cssText = `\r\n      position: absolute;\r\n      left: -10000px;\r\n      width: 1px;\r\n      height: 1px;\r\n      overflow: hidden;\r\n    `;\r\n    \r\n    document.body.appendChild(announceRegion);\r\n  }\r\n\r\n  // Announce messages to screen readers\r\n  announce(message, priority = 'polite') {\r\n    const region = document.getElementById('kt-announcements');\r\n    if (!region) return;\r\n\r\n    // Set priority level\r\n    region.setAttribute('aria-live', priority);\r\n    \r\n    // Clear and set message\r\n    region.textContent = '';\r\n    setTimeout(() => {\r\n      region.textContent = message;\r\n      logger.debug(`Accessibility announcement: ${message}`);\r\n    }, 100);\r\n\r\n    // Track announcements\r\n    this.announcements.push({\r\n      message,\r\n      priority,\r\n      timestamp: Date.now()\r\n    });\r\n\r\n    // Keep only last 10 announcements\r\n    if (this.announcements.length > 10) {\r\n      this.announcements.shift();\r\n    }\r\n  }\r\n\r\n  // Setup global keyboard handling\r\n  setupGlobalKeyboardHandling() {\r\n    document.addEventListener('keydown', (event) => {\r\n      this.handleGlobalKeyboard(event);\r\n    });\r\n  }\r\n\r\n  // Handle global keyboard events\r\n  handleGlobalKeyboard(event) {\r\n    const activeCard = event.target.closest('kids-tasks-card, kids-tasks-child-card');\r\n    if (!activeCard) return;\r\n\r\n    // F1: Show help/shortcuts\r\n    if (event.key === 'F1') {\r\n      event.preventDefault();\r\n      this.showKeyboardHelp(activeCard);\r\n      return;\r\n    }\r\n\r\n    // Escape: Close modals/overlays\r\n    if (event.key === 'Escape') {\r\n      this.handleEscape(activeCard);\r\n      return;\r\n    }\r\n\r\n    // Tab navigation enhancement\r\n    if (event.key === 'Tab') {\r\n      this.handleTabNavigation(event, activeCard);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Show keyboard shortcuts help\r\n  showKeyboardHelp(card) {\r\n    const helpModal = this.createHelpModal();\r\n    card.shadowRoot.appendChild(helpModal);\r\n    \r\n    // Focus first button\r\n    const firstButton = helpModal.querySelector('button');\r\n    if (firstButton) {\r\n      firstButton.focus();\r\n    }\r\n\r\n    this.announce('Keyboard shortcuts help opened', 'assertive');\r\n  }\r\n\r\n  // Create help modal\r\n  createHelpModal() {\r\n    const modal = document.createElement('div');\r\n    modal.className = 'kt-help-modal';\r\n    modal.setAttribute('role', 'dialog');\r\n    modal.setAttribute('aria-labelledby', 'help-title');\r\n    modal.setAttribute('aria-modal', 'true');\r\n\r\n    modal.innerHTML = `\r\n      <div class=\"kt-help-overlay\" onclick=\"this.closest('.kt-help-modal').remove()\"></div>\r\n      <div class=\"kt-help-content\">\r\n        <h2 id=\"help-title\">Keyboard Shortcuts</h2>\r\n        <div class=\"kt-help-shortcuts\">\r\n          <div class=\"kt-shortcut\">\r\n            <kbd>Tab</kbd>\r\n            <span>Navigate between interactive elements</span>\r\n          </div>\r\n          <div class=\"kt-shortcut\">\r\n            <kbd>Space</kbd> / <kbd>Enter</kbd>\r\n            <span>Activate buttons and links</span>\r\n          </div>\r\n          <div class=\"kt-shortcut\">\r\n            <kbd>Arrow Keys</kbd>\r\n            <span>Navigate within lists and tabs</span>\r\n          </div>\r\n          <div class=\"kt-shortcut\">\r\n            <kbd>Escape</kbd>\r\n            <span>Close modal or cancel action</span>\r\n          </div>\r\n          <div class=\"kt-shortcut\">\r\n            <kbd>F1</kbd>\r\n            <span>Show this help</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"kt-help-actions\">\r\n          <button class=\"kt-btn kt-btn--primary\" onclick=\"this.closest('.kt-help-modal').remove()\">\r\n            Close Help\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <style>\r\n        .kt-help-modal {\r\n          position: fixed;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          z-index: 1000;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n        }\r\n        .kt-help-overlay {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background: rgba(0, 0, 0, 0.5);\r\n        }\r\n        .kt-help-content {\r\n          position: relative;\r\n          background: white;\r\n          border-radius: 8px;\r\n          padding: 24px;\r\n          max-width: 500px;\r\n          max-height: 80vh;\r\n          overflow-y: auto;\r\n          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\r\n        }\r\n        .kt-help-content h2 {\r\n          margin: 0 0 16px 0;\r\n          font-size: 1.25em;\r\n          color: var(--kt-text, #1f2937);\r\n        }\r\n        .kt-help-shortcuts {\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 12px;\r\n          margin-bottom: 24px;\r\n        }\r\n        .kt-shortcut {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          padding: 8px 0;\r\n        }\r\n        .kt-shortcut kbd {\r\n          background: var(--kt-surface-variant, #f3f4f6);\r\n          border: 1px solid var(--kt-border, #d1d5db);\r\n          border-radius: 4px;\r\n          padding: 4px 8px;\r\n          font-family: monospace;\r\n          font-size: 0.9em;\r\n          min-width: 80px;\r\n          text-align: center;\r\n        }\r\n        .kt-shortcut span {\r\n          color: var(--kt-text-secondary, #6b7280);\r\n          flex: 1;\r\n        }\r\n        .kt-help-actions {\r\n          display: flex;\r\n          justify-content: flex-end;\r\n          gap: 8px;\r\n        }\r\n      </style>\r\n    `;\r\n\r\n    return modal;\r\n  }\r\n\r\n  // Handle escape key\r\n  handleEscape(card) {\r\n    // Close any open modals\r\n    const modals = card.shadowRoot.querySelectorAll('.kt-help-modal, .kt-modal');\r\n    if (modals.length > 0) {\r\n      modals[modals.length - 1].remove();\r\n      this.announce('Modal closed');\r\n      return;\r\n    }\r\n\r\n    // Cancel any pending delete confirmations\r\n    const confirmations = card.shadowRoot.querySelectorAll('.kt-delete-confirmation');\r\n    confirmations.forEach(conf => conf.remove());\r\n    \r\n    if (confirmations.length > 0) {\r\n      this.announce('Action cancelled');\r\n    }\r\n  }\r\n\r\n  // Enhanced tab navigation\r\n  handleTabNavigation(event, card) {\r\n    const focusableElements = this.getFocusableElements(card.shadowRoot);\r\n    if (focusableElements.length === 0) return;\r\n\r\n    const currentIndex = focusableElements.indexOf(document.activeElement);\r\n    \r\n    if (event.shiftKey) {\r\n      // Shift+Tab: go backwards\r\n      if (currentIndex === 0) {\r\n        event.preventDefault();\r\n        focusableElements[focusableElements.length - 1].focus();\r\n      }\r\n    } else {\r\n      // Tab: go forwards  \r\n      if (currentIndex === focusableElements.length - 1) {\r\n        event.preventDefault();\r\n        focusableElements[0].focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  // Get all focusable elements in container\r\n  getFocusableElements(container) {\r\n    const selectors = [\r\n      'button:not([disabled])',\r\n      'input:not([disabled])',\r\n      'select:not([disabled])',\r\n      'textarea:not([disabled])',\r\n      'a[href]',\r\n      '[tabindex]:not([tabindex=\"-1\"])'\r\n    ];\r\n\r\n    return Array.from(container.querySelectorAll(selectors.join(', ')))\r\n      .filter(el => {\r\n        const style = getComputedStyle(el);\r\n        return style.display !== 'none' && style.visibility !== 'hidden';\r\n      });\r\n  }\r\n\r\n  // Observe for new card elements\r\n  observeCardElements() {\r\n    if (typeof MutationObserver === 'undefined') return;\r\n\r\n    const observer = new MutationObserver((mutations) => {\r\n      mutations.forEach(mutation => {\r\n        mutation.addedNodes.forEach(node => {\r\n          if (node.nodeType === Node.ELEMENT_NODE) {\r\n            const cards = node.matches('kids-tasks-card, kids-tasks-child-card') \r\n              ? [node] \r\n              : Array.from(node.querySelectorAll('kids-tasks-card, kids-tasks-child-card'));\r\n            \r\n            cards.forEach(card => this.enhanceCardAccessibility(card));\r\n          }\r\n        });\r\n      });\r\n    });\r\n\r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true\r\n    });\r\n  }\r\n\r\n  // Enhance individual card accessibility\r\n  enhanceCardAccessibility(card) {\r\n    if (!card.shadowRoot) return;\r\n\r\n    // Add ARIA labels and roles\r\n    this.addAriaLabels(card);\r\n    \r\n    // Setup keyboard navigation\r\n    this.setupCardKeyboardNavigation(card);\r\n    \r\n    // Add focus management\r\n    this.setupFocusManagement(card);\r\n    \r\n    logger.debug('Enhanced accessibility for', card.constructor.name);\r\n  }\r\n\r\n  // Add ARIA labels and roles\r\n  addAriaLabels(card) {\r\n    const shadowRoot = card.shadowRoot;\r\n\r\n    // Main card container\r\n    const cardContent = shadowRoot.querySelector('.card-content');\r\n    if (cardContent && !cardContent.getAttribute('role')) {\r\n      cardContent.setAttribute('role', 'region');\r\n      cardContent.setAttribute('aria-label', card.config?.title || 'Kids Tasks Card');\r\n    }\r\n\r\n    // Navigation tabs\r\n    const tabs = shadowRoot.querySelectorAll('.nav-button');\r\n    tabs.forEach((tab, index) => {\r\n      tab.setAttribute('role', 'tab');\r\n      tab.setAttribute('aria-selected', tab.classList.contains('active') ? 'true' : 'false');\r\n      tab.setAttribute('tabindex', tab.classList.contains('active') ? '0' : '-1');\r\n    });\r\n\r\n    // Task/reward items\r\n    const items = shadowRoot.querySelectorAll('.task-item, .reward-item, .child-card');\r\n    items.forEach(item => {\r\n      if (!item.getAttribute('role')) {\r\n        item.setAttribute('role', 'article');\r\n      }\r\n      \r\n      // Add accessible names\r\n      const title = item.querySelector('.task-title, .reward-name, .child-name');\r\n      if (title && !item.getAttribute('aria-label')) {\r\n        item.setAttribute('aria-label', title.textContent);\r\n      }\r\n    });\r\n\r\n    // Progress bars\r\n    const progressBars = shadowRoot.querySelectorAll('.progress-fill');\r\n    progressBars.forEach(progress => {\r\n      const progressValue = progress.style.width || '0%';\r\n      progress.setAttribute('role', 'progressbar');\r\n      progress.setAttribute('aria-valuenow', parseInt(progressValue));\r\n      progress.setAttribute('aria-valuemin', '0');\r\n      progress.setAttribute('aria-valuemax', '100');\r\n      progress.setAttribute('aria-label', `Progress: ${progressValue}`);\r\n    });\r\n  }\r\n\r\n  // Setup card-specific keyboard navigation\r\n  setupCardKeyboardNavigation(card) {\r\n    const shadowRoot = card.shadowRoot;\r\n\r\n    // Arrow key navigation for tabs\r\n    const tabs = shadowRoot.querySelectorAll('.nav-button[role=\"tab\"]');\r\n    tabs.forEach((tab, index) => {\r\n      tab.addEventListener('keydown', (event) => {\r\n        let newIndex;\r\n        \r\n        switch (event.key) {\r\n          case 'ArrowLeft':\r\n            event.preventDefault();\r\n            newIndex = index > 0 ? index - 1 : tabs.length - 1;\r\n            this.focusTab(tabs[newIndex]);\r\n            break;\r\n          case 'ArrowRight':\r\n            event.preventDefault();\r\n            newIndex = index < tabs.length - 1 ? index + 1 : 0;\r\n            this.focusTab(tabs[newIndex]);\r\n            break;\r\n          case 'Home':\r\n            event.preventDefault();\r\n            this.focusTab(tabs[0]);\r\n            break;\r\n          case 'End':\r\n            event.preventDefault();\r\n            this.focusTab(tabs[tabs.length - 1]);\r\n            break;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Focus tab and announce\r\n  focusTab(tab) {\r\n    // Update tabindex\r\n    const allTabs = tab.parentNode.querySelectorAll('[role=\"tab\"]');\r\n    allTabs.forEach(t => t.setAttribute('tabindex', '-1'));\r\n    tab.setAttribute('tabindex', '0');\r\n    \r\n    // Focus and announce\r\n    tab.focus();\r\n    this.announce(`${tab.textContent} tab selected`);\r\n  }\r\n\r\n  // Setup focus management\r\n  setupFocusManagement(card) {\r\n    const shadowRoot = card.shadowRoot;\r\n\r\n    // Focus visible elements on interaction\r\n    shadowRoot.addEventListener('click', (event) => {\r\n      const target = event.target.closest('[data-action]');\r\n      if (target && target.tagName === 'BUTTON') {\r\n        // Announce button actions\r\n        const action = target.dataset.action;\r\n        const actionText = this.getActionAnnouncement(action, target);\r\n        if (actionText) {\r\n          this.announce(actionText);\r\n        }\r\n      }\r\n    });\r\n\r\n    // Skip to content functionality\r\n    this.addSkipLinks(card);\r\n  }\r\n\r\n  // Add skip navigation links\r\n  addSkipLinks(card) {\r\n    const shadowRoot = card.shadowRoot;\r\n    const cardContent = shadowRoot.querySelector('.card-content');\r\n    if (!cardContent) return;\r\n\r\n    const skipLink = document.createElement('a');\r\n    skipLink.textContent = 'Skip to main content';\r\n    skipLink.href = '#';\r\n    skipLink.className = 'kt-skip-link';\r\n    skipLink.style.cssText = `\r\n      position: absolute;\r\n      left: -10000px;\r\n      top: auto;\r\n      width: 1px;\r\n      height: 1px;\r\n      overflow: hidden;\r\n    `;\r\n\r\n    skipLink.addEventListener('focus', () => {\r\n      skipLink.style.cssText = `\r\n        position: absolute;\r\n        left: 6px;\r\n        top: 6px;\r\n        width: auto;\r\n        height: auto;\r\n        overflow: visible;\r\n        z-index: 1000;\r\n        padding: 8px 12px;\r\n        background: var(--kt-primary, #2563eb);\r\n        color: white;\r\n        text-decoration: none;\r\n        border-radius: 4px;\r\n        font-size: 14px;\r\n      `;\r\n    });\r\n\r\n    skipLink.addEventListener('blur', () => {\r\n      skipLink.style.cssText = `\r\n        position: absolute;\r\n        left: -10000px;\r\n        top: auto;\r\n        width: 1px;\r\n        height: 1px;\r\n        overflow: hidden;\r\n      `;\r\n    });\r\n\r\n    skipLink.addEventListener('click', (event) => {\r\n      event.preventDefault();\r\n      const mainContent = shadowRoot.querySelector('.main-content');\r\n      if (mainContent) {\r\n        mainContent.focus();\r\n        this.announce('Skipped to main content');\r\n      }\r\n    });\r\n\r\n    cardContent.insertBefore(skipLink, cardContent.firstChild);\r\n  }\r\n\r\n  // Get announcement text for actions\r\n  getActionAnnouncement(action, element) {\r\n    const actionMap = {\r\n      'complete-task': 'Task completed',\r\n      'uncomplete-task': 'Task marked as incomplete', \r\n      'claim-reward': 'Reward claimed',\r\n      'validate-task': 'Task validated',\r\n      'delete-task': 'Task deleted',\r\n      'filter': `Filter applied: ${element.textContent}`,\r\n      'switch-tab': `Switched to ${element.textContent} tab`,\r\n      'view-child': `Viewing ${element.dataset.id} details`\r\n    };\r\n\r\n    return actionMap[action] || null;\r\n  }\r\n\r\n  // Public API for components\r\n  announceToUser(message, priority = 'polite') {\r\n    this.announce(message, priority);\r\n  }\r\n\r\n  enhanceCard(card) {\r\n    this.enhanceCardAccessibility(card);\r\n  }\r\n}\r\n\r\n// Global accessibility instance\r\nconst accessibility = new KidsTasksAccessibility();\r\n\r\n// Export for use in components\r\nexport { KidsTasksAccessibility, accessibility };\r\nexport default accessibility;","// Kids Tasks Card v2.0 - Main Entry Point\r\n// This file imports all modular components and registers them with Home Assistant\r\n\r\nimport { KidsTasksStyleManagerV2 as KidsTasksStyleManager } from './style-manager-v2.js';\r\nimport { KidsTasksUtils } from './utils.js';\r\nimport { KidsTasksBaseCard } from './base-card.js';\r\nimport { KidsTasksCard } from './card-optimized.js';\r\nimport { KidsTasksChildCard } from './child-card.js';\r\nimport { \r\n  KidsTasksCardEditor, \r\n  KidsTasksChildCardEditor \r\n} from './editors.js';\r\nimport logger from './logger.js';\r\nimport performanceMonitor from './performance-monitor.js';\r\nimport errorBoundary, { withErrorBoundary } from './error-boundary.js';\r\nimport accessibility from './accessibility.js';\r\n\r\n// Development logging\r\nif (__DEV__) {\r\n  logger.info('🛠️ Kids Tasks Card - Development Mode');\r\n  logger.info('📦 Loading modular components...');\r\n}\r\n\r\n// Initialize global styles\r\nKidsTasksStyleManager.injectGlobalStyles();\r\n\r\n// Make utilities globally available for components\r\nwindow.KidsTasksUtils = KidsTasksUtils;\r\nwindow.KidsTasksStyleManager = KidsTasksStyleManager;\r\n\r\n// Register custom elements with error boundaries\r\n// Use -dev suffix in development to avoid conflicts with production\r\nconst cardSuffix = __DEV__ ? '-dev' : '';\r\nconst mainCardType = `kids-tasks-card${cardSuffix}`;\r\nconst childCardType = `kids-tasks-child-card${cardSuffix}`;\r\n\r\ncustomElements.define(mainCardType, withErrorBoundary(KidsTasksCard));\r\ncustomElements.define(childCardType, withErrorBoundary(KidsTasksChildCard));\r\ncustomElements.define(`kids-tasks-card-editor${cardSuffix}`, KidsTasksCardEditor);\r\ncustomElements.define(`kids-tasks-child-card-editor${cardSuffix}`, KidsTasksChildCardEditor);\r\n\r\n// Register with Home Assistant card picker\r\nwindow.customCards = window.customCards || [];\r\nwindow.customCards.push(\r\n  {\r\n    type: mainCardType,\r\n    name: `Kids Tasks Card${__DEV__ ? ' (Dev)' : ''}`,\r\n    description: 'Manage children\\'s tasks and rewards with an engaging interface',\r\n    preview: true,\r\n    documentationURL: 'https://github.com/astrayel/kids-tasks-card'\r\n  },\r\n  {\r\n    type: childCardType,\r\n    name: `Kids Tasks Child Card${__DEV__ ? ' (Dev)' : ''}`,\r\n    description: 'Individual child view for tasks and rewards',\r\n    preview: true,\r\n    documentationURL: 'https://github.com/astrayel/kids-tasks-card'\r\n  }\r\n);\r\n\r\n// Development hot reload support\r\nif (__DEV__ && typeof window !== 'undefined') {\r\n  // Enable hot reload in development\r\n  window.addEventListener('beforeunload', () => {\r\n    logger.debug('🔄 Kids Tasks Card - Hot reload triggered');\r\n  });\r\n  \r\n  // Auto-reload when served from development server\r\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n    let reloadCheckInterval;\r\n    let lastModified = Date.now();\r\n    \r\n    // Check for updates every 2 seconds\r\n    const checkForUpdates = async () => {\r\n      try {\r\n        const response = await fetch(window.location.href, { \r\n          method: 'HEAD',\r\n          cache: 'no-cache'\r\n        });\r\n        \r\n        const newLastModified = response.headers.get('last-modified');\r\n        if (newLastModified && newLastModified !== lastModified) {\r\n          logger.debug('🔄 Hot reload: File changed, reloading...');\r\n          window.location.reload();\r\n        }\r\n      } catch (error) {\r\n        // Ignore network errors during development\r\n      }\r\n    };\r\n    \r\n    // Start checking after a delay to avoid initial false positives\r\n    setTimeout(() => {\r\n      reloadCheckInterval = setInterval(checkForUpdates, 2000);\r\n    }, 5000);\r\n    \r\n    // Clean up interval on unload\r\n    window.addEventListener('beforeunload', () => {\r\n      if (reloadCheckInterval) {\r\n        clearInterval(reloadCheckInterval);\r\n      }\r\n    });\r\n  }\r\n  \r\n  // Listen for Rollup live reload messages\r\n  if (typeof EventSource !== 'undefined') {\r\n    try {\r\n      const eventSource = new EventSource('http://localhost:35729/livereload');\r\n      eventSource.onmessage = function(event) {\r\n        if (event.data === 'reload') {\r\n          logger.debug('🔄 Live reload triggered');\r\n          window.location.reload();\r\n        }\r\n      };\r\n      \r\n      eventSource.onerror = function() {\r\n        // Silently ignore - live reload server might not be running\r\n        eventSource.close();\r\n      };\r\n    } catch (error) {\r\n      // Live reload not available, use fallback polling\r\n    }\r\n  }\r\n  \r\n  // Expose components for debugging\r\n  window.KidsTasksCard = KidsTasksCard;\r\n  window.KidsTasksChildCard = KidsTasksChildCard;\r\n  window.KidsTasksBaseCard = KidsTasksBaseCard;\r\n  \r\n  // Development utilities\r\n  window.KidsTasksDebug = {\r\n    reloadCard: (cardElement) => {\r\n      if (cardElement && cardElement.setConfig && cardElement.hass) {\r\n        cardElement.setConfig(cardElement.config);\r\n        cardElement.hass = cardElement.hass;\r\n        logger.debug('🔄 Card reloaded manually');\r\n      }\r\n    },\r\n    \r\n    reloadAllCards: () => {\r\n      const selector = __DEV__ ? 'kids-tasks-card-dev, kids-tasks-child-card-dev' : 'kids-tasks-card, kids-tasks-child-card';\r\n      document.querySelectorAll(selector).forEach(card => {\r\n        window.KidsTasksDebug.reloadCard(card);\r\n      });\r\n      logger.debug('🔄 All cards reloaded');\r\n    },\r\n    \r\n    inspectCard: (cardElement) => {\r\n      logger.debug('🔍 Card inspection:', {\r\n        element: cardElement,\r\n        config: cardElement.config,\r\n        hass: cardElement._hass,\r\n        children: cardElement.getChildren?.()\r\n      });\r\n    },\r\n\r\n    // Performance debugging\r\n    performance: {\r\n      report: () => performanceMonitor?.generateReport(),\r\n      toggle: () => performanceMonitor?.toggle(),\r\n      clear: () => performanceMonitor?.destroy()\r\n    },\r\n\r\n    // Error debugging  \r\n    errors: {\r\n      stats: () => errorBoundary.getErrorStats(),\r\n      clear: () => errorBoundary.clearErrors()\r\n    },\r\n\r\n    // Accessibility debugging\r\n    accessibility: {\r\n      enhance: (card) => accessibility.enhanceCard(card),\r\n      announce: (message) => accessibility.announceToUser(message)\r\n    },\r\n\r\n    // System info\r\n    systemInfo: () => {\r\n      const selector = __DEV__ ? 'kids-tasks-card-dev, kids-tasks-child-card-dev' : 'kids-tasks-card, kids-tasks-child-card';\r\n      return {\r\n        cards: document.querySelectorAll(selector).length,\r\n        performance: performanceMonitor?.generateReport()?.summary,\r\n        errors: errorBoundary.getErrorStats(),\r\n        memory: performance.memory ? {\r\n          used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + 'MB',\r\n          total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + 'MB'\r\n        } : null\r\n      };\r\n    }\r\n  };\r\n  \r\n  logger.info('🛠️ Development utilities available as window.KidsTasksDebug');\r\n}\r\n\r\n// Version info\r\nconst version = process.env.VERSION || '2.0.0';\r\nconst mode = __PROD__ ? 'production' : 'development';\r\n\r\nlogger.info(`Kids Tasks Card v${version} loaded successfully!`);\r\n\r\nif (__DEV__) {\r\n  logger.info('🎯 Mode: Development with hot reload');\r\n  logger.info('🏗️ Architecture: Modular ES6 components');\r\n  logger.info('⚡ Performance: Optimized rendering pipeline');\r\n  logger.info('🎨 Styles: Consolidated CSS variables');\r\n}\r\n\r\n// Export for potential external use\r\nexport {\r\n  KidsTasksCard,\r\n  KidsTasksChildCard,\r\n  KidsTasksBaseCard,\r\n  KidsTasksStyleManager,\r\n  KidsTasksUtils\r\n};"],"names":["performanceMonitor","KidsTasksStyleManager","KidsTasksCard"],"mappings":";AAGA,MAAM,uBAAuB,CAAC;AAC9B,EAAE,OAAO,QAAQ,GAAG,IAAI;AACxB,EAAE,OAAO,QAAQ,GAAG,KAAK;AACzB,EAAE,OAAO,cAAc,GAAG,kBAAkB;;AAE5C,EAAE,OAAO,WAAW,GAAG;AACvB,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACxB,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI,uBAAuB,EAAE;AACnD,IAAI;AACJ,IAAI,OAAO,IAAI,CAAC,QAAQ;AACxB,EAAE;;AAEF,EAAE,OAAO,kBAAkB,GAAG;AAC9B,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;;AAEvB,IAAI,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;AACxD,IAAI,YAAY,CAAC,EAAE,GAAG,6BAA6B;AACnD,IAAI,YAAY,CAAC,YAAY,CAAC,cAAc,EAAE,IAAI,CAAC,cAAc,CAAC;;AAElE,IAAI,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,wBAAwB,EAAE;AAC9D,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC;;AAE3C,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI;AACxB,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,4CAA4C,EAAE,IAAI,CAAC,gBAAgB,EAAE,CAAC,WAAW,CAAC,CAAC;AACrG,EAAE;;AAEF,EAAE,OAAO,gBAAgB,GAAG;AAC5B,IAAI,OAAO,EAAE;AACb,EAAE;;AAEF,EAAE,OAAO,wBAAwB,GAAG;AACpC,IAAI,OAAO,CAAC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,EAAE,IAAI,CAAC,mBAAmB,EAAE,CAAC;AACnC;AACA;AACA,MAAM,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAClC;AACA;AACA,MAAM,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC;AACpC;AACA;AACA,MAAM,EAAE,IAAI,CAAC,mBAAmB,EAAE,CAAC;AACnC,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,OAAO,mBAAmB,GAAG;AAC/B,IAAI,OAAO,CAAC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,OAAO,kBAAkB,GAAG;AAC9B,IAAI,OAAO,CAAC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,OAAO,oBAAoB,GAAG;AAChC,IAAI,OAAO,CAAC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,OAAO,mBAAmB,GAAG;AAC/B,IAAI,OAAO,CAAC;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,OAAO,kBAAkB,GAAG;AAC9B,IAAI,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,8BAA8B,CAAC;AACjF,IAAI,IAAI,cAAc,EAAE;AACxB,MAAM,cAAc,CAAC,MAAM,EAAE;AAC7B,MAAM,IAAI,CAAC,QAAQ,GAAG,KAAK;AAC3B,MAAM,OAAO,CAAC,IAAI,CAAC,2CAA2C,CAAC;AAC/D,IAAI;AACJ,EAAE;;;AAGF,EAAE,OAAO,cAAc,CAAC,YAAY,EAAE;AACtC,IAAI,MAAM,QAAQ,GAAG;AACrB,MAAM,eAAe,EAAE,EAAE,EAAE,eAAe,EAAE,EAAE,EAAE,eAAe,EAAE,EAAE;AACnE,MAAM,eAAe,EAAE,EAAE,EAAE,gBAAgB,EAAE,EAAE,EAAE,sBAAsB,EAAE,EAAE;AAC3E,MAAM,cAAc,EAAE,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,sBAAsB,EAAE,EAAE;AACxE,MAAM,gBAAgB,EAAE,EAAE,EAAE,YAAY,EAAE,CAAC,EAAE,mBAAmB,EAAE,CAAC;AACnE,MAAM,WAAW,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC,EAAE,wBAAwB,EAAE,CAAC;AACpE,MAAM,eAAe,EAAE,CAAC,EAAE,mBAAmB,EAAE,CAAC,EAAE,gBAAgB,EAAE;AACpE,KAAK;;AAEL,IAAI,OAAO,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC;AACtC,EAAE;;;AAGF,EAAE,OAAO,sBAAsB,GAAG;AAClC,IAAI,OAAO;AACX,MAAM,YAAY,EAAE;AACpB,QAAQ,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE;AAC1D,OAAO;AACP,MAAM,WAAW,EAAE;AACnB,QAAQ,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;AAClD,OAAO;AACP,MAAM,YAAY,EAAE;AACpB,QAAQ,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,SAAS;AAClE,QAAQ,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE;AAClD;AACA,KAAK;AACL,EAAE;AACF;;;AAMA,MAAM,CAAC,uBAAuB,GAAG,uBAAuB;;ACziBxD,MAAM,cAAc,CAAC;;;AAGrB,EAAE,OAAO,UAAU,CAAC,QAAQ,EAAE;AAC9B,IAAI,IAAI,CAAC,QAAQ,IAAI,QAAQ,KAAK,EAAE,EAAE,OAAO,IAAI;;AAEjD,IAAI,IAAI;;AAER,MAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,KAAK,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,EAAE;AAC/G,QAAQ,OAAO,CAAC,UAAU,EAAE,QAAQ,CAAC,iLAAiL,CAAC;AACvN,MAAM;;;AAGN,MAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;AACvE,QAAQ,OAAO,CAAC,eAAe,EAAE,QAAQ,CAAC,iDAAiD,CAAC;AAC5F,MAAM;;;AAGN,MAAM,MAAM,UAAU,GAAG,QAAQ,CAAC,QAAQ,EAAE;AAC5C,MAAM,OAAO,UAAU,IAAI,IAAI;AAC/B,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,IAAI,CAAC,sBAAsB,EAAE,KAAK,CAAC;AACjD,MAAM,OAAO,IAAI;AACjB,IAAI;AACJ,EAAE;;;AAGF,EAAE,OAAO,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;AAC3C,IAAI,OAAO,CAAC;AACZ;AACA,gCAAgC,EAAE,IAAI,CAAC;AACvC,gCAAgC,EAAE,IAAI,CAAC;AACvC,mCAAmC,EAAE,OAAO,CAAC;AAC7C;AACA,IAAI,CAAC;AACL,EAAE;;;AAGF,EAAE,OAAO,eAAe,CAAC,cAAc,EAAE,YAAY,GAAG,EAAE,EAAE,WAAW,GAAG,EAAE,EAAE;;AAE9E,IAAI,IAAI,OAAO,cAAc,KAAK,QAAQ,IAAI,cAAc,KAAK,IAAI,EAAE;AACvE,MAAM,IAAI,cAAc,CAAC,IAAI,EAAE;AAC/B,QAAQ,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC;AACnD,MAAM;AACN,MAAM,cAAc,GAAG,cAAc,CAAC,QAAQ;AAC9C,IAAI;;;AAGJ,IAAI,IAAI,cAAc,IAAI,YAAY,EAAE;AACxC,MAAM,MAAM,QAAQ,GAAG,cAAc,CAAC,WAAW,EAAE;AACnD,MAAM,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;AAClC,QAAQ,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AACtD,MAAM;AACN,IAAI;;;AAGJ,IAAI,IAAI,cAAc,IAAI,WAAW,EAAE;AACvC,MAAM,MAAM,QAAQ,GAAG,cAAc,CAAC,WAAW,EAAE;AACnD,MAAM,IAAI,WAAW,CAAC,QAAQ,CAAC,EAAE;AACjC,QAAQ,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;AACrD,MAAM;AACN,IAAI;;;AAGJ,IAAI,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;AAChC,EAAE;;;AAGF,EAAE,OAAO,4BAA4B,CAAC,UAAU,EAAE;AAClD,IAAI,IAAI,CAAC,UAAU,EAAE,OAAO,IAAI;;AAEhC,IAAI,MAAM,IAAI,GAAG,UAAU,CAAC,WAAW,EAAE;;;AAGzC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;AAChE,MAAM,OAAO;AACb,QAAQ,IAAI,EAAE,QAAQ;AACtB,QAAQ,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI;AACzD,OAAO;AACP,IAAI;;;AAGJ,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AACxF,MAAM,OAAO;AACb,QAAQ,IAAI,EAAE,YAAY;AAC1B,QAAQ,YAAY,EAAE,EAAE,YAAY,EAAE,4BAA4B;AAClE,OAAO;AACP,IAAI;;;AAGJ,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE;AACxF,MAAM,OAAO;AACb,QAAQ,IAAI,EAAE,QAAQ;AACtB,QAAQ,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI;AACzD,OAAO;AACP,IAAI;;AAEJ,IAAI,OAAO,IAAI;AACf,EAAE;;;AAGF,EAAE,OAAO,sBAAsB,CAAC,KAAK,EAAE,cAAc,EAAE,mBAAmB,EAAE;AAC5E,IAAI,MAAM,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI;AACzC,MAAM,IAAI,CAAC,MAAM,KAAK,MAAM;AAC5B,MAAM,mBAAmB,IAAI,mBAAmB,CAAC,IAAI;AACrD,KAAK;;AAEL,IAAI,MAAM,eAAe,GAAG,WAAW,CAAC,MAAM;AAC9C,IAAI,MAAM,cAAc,GAAG,cAAc,IAAI,CAAC;;AAE9C,IAAI,MAAM,eAAe,GAAG,eAAe,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,cAAc,GAAG,eAAe,IAAI,GAAG,CAAC,GAAG,CAAC;;AAE1G,IAAI,OAAO;AACX,MAAM,cAAc,EAAE,cAAc;AACpC,MAAM,eAAe;AACrB,MAAM,eAAe;AACrB,MAAM;AACN,KAAK;AACL,EAAE;;;AAGF,EAAE,OAAO,UAAU,CAAC,UAAU,EAAE;AAChC,IAAI,IAAI,CAAC,UAAU,EAAE,OAAO,EAAE;;AAE9B,IAAI,IAAI;AACR,MAAM,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC;AACvC,MAAM,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,OAAO,EAAE,CAAC;AAC9E,MAAM,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;;AAEpF,MAAM,MAAM,QAAQ,GAAG,QAAQ,GAAG,KAAK;AACvC,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;AAElE,MAAM,IAAI,QAAQ,KAAK,CAAC,EAAE,OAAO,cAAc;AAC/C,MAAM,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM;AACxC,MAAM,IAAI,QAAQ,KAAK,CAAC,EAAE,OAAO,QAAQ;AACzC,MAAM,IAAI,QAAQ,GAAG,CAAC,IAAI,QAAQ,IAAI,CAAC,EAAE,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,MAAM,CAAC;AACxE,MAAM,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,QAAQ,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;;AAEtF,MAAM,OAAO,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE;AAC9C,QAAQ,GAAG,EAAE,SAAS;AACtB,QAAQ,KAAK,EAAE,SAAS;AACxB,QAAQ,IAAI,EAAE;AACd,OAAO,CAAC;AACR,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,IAAI,CAAC,wBAAwB,EAAE,KAAK,CAAC;AACnD,MAAM,OAAO,EAAE;AACf,IAAI;AACJ,EAAE;;;AAGF,EAAE,OAAO,YAAY,CAAC,MAAM,EAAE;AAC9B,IAAI,IAAI,CAAC,MAAM,IAAI,MAAM,KAAK,CAAC,EAAE,OAAO,GAAG;AAC3C,IAAI,OAAO,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,EAAE;AACxD,EAAE;;;AAGF,EAAE,OAAO,gBAAgB,CAAC,MAAM,EAAE;AAClC,IAAI,IAAI,MAAM,CAAC,IAAI,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,GAAG,CAAC,EAAE,OAAO,eAAe;AACvE,IAAI,IAAI,MAAM,CAAC,SAAS,GAAG,CAAC,EAAE,OAAO,YAAY;AACjD,IAAI,OAAO,aAAa;AACxB,EAAE;;;AAGF,EAAE,OAAO,kBAAkB,GAAG;AAC9B,IAAI,OAAO,gEAAgE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;AACrG,YAAY,SAAS,CAAC,cAAc,IAAI,SAAS,CAAC,cAAc,GAAG,CAAC,CAAC;AACrE,EAAE;;;AAGF,EAAE,OAAO,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE;AAC9B,IAAI,IAAI,OAAO;AACf,IAAI,OAAO,SAAS,gBAAgB,CAAC,GAAG,IAAI,EAAE;AAC9C,MAAM,MAAM,KAAK,GAAG,MAAM;AAC1B,QAAQ,YAAY,CAAC,OAAO,CAAC;AAC7B,QAAQ,IAAI,CAAC,GAAG,IAAI,CAAC;AACrB,MAAM,CAAC;AACP,MAAM,YAAY,CAAC,OAAO,CAAC;AAC3B,MAAM,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,IAAI,CAAC;AACvC,IAAI,CAAC;AACL,EAAE;;;AAGF,EAAE,OAAO,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE;AAC/B,IAAI,IAAI,UAAU;AAClB,IAAI,OAAO,SAAS,gBAAgB,CAAC,GAAG,IAAI,EAAE;AAC9C,MAAM,IAAI,CAAC,UAAU,EAAE;AACvB,QAAQ,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;AAC9B,QAAQ,UAAU,GAAG,IAAI;AACzB,QAAQ,UAAU,CAAC,MAAM,UAAU,GAAG,KAAK,EAAE,KAAK,CAAC;AACnD,MAAM;AACN,IAAI,CAAC;AACL,EAAE;;;AAGF,EAAE,OAAO,SAAS,CAAC,GAAG,EAAE;AACxB,IAAI,IAAI,GAAG,KAAK,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,OAAO,GAAG;AAC3D,IAAI,IAAI,GAAG,YAAY,IAAI,EAAE,OAAO,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;AAC3D,IAAI,IAAI,GAAG,YAAY,KAAK,EAAE,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AAC1E,IAAI,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACjC,MAAM,MAAM,SAAS,GAAG,EAAE;AAC1B,MAAM,KAAK,MAAM,GAAG,IAAI,GAAG,EAAE;AAC7B,QAAQ,IAAI,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACrC,UAAU,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACnD,QAAQ;AACR,MAAM;AACN,MAAM,OAAO,SAAS;AACtB,IAAI;AACJ,EAAE;;;AAGF,EAAE,OAAO,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE,YAAY,GAAG,IAAI,EAAE;AACjD,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AAChC,IAAI,IAAI,OAAO,GAAG,GAAG;;AAErB,IAAI,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,IAAI,OAAO,KAAK,IAAI,IAAI,OAAO,KAAK,SAAS,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AACrF,QAAQ,OAAO,YAAY;AAC3B,MAAM;AACN,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC;AAC5B,IAAI;;AAEJ,IAAI,OAAO,OAAO;AAClB,EAAE;;;AAGF,EAAE,OAAO,YAAY,CAAC,KAAK,EAAE;AAC7B,IAAI,OAAO,KAAK;AAChB,WAAW,OAAO,KAAK,KAAK,QAAQ;AACpC,WAAW,KAAK,CAAC,EAAE;AACnB,WAAW,KAAK,CAAC,IAAI;AACrB,EAAE;;AAEF,EAAE,OAAO,WAAW,CAAC,IAAI,EAAE;AAC3B,IAAI,OAAO,IAAI;AACf,WAAW,OAAO,IAAI,KAAK,QAAQ;AACnC,WAAW,IAAI,CAAC,EAAE;AAClB,WAAW,IAAI,CAAC,IAAI;AACpB,WAAW,IAAI,CAAC,MAAM;AACtB,EAAE;;AAEF,EAAE,OAAO,aAAa,CAAC,MAAM,EAAE;AAC/B,IAAI,OAAO,MAAM;AACjB,WAAW,OAAO,MAAM,KAAK,QAAQ;AACrC,WAAW,MAAM,CAAC,EAAE;AACpB,WAAW,MAAM,CAAC,IAAI;AACtB,YAAY,MAAM,CAAC,IAAI,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC;AACpD,EAAE;;;AAGF,EAAE,OAAO,WAAW,CAAC,EAAE,EAAE,aAAa,GAAG,IAAI,EAAE,OAAO,GAAG,SAAS,EAAE;AACpE,IAAI,IAAI;AACR,MAAM,OAAO,EAAE,EAAE;AACjB,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC,sBAAsB,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;AAC9D,MAAM,OAAO,aAAa;AAC1B,IAAI;AACJ,EAAE;AACF;;AClQA,MAAM,2BAA2B,CAAC;AAClC,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,OAAO,GAAG;AACnB,MAAM,WAAW,EAAE,EAAE;AACrB,MAAM,UAAU,EAAE,EAAE;AACpB,MAAM,aAAa,EAAE,EAAE;AACvB,MAAM,WAAW,EAAE,EAAE;AACrB,MAAM,eAAe,EAAE;AACvB,KAAK;;AAEL,IAAI,IAAI,CAAC,SAAS,GAAG;AACrB,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,WAAW,EAAE,IAAI;AACvB,MAAM,MAAM,EAAE;AACd,KAAK;;AAEL,IAAI,IAAI,CAAC,SAAS,GAAG,IAAkE;AACvF,IAAI,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,GAAG,EAAE;;AAEtC,IAAI,IAAI,IAAI,CAAC,SAAS,EAAE;AACxB,MAAM,IAAI,CAAC,oBAAoB,EAAE;AACjC,IAAI;AACJ,EAAE;;;AAGF,EAAE,oBAAoB,GAAG;AACzB,IAAI,IAAI,CAAC,qBAAqB,EAAE;AAChC,IAAI,IAAI,CAAC,wBAAwB,EAAE;AACnC,IAAI,IAAI,CAAC,qBAAqB,EAAE;;AAEhC,IAAiB;AACjB,MAAM,OAAO,CAAC,IAAI,CAAC,mCAAmC,CAAC;AACvD,IAAI;AACJ,EAAE;;;AAGF,EAAE,WAAW,CAAC,aAAa,EAAE,SAAS,EAAE,OAAO,EAAE;AACjD,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;;AAEzB,IAAI,MAAM,UAAU,GAAG,OAAO,GAAG,SAAS;AAC1C,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;AAClC,MAAM,SAAS,EAAE,aAAa;AAC9B,MAAM,QAAQ,EAAE,UAAU;AAC1B,MAAM,SAAS,EAAE,IAAI,CAAC,GAAG;AACzB,KAAK,CAAC;;;AAGN,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,GAAG,EAAE;AAC/C,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE;AACtC,IAAI;;;AAGJ,IAAI,IAAI,UAAU,GAAG,EAAE,IAAI,IAAO,EAAE;AACpC,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC,yBAAyB,EAAE,aAAa,CAAC,MAAM,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/F,IAAI;AACJ,EAAE;;;AAGF,EAAE,cAAc,CAAC,SAAS,EAAE,YAAY,GAAG,CAAC,EAAE;AAC9C,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;;AAEzB,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC;AACjC,MAAM,SAAS;AACf,MAAM,YAAY;AAClB,MAAM,SAAS,EAAE,IAAI,CAAC,GAAG;AACzB,KAAK,CAAC;;;AAGN,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,EAAE;AAC7C,MAAM,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE;AACrC,IAAI;AACJ,EAAE;;;AAGF,EAAE,iBAAiB,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,GAAG,KAAK,EAAE;AACtD,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;;AAEzB,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC;AACpC,MAAM,KAAK;AACX,MAAM,SAAS;AACf,MAAM,MAAM;AACZ,MAAM,SAAS,EAAE,IAAI,CAAC,GAAG;AACzB,KAAK,CAAC;;;AAGN,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,CAAC,EAAE;AAClD,MAAM,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,CAAC,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE;AAC7D,IAAI;;AAEJ,IAAI,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,MAAM,IAAI,MAAM,KAAK,KAAK,GAAG,CAAC,GAAG,EAAE;AAC/E,EAAE;;;AAGF,EAAE,qBAAqB,GAAG;AAC1B,IAAI,IAAI,OAAO,gBAAgB,KAAK,WAAW,EAAE;;AAEjD,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,gBAAgB,CAAC,CAAC,SAAS,KAAK;AAClE,MAAM,IAAI,YAAY,GAAG,CAAC;AAC1B,MAAM,SAAS,CAAC,OAAO,CAAC,QAAQ,IAAI;AACpC,QAAQ,YAAY,IAAI,QAAQ,CAAC,UAAU,CAAC,MAAM,GAAG,QAAQ,CAAC,YAAY,CAAC,MAAM;AACjF,MAAM,CAAC,CAAC;;AAER,MAAM,IAAI,YAAY,GAAG,CAAC,EAAE;AAC5B,QAAQ,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,YAAY,CAAC;AACrD,MAAM;AACN,IAAI,CAAC,CAAC;;;AAGN,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE;AACnD,MAAM,SAAS,EAAE,IAAI;AACrB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,UAAU,EAAE;AAClB,KAAK,CAAC;AACN,EAAE;;;AAGF,EAAE,wBAAwB,GAAG;AAC7B,IAAI,IAAI,OAAO,mBAAmB,KAAK,WAAW,EAAE;;AAEpD,IAAI,IAAI;AACR,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,mBAAmB,CAAC,CAAC,IAAI,KAAK;AACrE,QAAQ,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE;AACzC,QAAQ,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI;AACjC,UAAU,IAAI,KAAK,CAAC,SAAS,KAAK,UAAU,IAAI,KAAK,CAAC,QAAQ,GAAG,EAAE,EAAE;AACrE,YAAY,OAAO,CAAC,IAAI,CAAC,CAAC,uBAAuB,EAAE,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACjF,UAAU;AACV,QAAQ,CAAC,CAAC;AACV,MAAM,CAAC,CAAC;;AAER,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,UAAU,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC;AACtE,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;;AAEpB,IAAI;AACJ,EAAE;;;AAGF,EAAE,qBAAqB,GAAG;AAC1B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;;AAE7B,IAAI,MAAM,aAAa,GAAG,MAAM;AAChC,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;;AAE3B,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;AACpC,QAAQ,IAAI,EAAE,WAAW,CAAC,MAAM,CAAC,cAAc;AAC/C,QAAQ,KAAK,EAAE,WAAW,CAAC,MAAM,CAAC,eAAe;AACjD,QAAQ,KAAK,EAAE,WAAW,CAAC,MAAM,CAAC,eAAe;AACjD,QAAQ,SAAS,EAAE,IAAI,CAAC,GAAG;AAC3B,OAAO,CAAC;;;AAGR,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,EAAE,EAAE;AAChD,QAAQ,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE;AACxC,MAAM;AACN,IAAI,CAAC;;;AAGL,IAAI,WAAW,CAAC,aAAa,EAAE,KAAK,CAAC;AACrC,IAAI,aAAa,EAAE;AACnB,EAAE;;;AAGF,EAAE,UAAU,CAAC,SAAS,EAAE,cAAc,EAAE;AACxC,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,cAAc;;AAE9C,IAAI,OAAO,SAAS,GAAG,IAAI,EAAE;AAC7B,MAAM,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,EAAE;AACzC,MAAM,MAAM,MAAM,GAAG,cAAc,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC;AACrD,MAAM,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,EAAE;;AAEvC,MAAM,MAAM,CAAC,2BAA2B,EAAE,WAAW;AACrD,QAAQ,SAAS,CAAC,WAAW,CAAC,IAAI;AAClC,QAAQ,SAAS;AACjB,QAAQ;AACR,OAAO;;AAEP,MAAM,OAAO,MAAM;AACnB,IAAI,CAAC;AACL,EAAE;;;AAGF,EAAE,cAAc,GAAG;AACnB,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI;;AAEpC,IAAI,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE;AAC1B,IAAI,MAAM,YAAY,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC;;;AAG9C,IAAI,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,YAAY,CAAC;AAC1F,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,GAAG,YAAY,CAAC;AAC5F,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC;;;AAG3D,IAAI,MAAM,aAAa,GAAG,aAAa,CAAC,MAAM,GAAG;AACjD,QAAQ,aAAa,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,GAAG,aAAa,CAAC;AAC9E,QAAQ,CAAC;;AAET,IAAI,MAAM,WAAW,GAAG,YAAY,CAAC,MAAM,GAAG;AAC9C,QAAQ,YAAY,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC;AACrE,QAAQ,CAAC;;AAET,IAAI,OAAO;AACX,MAAM,OAAO,EAAE;AACf,QAAQ,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC;AACzD,QAAQ,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,GAAG,CAAC,GAAG,GAAG;AAC5D,QAAQ,YAAY,EAAE,aAAa,CAAC,MAAM;AAC1C,QAAQ,UAAU,EAAE,gBAAgB,CAAC,MAAM;AAC3C,QAAQ,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;AACnD,QAAQ,gBAAgB,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;AACpE,OAAO;AACP,MAAM,OAAO,EAAE;AACf,QAAQ,WAAW,EAAE,aAAa,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,GAAG,EAAE,CAAC;AAC/D,QAAQ,kBAAkB,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe;AACxD,QAAQ,WAAW,EAAE;AACrB;AACA,KAAK;AACL,EAAE;;;AAGF,EAAE,YAAY,CAAC,IAAI,EAAE;AACrB,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,IAAI;AACpC,IAAI,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,CAAC,GAAG,EAAE,EAAE;AACjD,EAAE;;AAEF,EAAE,UAAU,CAAC,OAAO,EAAE;AACtB,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,EAAE;AACrC,IAAI,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,EAAE,GAAG,OAAO,CAAC,SAAS;AAC1D,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/D,IAAI,OAAO,QAAQ;AACnB,EAAE;;;AAGF,EAAE,MAAM,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE;AACpC,IAAI,IAAI,CAAC,SAAS,GAAG,OAAO;AAC5B,IAAI,YAAY,CAAC,OAAO,CAAC,sBAAsB,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC;;AAEpE,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;AAC7C,MAAM,IAAI,CAAC,oBAAoB,EAAE;AACjC,IAAI;;AAEJ,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,0BAA0B,EAAE,OAAO,GAAG,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AACjF,EAAE;;;AAGF,EAAE,OAAO,GAAG;AACZ,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE;AACjC,MAAM,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,EAAE;AAC1C,IAAI;AACJ,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE;AACpC,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,EAAE;AAC7C,IAAI;;AAEJ,IAAI,IAAI,CAAC,OAAO,GAAG;AACnB,MAAM,WAAW,EAAE,EAAE;AACrB,MAAM,UAAU,EAAE,EAAE;AACpB,MAAM,aAAa,EAAE,EAAE;AACvB,MAAM,WAAW,EAAE,EAAE;AACrB,MAAM,eAAe,EAAE;AACvB,KAAK;AACL,EAAE;AACF;;;AAGA,IAAIA,oBAAkB;;;AAGtB,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACnC,EAAEA,oBAAkB,GAAG,IAAI,2BAA2B,EAAE;AACxD,EAAE,MAAM,CAAC,2BAA2B,GAAGA,oBAAkB;;;AAGzD,EAAe;AACf,IAAI,MAAM,CAAC,MAAM,GAAG;AACpB,MAAM,MAAM,EAAE,MAAMA,oBAAkB,CAAC,cAAc,EAAE;AACvD,MAAM,MAAM,EAAE,MAAMA,oBAAkB,CAAC,MAAM,EAAE;AAC/C,MAAM,KAAK,EAAE,MAAMA,oBAAkB,CAAC,OAAO;AAC7C,KAAK;;AAEL,IAAI,OAAO,CAAC,IAAI,CAAC,gDAAgD,CAAC;AAClE,EAAE;AACF;AAGA,2BAAeA,oBAAkB;;AC1RjC,MAAM,eAAe,CAAC;AACtB,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,aAAa,GAAG,IAAgB;AACzC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,aAAa,IAAI,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,MAAM;AAC3F,IAAI,IAAI,CAAC,SAAS,GAAG;AACrB,MAAM,KAAK,EAAE,CAAC;AACd,MAAM,IAAI,EAAE,CAAC;AACb,MAAM,IAAI,EAAE,CAAC;AACb,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,GAAG,CAAC,GAAG,CAAC;AAClD,EAAE;;;AAGF,EAAE,KAAK,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;AACnD,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;AAC1D,IAAI;AACJ,EAAE;;;AAGF,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE;AACzB,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE;AAClD,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;AACzD,IAAI;AACJ,EAAE;;;AAGF,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE;AACzB,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE;AAClD,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;AACzD,IAAI;AACJ,EAAE;;;AAGF,EAAE,KAAK,CAAC,OAAO,EAAE,GAAG,IAAI,EAAE;AAC1B,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,cAAc,EAAE;AAC1E,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAC;AAC1D,IAAI;AACJ,EAAE;;;AAGF,EAAE,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAE;AACpC,IAAI,IAAI,IAAI,CAAC,cAAc,IAAI,QAAQ,KAAK,SAAS,EAAE;AACvD,MAAM,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvE,IAAI;AACJ,EAAE;;;AAGF,EAAE,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE;AACzB,IAAI,IAAI,IAAI,CAAC,cAAc,EAAE;AAC7B,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/C,MAAM,IAAI;AACV,QAAQ,QAAQ,EAAE;AAClB,MAAM,CAAC,SAAS;AAChB,QAAQ,OAAO,CAAC,QAAQ,EAAE;AAC1B,MAAM;AACN,IAAI,CAAC,MAAM;AACX,MAAM,QAAQ,EAAE;AAChB,IAAI;AACJ,EAAE;;;AAGF,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,cAAc;AAC9C,IAAI,YAAY,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAC;AACpE,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,CAAC,cAAc,GAAG,SAAS,GAAG,UAAU,CAAC,CAAC,CAAC;AAC3E,EAAE;;;AAGF,EAAE,QAAQ,CAAC,KAAK,EAAE;AAClB,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,SAAS,EAAE;AACjC,MAAM,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;AAC/C,MAAM,IAAI,CAAC,IAAI,CAAC,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,CAAC;AAC7C,IAAI;AACJ,EAAE;AACF;;;AAGA,MAAM,MAAM,GAAG,IAAI,eAAe,EAAE;;;AAGpC,IAAe,OAAO,MAAM,KAAK,WAAW,EAAE;AAC9C,EAAE,MAAM,CAAC,QAAQ,GAAG,MAAM;AAC1B,EAAE,MAAM,CAAC,OAAO,GAAG,MAAM,MAAM,CAAC,WAAW,EAAE;AAC7C;;ACjFA,MAAM,iBAAiB,SAAS,WAAW,CAAC;AAC5C,EAAE,WAAW,GAAG;AAChB,IAAI,KAAK,EAAE;AACX,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;AACvC,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK;;;AAG7B,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI;AAChC,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI;AACpC,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK;AAC7B,IAAI,IAAI,CAAC,cAAc,GAAG,KAAK;;;AAG/B,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,OAAO,EAAE;AACrC,IAAI,IAAI,CAAC,iBAAiB,GAAG,IAAI,GAAG,EAAE;AACtC,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,EAAE;;;AAG/C,IAAI,IAAI,OAAO,qBAAqB,KAAK,WAAW,EAAE;AACtD,MAAM,qBAAqB,CAAC,kBAAkB,EAAE;AAChD,IAAI;;;AAGJ,IAAI,IAAIA,oBAAkB,EAAE;AAC5B,MAAMA,oBAAkB,CAAC,iBAAiB,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC;AACvF,IAAI;AACJ,EAAE;;AAEF,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE;AACjB,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK;AAC9B,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI;AACrB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,EAAE;AACpC,MAAM,IAAI,CAAC,YAAY,GAAG,IAAI;AAC9B,MAAM,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC5E,MAAM,IAAI,CAAC,qBAAqB,EAAE;AAClC,MAAM,IAAI,CAAC,WAAW,EAAE;AACxB,IAAI,CAAC,MAAM,IAAI,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE;AACzD,MAAM,IAAI,CAAC,WAAW,EAAE;AACxB,MAAM,IAAI,IAAI,CAAC,YAAY,EAAE;AAC7B,QAAQ,IAAI,CAAC,qBAAqB,EAAE;AACpC,MAAM;AACN,IAAI;AACJ,EAAE;;;AAGF,EAAE,WAAW,CAAC,KAAK,GAAG,KAAK,EAAE;;AAE7B,IAAI,IAAI,IAAI,CAAC,YAAY,IAAI,CAAC,KAAK,EAAE;AACrC,MAAM,IAAI,CAAC,cAAc,GAAG,IAAI;AAChC,MAAM;AACN,IAAI;;;AAGJ,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;AACnC,MAAM,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC;AAC7C,IAAI;;AAEJ,IAAI,IAAI,CAAC,oBAAoB,GAAG,UAAU,CAAC,MAAM;AACjD,MAAM,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;AAChC,IAAI,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC;AACtB,EAAE;;AAEF,EAAE,cAAc,CAAC,KAAK,GAAG,KAAK,EAAE;AAChC,IAAI,IAAI,IAAI,CAAC,YAAY,EAAE;;AAE3B,IAAI,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,EAAE;AACvC,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI;;AAE5B,IAAI,IAAI;;AAER,MAAM,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE;AAC1C,QAAQ;AACR,MAAM;;;AAGN,MAAM,IAAI,CAAC,MAAM,EAAE;;;AAGnB,MAAM,IAAI,CAAC,kBAAkB,EAAE;;;AAG/B,MAAM,IAAI,IAAI,CAAC,cAAc,EAAE;AAC/B,QAAQ,IAAI,CAAC,cAAc,GAAG,KAAK;AACnC,QAAQ,UAAU,CAAC,MAAM,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;AAC/C,MAAM;;AAEN,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,MAAM,CAAC,KAAK,CAAC,iBAAiB,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC;AACnE,MAAM,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;AACpC,IAAI,CAAC,SAAS;AACd,MAAM,IAAI,CAAC,YAAY,GAAG,KAAK;;;AAG/B,MAAM,IAAIA,oBAAkB,EAAE;AAC9B,QAAQ,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,EAAE;AACzC,QAAQA,oBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,SAAS,EAAE,OAAO,CAAC;AACjF,MAAM;AACN,IAAI;AACJ,EAAE;;;AAGF,EAAE,YAAY,GAAG;AACjB,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,sBAAsB,EAAE;;AAEtD,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;AAChC,MAAM,OAAO,IAAI;AACjB,IAAI;;;AAGJ,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC;AACjF,EAAE;;;AAGF,EAAE,sBAAsB,GAAG;AAC3B,IAAI,OAAO;AACX,MAAM,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK;AAC3B,MAAM,WAAW,EAAE,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC;AAC/E,MAAM,UAAU,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI;AAChF,MAAM,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI;AAC7C,KAAK;AACL,EAAE;;;AAGF,EAAE,kBAAkB,GAAG;AACvB,IAAI,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,EAAE;AACzD,EAAE;;;AAGF,EAAE,kBAAkB,CAAC,KAAK,EAAE;AAC5B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;AACzB,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC;AACnC;AACA;AACA,iDAAiD,EAAE,KAAK,CAAC,OAAO,CAAC;AACjE;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC;AACP,IAAI;AACJ,EAAE;;AAEF,EAAE,WAAW,CAAC,KAAK,EAAE;AACrB,IAAI,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC;AACxD,IAAI,IAAI,CAAC,MAAM,EAAE;AACjB,MAAM,IAAI,CAAC,2BAA2B,EAAE;AACxC,MAAM;AACN,IAAI;;;AAGJ,IAAI,MAAM,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC;AAC1D,IAAI,IAAI,aAAa,EAAE;;;AAGvB,IAAI,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;AACnF,IAAI,IAAI,UAAU,IAAI,UAAU,CAAC,QAAQ,EAAE;;;AAG3C,IAAI,MAAM,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC,oBAAoB,CAAC;AAC9D,IAAI,IAAI,aAAa,KAAK,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,EAAE;AAClI,MAAM;AACN,IAAI;;;AAGJ,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;AAC3G,MAAM,IAAI,CAAC,2BAA2B,EAAE;AACxC,IAAI;;AAEJ,IAAI,KAAK,CAAC,cAAc,EAAE;AAC1B,IAAI,KAAK,CAAC,eAAe,EAAE;;AAE3B,IAAI,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM;AACxC,IAAI,MAAM,EAAE,GAAG,MAAM,CAAC,OAAO,CAAC,EAAE;;;AAGhC,IAAI,IAAI,MAAM,KAAK,gBAAgB,IAAI,MAAM,KAAK,iBAAiB,IAAI,MAAM,KAAK,cAAc,EAAE;AAClG,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC;AAC7D,IAAI,CAAC,MAAM;AACX,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,EAAE,EAAE,KAAK,CAAC;AAC1C,IAAI;AACJ,EAAE;;;AAGF,EAAE,mBAAmB,GAAG;AACxB,IAAI,OAAO,OAAO,cAAc,KAAK;AACrC,QAAQ,cAAc,CAAC,kBAAkB;AACzC,QAAQ,cAAc,IAAI,MAAM,IAAI,SAAS,CAAC,cAAc,GAAG,CAAC;AAChE,EAAE;;AAEF,EAAE,qBAAqB,GAAG;AAC1B,IAAI,IAAI,CAAC,yBAAyB,EAAE;AACpC,IAAI,IAAI,CAAC,oBAAoB,EAAE;AAC/B,IAAI,IAAI,CAAC,iBAAiB,EAAE;AAC5B,EAAE;;AAEF,EAAE,yBAAyB,GAAG;;AAE9B,IAAI,KAAK,MAAM,UAAU,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,EAAE;AAC9D,MAAM,UAAU,CAAC,KAAK,EAAE;AACxB,MAAM,IAAIA,oBAAkB,EAAE;AAC9B,QAAQA,oBAAkB,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC;AACtF,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE;AAClC,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,OAAO,EAAE;AACrC,IAAI,IAAI,CAAC,wBAAwB,GAAG,KAAK;AACzC,IAAI,IAAI,CAAC,oBAAoB,GAAG,KAAK;;;AAGrC,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;AACnC,MAAM,YAAY,CAAC,IAAI,CAAC,oBAAoB,CAAC;AAC7C,MAAM,IAAI,CAAC,oBAAoB,GAAG,IAAI;AACtC,IAAI;AACJ,EAAE;;;AAGF,EAAE,oBAAoB,GAAG;AACzB,IAAI,IAAI,CAAC,yBAAyB,EAAE;;;AAGpC,IAAI,IAAI,IAAI,CAAC,cAAc,EAAE;AAC7B,MAAM,IAAI,CAAC,cAAc,EAAE;AAC3B,IAAI;;;AAGJ,IAAI,IAAIA,oBAAkB,EAAE;AAC5B,MAAMA,oBAAkB,CAAC,iBAAiB,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC;AACzF,IAAI;AACJ,EAAE;;;AAGF,EAAE,qBAAqB,GAAG;AAC1B,IAAI,IAAI,IAAI,CAAC,qBAAqB,EAAE;;;AAGpC,IAAI,MAAM,oBAAoB,GAAG,CAAC,KAAK,KAAK;AAC5C,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,CAAC;AAC1D,MAAM,IAAI,MAAM,EAAE;AAClB,QAAQ,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;AAC/B,MAAM;AACN,IAAI,CAAC;;AAEL,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,oBAAoB,EAAE;AACpE,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,OAAO,EAAE;AACf,KAAK,CAAC;;AAEN,IAAI,IAAIA,oBAAkB,EAAE;AAC5B,MAAMA,oBAAkB,CAAC,iBAAiB,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC;AACtF,IAAI;;AAEJ,IAAI,IAAI,CAAC,qBAAqB,GAAG,IAAI;AACrC,EAAE;;AAEF,EAAE,oBAAoB,GAAG;AACzB,IAAI,IAAI,IAAI,CAAC,wBAAwB,EAAE;AACvC,IAAI,IAAI,CAAC,wBAAwB,GAAG,IAAI;;AAExC,IAAI,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE;AAC5C,IAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,CAAC;AACvD,IAAI,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM;;AAEpC,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC;AACxB,QAAQ,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,WAAW;AAC/D,QAAQ,EAAE,IAAI,EAAE,aAAa,EAAE,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,aAAa,EAAE;;AAErE,IAAI,MAAM,WAAW,GAAG,CAAC,CAAC,KAAK;AAC/B,MAAM,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC;AACnE,MAAM,IAAI,CAAC,aAAa,IAAI,aAAa,CAAC,aAAa,CAAC,sCAAsC,CAAC,EAAE;AACjG,QAAQ;AACR,MAAM;;AAEN,MAAM,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AACtE,MAAM,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;;AAEtE,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,EAAE;;AAEhC,MAAM,MAAM,KAAK,GAAG;AACpB,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,MAAM,EAAE,OAAO;AACvB,QAAQ,MAAM,EAAE,OAAO;AACvB,QAAQ,QAAQ,EAAE,IAAI;AACtB,QAAQ,OAAO,EAAE;AACjB,OAAO;;AAEP,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,CAAC;AAC3D,MAAM,IAAI,QAAQ,IAAI,QAAQ,CAAC,KAAK,EAAE;AACtC,QAAQ,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC;AACpC,MAAM;;AAEN,MAAM,KAAK,CAAC,KAAK,GAAG,UAAU,CAAC,MAAM;AACrC,QAAQ,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,CAAC,KAAK,KAAK,EAAE;AAC9E,UAAU,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC;AACtD,UAAU,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC;AACpD,UAAU,IAAI,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;AACtD,QAAQ;AACR,MAAM,CAAC,EAAE,GAAG,CAAC;;AAEb,MAAM,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC;AACjD,IAAI,CAAC;;AAEL,IAAI,MAAM,SAAS,GAAG,CAAC,CAAC,KAAK;AAC7B,MAAM,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC;AACnE,MAAM,IAAI,CAAC,aAAa,EAAE;;AAE1B,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,CAAC;AACxD,MAAM,IAAI,KAAK,EAAE;AACjB,QAAQ,IAAI,KAAK,CAAC,KAAK,EAAE;AACzB,UAAU,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC;AACnC,QAAQ;AACR,QAAQ,KAAK,CAAC,QAAQ,GAAG,KAAK;AAC9B,QAAQ,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC;AAC/C,MAAM;AACN,IAAI,CAAC;;AAEL,IAAI,MAAM,UAAU,GAAG,CAAC,CAAC,KAAK;AAC9B,MAAM,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,qBAAqB,CAAC;AACnE,MAAM,IAAI,CAAC,aAAa,EAAE;;AAE1B,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,aAAa,CAAC;AACxD,MAAM,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;;AAErC,MAAM,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AACtE,MAAM,MAAM,OAAO,GAAG,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;;AAEtE,MAAM,IAAI,OAAO,IAAI,OAAO,EAAE;AAC9B,QAAQ,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC;AACvD,QAAQ,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC;AACvD,QAAQ,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC;;AAErE,QAAQ,IAAI,QAAQ,GAAG,CAAC,EAAE;AAC1B,UAAU,IAAI,KAAK,CAAC,KAAK,EAAE;AAC3B,YAAY,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC;AACrC,UAAU;AACV,UAAU,KAAK,CAAC,QAAQ,GAAG,KAAK;AAChC,UAAU,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,aAAa,CAAC;AACjD,QAAQ;AACR,MAAM;AACN,IAAI,CAAC;;AAEL,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,EAAE,WAAW,EAAE,EAAE,MAAM,EAAE,CAAC;AAC1E,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,CAAC;AACtE,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,CAAC;AACzE,EAAE;;AAEF,EAAE,sBAAsB,CAAC,IAAI,EAAE;AAC/B,IAAI,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC;;AAE1C,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,yBAAyB,CAAC;AACtE,IAAI,IAAI,YAAY,EAAE;AACtB,MAAM,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;;AAE7C,MAAM,MAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,oBAAoB,CAAC;AACzE,MAAM,MAAM,SAAS,GAAG,YAAY,CAAC,aAAa,CAAC,mBAAmB,CAAC;;AAEvE,MAAM,IAAI,UAAU,EAAE;AACtB,QAAQ,UAAU,CAAC,OAAO,GAAG,MAAM;AACnC,UAAU,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;AACxD,UAAU,MAAM,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE;AACpC,UAAU,IAAI,YAAY,IAAI,EAAE,EAAE;AAClC,YAAY,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,EAAE,CAAC;AAC/C,UAAU;AACV,UAAU,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC;AAC3C,QAAQ,CAAC;AACT,MAAM;;AAEN,MAAM,IAAI,SAAS,EAAE;AACrB,QAAQ,SAAS,CAAC,OAAO,GAAG,CAAC,CAAC,KAAK;AACnC,UAAU,CAAC,CAAC,cAAc,EAAE;AAC5B,UAAU,CAAC,CAAC,eAAe,EAAE;AAC7B,UAAU,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC;AAC3C,QAAQ,CAAC;AACT,MAAM;;AAEN,MAAM,UAAU,CAAC,MAAM;AACvB,QAAQ,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC;AACzC,MAAM,CAAC,EAAE,IAAI,CAAC;AACd,IAAI;AACJ,EAAE;;AAEF,EAAE,sBAAsB,CAAC,IAAI,EAAE;AAC/B,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,yBAAyB,CAAC;AACtE,IAAI,IAAI,YAAY,EAAE;AACtB,MAAM,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;AAC1C,IAAI;AACJ,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC;;AAE1C,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC;AAC7C,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,IAAI,KAAK,CAAC,KAAK,EAAE;AACvB,QAAQ,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC;AACjC,MAAM;AACN,MAAM,KAAK,CAAC,QAAQ,GAAG,KAAK;AAC5B,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC;AACpC,IAAI;;AAEJ,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;AACrC,IAAI,UAAU,CAAC,MAAM;AACrB,MAAM,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,EAAE;AACnC,IAAI,CAAC,EAAE,GAAG,CAAC;AACX,EAAE;;AAEF,EAAE,2BAA2B,CAAC,UAAU,GAAG,IAAI,EAAE;AACjD,IAAI,MAAM,iBAAiB,GAAG,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,sCAAsC,CAAC;;AAEtG,IAAI,iBAAiB,CAAC,OAAO,CAAC,YAAY,IAAI;AAC9C,MAAM,MAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,qBAAqB,CAAC;AACpE,MAAM,IAAI,UAAU,IAAI,UAAU,KAAK,UAAU,EAAE;AACnD,QAAQ,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC;AAC/C,MAAM;AACN,IAAI,CAAC,CAAC;AACN,EAAE;;AAEF,EAAE,iBAAiB,GAAG;AACtB,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;AACnC,IAAI,IAAI,CAAC,oBAAoB,GAAG,IAAI;;AAEpC,IAAI,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE;AAC5C,IAAI,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC;AACnD,IAAI,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM;;AAEpC,IAAI,IAAI,MAAM,GAAG,CAAC;AAClB,IAAI,IAAI,MAAM,GAAG,CAAC;AAClB,IAAI,IAAI,QAAQ,GAAG,CAAC;AACpB,IAAI,IAAI,QAAQ,GAAG,CAAC;AACpB,IAAI,IAAI,UAAU,GAAG,KAAK;AAC1B,IAAI,IAAI,WAAW,GAAG,IAAI;;;AAG1B,IAAI,MAAM,UAAU,GAAG,CAAC,CAAC,KAAK;AAC9B,MAAM,MAAM,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,oBAAoB,CAAC;AAClE,MAAM,IAAI,CAAC,aAAa,EAAE;;AAE1B,MAAM,WAAW,GAAG,aAAa;AACjC,MAAM,UAAU,GAAG,IAAI;AACvB,MAAM,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;AACnC,MAAM,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;AACnC,MAAM,QAAQ,GAAG,MAAM;AACvB,MAAM,QAAQ,GAAG,MAAM;AACvB,IAAI,CAAC;;AAEL,IAAI,MAAM,SAAS,GAAG,CAAC,CAAC,KAAK;AAC7B,MAAM,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE;;AAEvC,MAAM,CAAC,CAAC,cAAc,EAAE;AACxB,MAAM,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;AACrC,MAAM,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;;AAErC,MAAM,MAAM,MAAM,GAAG,QAAQ,GAAG,MAAM;AACtC,MAAM,MAAM,MAAM,GAAG,QAAQ,GAAG,MAAM;;AAEtC,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;AAC/C,QAAQ,UAAU,GAAG,KAAK;AAC1B,QAAQ,WAAW,GAAG,IAAI;AAC1B,QAAQ;AACR,MAAM;;AAEN,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE;AACjC,QAAQ,IAAI,MAAM,GAAG,CAAC,EAAE;AACxB,UAAU,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC;AACpD,UAAU,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC;AACtD,QAAQ,CAAC,MAAM;AACf,UAAU,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC;AACnD,UAAU,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,eAAe,CAAC;AACvD,QAAQ;AACR,MAAM;AACN,IAAI,CAAC;;AAEL,IAAI,MAAM,QAAQ,GAAG,CAAC,CAAC,KAAK;AAC5B,MAAM,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE;;AAEvC,MAAM,MAAM,MAAM,GAAG,QAAQ,GAAG,MAAM;;AAEtC,MAAM,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,EAAE;AACjC,QAAQ,IAAI,MAAM,GAAG,CAAC,EAAE;AACxB,UAAU,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC;AAC5C,QAAQ,CAAC,MAAM;AACf,UAAU,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC;AAC3C,QAAQ;AACR,MAAM;;AAEN,MAAM,UAAU,CAAC,MAAM;AACvB,QAAQ,IAAI,WAAW,EAAE;AACzB,UAAU,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,EAAE,eAAe,CAAC;AACvE,QAAQ;AACR,MAAM,CAAC,EAAE,GAAG,CAAC;;AAEb,MAAM,UAAU,GAAG,KAAK;AACxB,MAAM,WAAW,GAAG,IAAI;AACxB,IAAI,CAAC;;AAEL,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AACzF,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,WAAW,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;AACxF,IAAI,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,UAAU,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AACrF,EAAE;;;AAGF,EAAE,eAAe,CAAC,IAAI,EAAE;;AAExB,EAAE;;AAEF,EAAE,gBAAgB,CAAC,IAAI,EAAE;;AAEzB,EAAE;;;AAGF,EAAE,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE;AACpC,IAAI,OAAO,OAAO,cAAc,KAAK;AACrC,QAAQ,cAAc,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO;AACvD,QAAQ,CAAC;AACT;AACA,oCAAoC,EAAE,IAAI,CAAC;AAC3C,oCAAoC,EAAE,IAAI,CAAC;AAC3C,uCAAuC,EAAE,OAAO,CAAC;AACjD;AACA,QAAQ,CAAC;AACT,EAAE;;AAEF,EAAE,UAAU,CAAC,QAAQ,EAAE;AACvB,IAAI,OAAO,OAAO,cAAc,KAAK;AACrC,QAAQ,cAAc,CAAC,UAAU,CAAC,QAAQ;AAC1C,SAAS,QAAQ,IAAI,IAAI,CAAC;AAC1B,EAAE;;AAEF,EAAE,eAAe,CAAC,cAAc,EAAE;AAClC,IAAI,IAAI,OAAO,cAAc,KAAK,WAAW,EAAE;AAC/C,MAAM,OAAO,cAAc,CAAC,eAAe,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC,cAAc,IAAI,IAAI,EAAE,CAAC;AAC1H,IAAI;AACJ,IAAI,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;AAChC,EAAE;;;AAGF,EAAE,YAAY,CAAC,KAAK,EAAE,YAAY,GAAG,KAAK,EAAE,cAAc,EAAE,eAAe,EAAE;AAC7E,IAAI,IAAI,CAAC,KAAK,EAAE,OAAO,EAAE;;AAEzB,IAAI,MAAM,SAAS,GAAG,cAAc,KAAK,SAAS,GAAG,cAAc,IAAI,KAAK,CAAC,cAAc,IAAI,CAAC,CAAC;AACjG,IAAI,MAAM,KAAK,GAAG,eAAe,KAAK,SAAS,GAAG,eAAe,IAAI,KAAK,CAAC,eAAe,IAAI,CAAC,CAAC;;AAEhG,IAAI,MAAM,WAAW,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,KAAK;AAC3D,MAAM,OAAO,CAAC;AACd;AACA;AACA,sCAAsC,EAAE,KAAK,CAAC;AAC9C,sCAAsC,EAAE,IAAI,CAAC;AAC7C;AACA;AACA,mCAAmC,EAAE,SAAS,CAAC,gBAAgB,EAAE,KAAK,CAAC;AACvE;AACA;AACA,MAAM,CAAC;AACP,IAAI,CAAC;;AAEL,IAAI,MAAM,eAAe,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,GAAG,KAAK,IAAI,GAAG,CAAC,GAAG,CAAC;AACjF,IAAI,MAAM,aAAa,GAAG,WAAW;AACrC,MAAM,gBAAgB;AACtB,MAAM,CAAC,EAAE,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;AAC7B,MAAM,YAAY;AAClB,MAAM;AACN,KAAK;;AAEL,IAAI,IAAI,CAAC,YAAY,EAAE;AACvB,MAAM,OAAO,aAAa;AAC1B,IAAI;;AAEJ,IAAI,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,IAAI,CAAC;AACpC,IAAI,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,CAAC;;AAElC,IAAI,MAAM,WAAW,GAAG,WAAW;AACnC,MAAM,QAAQ;AACd,MAAM,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC;AACpB,MAAM,aAAa;AACnB,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM;AAC1B,KAAK;;AAEL,IAAI,MAAM,UAAU,GAAG,WAAW;AAClC,MAAM,QAAQ;AACd,MAAM,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC;AACnB,MAAM,YAAY;AAClB,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC;AAC7B,KAAK;;AAEL,IAAI,OAAO,CAAC;AACZ;AACA,QAAQ,EAAE,aAAa,CAAC;AACxB,QAAQ,EAAE,WAAW,CAAC;AACtB,QAAQ,EAAE,UAAU,CAAC;AACrB;AACA,IAAI,CAAC;AACL,EAAE;;;AAGF,EAAE,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE;AACjC,IAAI,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;AACnE,EAAE;;AAEF,EAAE,MAAM,GAAG;AACX,IAAI,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC;AAC7D,EAAE;;AAEF,EAAE,YAAY,CAAC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE;AAClC,IAAI,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC;AACnE,EAAE;;;AAGF,EAAE,WAAW,GAAG;AAChB,IAAI,OAAO,EAAE;AACb,EAAE;;AAEF,EAAE,QAAQ,GAAG;AACb,IAAI,OAAO,EAAE;AACb,EAAE;;AAEF,EAAE,UAAU,GAAG;AACf,IAAI,OAAO,EAAE;AACb,EAAE;;AAEF,EAAE,eAAe,GAAG;AACpB,IAAI,OAAO,EAAE;AACb,EAAE;;AAEF,EAAE,cAAc,GAAG;AACnB,IAAI,OAAO,EAAE;AACb,EAAE;AACF;;ACjnBA,MAAM,sBAAsB,SAAS,iBAAiB,CAAC;AACvD,EAAE,WAAW,GAAG;AAChB,IAAI,KAAK,EAAE;AACX,IAAI,IAAI,CAAC,WAAW,GAAG,WAAW;AAClC,EAAE;;AAEF,EAAE,SAAS,CAAC,MAAM,EAAE;AACpB,IAAI,IAAI,CAAC,MAAM,GAAG;AAClB,MAAM,KAAK,EAAE,oBAAoB;AACjC,MAAM,eAAe,EAAE,IAAI;AAC3B,MAAM,cAAc,EAAE,KAAK;AAC3B,MAAM,YAAY,EAAE,IAAI;AACxB,MAAM,IAAI,EAAE,WAAW;AACvB,MAAM,GAAG;AACT,KAAK;AACL,EAAE;;AAEF,EAAE,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE;AACjC,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI;;;AAG7B,IAAI,MAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;AACvG,IAAI,MAAM,eAAe,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,CAAC;;AAEvG,IAAI,OAAO,eAAe,CAAC,MAAM,KAAK,eAAe,CAAC,MAAM;AAC5D,EAAE;;AAEF,EAAE,MAAM,GAAG;AACX,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACrB,MAAM,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,6CAA6C;AAC/E,MAAM;AACN,IAAI;;AAEJ,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE;;AAEvC,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC;AACjC,MAAM,EAAE,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAClC;AACA;AACA,iCAAiC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;AACrD,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,EAAE,GAAG,EAAE,CAAC;AACvE;AACA;AACA;AACA,UAAU,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;AAC7C;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,qBAAqB,GAAG;;AAE1B,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,SAAS,IAAI,mBAAmB;AAClE,IAAI,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,EAAE,YAAY,IAAI,mBAAmB;AACxE,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,uBAAuB,IAAI,mBAAmB;AACxF,IAAI,MAAM,kBAAkB,GAAG,IAAI,CAAC,MAAM,EAAE,yBAAyB,IAAI,qBAAqB;AAC9F,IAAI,MAAM,kBAAkB,GAAG,IAAI,CAAC,MAAM,EAAE,oBAAoB,IAAI,SAAS;AAC7E,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,kBAAkB,IAAI,SAAS;AACzE,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,kBAAkB,IAAI,SAAS;AACzE,IAAI,MAAM,cAAc,GAAG,IAAI,CAAC,MAAM,EAAE,gBAAgB,IAAI,SAAS;AACrE,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,kBAAkB,IAAI,SAAS;AACzE,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,kBAAkB,IAAI,mBAAmB;AACnF,IAAI,MAAM,gBAAgB,GAAG,IAAI,CAAC,MAAM,EAAE,kBAAkB,IAAI,mBAAmB;AACnF,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,EAAE,UAAU,IAAI,SAAS;;AAE1D,IAAI,OAAO,CAAC;AACZ;AACA;AACA,4BAA4B,EAAE,QAAQ,CAAC;AACvC,+BAA+B,EAAE,WAAW,CAAC;AAC7C,oCAAoC,EAAE,gBAAgB,CAAC;AACvD,sCAAsC,EAAE,kBAAkB,CAAC;AAC3D,uCAAuC,EAAE,kBAAkB,CAAC;AAC5D,qCAAqC,EAAE,gBAAgB,CAAC;AACxD,qCAAqC,EAAE,gBAAgB,CAAC;AACxD,mCAAmC,EAAE,cAAc,CAAC;AACpD,qCAAqC,EAAE,gBAAgB,CAAC;AACxD,qCAAqC,EAAE,gBAAgB,CAAC;AACxD,qCAAqC,EAAE,gBAAgB,CAAC;AACxD,6BAA6B,EAAE,SAAS,CAAC;AACzC;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,kBAAkB,GAAG;AACvB,IAAI,OAAO,CAAC;AACZ;AACA,QAAQ,EAAE,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,gBAAgB,GAAG;AACrB,IAAI,MAAM,KAAK,GAAG;AAClB,MAAM,EAAE,EAAE,EAAE,WAAW,EAAE,KAAK,EAAE,oBAAoB,EAAE;AACtD,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,WAAW,EAAE;AAC3C,MAAM,EAAE,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AACL,EAAE;;AAEF,EAAE,YAAY,CAAC,KAAK,EAAE;AACtB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,OAAO,EAAE;;AAE3C,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC;;AAE3C,IAAI,OAAO,CAAC;AACZ;AACA,kCAAkC,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AAC1D,g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"}